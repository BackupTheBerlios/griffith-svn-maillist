<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Griffith-svn] r977 - in trunk: . lib lib/plugins/export	lib/plugins/imp lib/plugins/movie
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/griffith-svn/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r977%20-%20in%20trunk%3A%20.%20lib%20lib/plugins/export%0A%09lib/plugins/imp%20lib/plugins/movie&In-Reply-To=%3C200808020920.m729Ktnx027699%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000459.html">
   <LINK REL="Next"  HREF="000461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Griffith-svn] r977 - in trunk: . lib lib/plugins/export	lib/plugins/imp lib/plugins/movie</H1>
    <B>piotrek at BerliOS</B> 
    <A HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r977%20-%20in%20trunk%3A%20.%20lib%20lib/plugins/export%0A%09lib/plugins/imp%20lib/plugins/movie&In-Reply-To=%3C200808020920.m729Ktnx027699%40sheep.berlios.de%3E"
       TITLE="[Griffith-svn] r977 - in trunk: . lib lib/plugins/export	lib/plugins/imp lib/plugins/movie">piotrek at mail.berlios.de
       </A><BR>
    <I>Sat Aug  2 11:20:55 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000459.html">[Griffith-svn] r976 - in trunk: . lib lib/plugins/export	lib/plugins/imp
</A></li>
        <LI>Next message: <A HREF="000461.html">[Griffith-svn] r978 - in trunk: . lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#460">[ date ]</a>
              <a href="thread.html#460">[ thread ]</a>
              <a href="subject.html#460">[ subject ]</a>
              <a href="author.html#460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: piotrek
Date: 2008-08-02 11:20:49 +0200 (Sat, 02 Aug 2008)
New Revision: 977

Modified:
   trunk/ChangeLog
   trunk/griffith
   trunk/lib/about.py
   trunk/lib/add.py
   trunk/lib/backup.py
   trunk/lib/cover.py
   trunk/lib/db.py
   trunk/lib/dbupgrade.py
   trunk/lib/delete.py
   trunk/lib/edit.py
   trunk/lib/gconsole.py
   trunk/lib/gemail.py
   trunk/lib/gutils.py
   trunk/lib/initialize.py
   trunk/lib/loan.py
   trunk/lib/main_treeview.py
   trunk/lib/movie.py
   trunk/lib/people.py
   trunk/lib/plugins/export/PluginExportCSV.py
   trunk/lib/plugins/export/PluginExportHTML.py
   trunk/lib/plugins/export/PluginExportPDF.py
   trunk/lib/plugins/export/PluginExportXML.py
   trunk/lib/plugins/export/PluginExportiPod.py
   trunk/lib/plugins/imp/CSV.py
   trunk/lib/plugins/imp/__init__.py
   trunk/lib/plugins/movie/PluginMovie7arte.py
   trunk/lib/plugins/movie/PluginMovieAllocine.py
   trunk/lib/plugins/movie/PluginMovieAniDB.py
   trunk/lib/plugins/movie/PluginMovieCSFD.py
   trunk/lib/plugins/movie/PluginMovieCineMovies.py
   trunk/lib/plugins/movie/PluginMovieCinematografo.py
   trunk/lib/plugins/movie/PluginMovieCineteka.py
   trunk/lib/plugins/movie/PluginMovieCulturalia.py
   trunk/lib/plugins/movie/PluginMovieDVDEmpire.py
   trunk/lib/plugins/movie/PluginMovieDVDPalace.py
   trunk/lib/plugins/movie/PluginMovieE-Pipoca.py
   trunk/lib/plugins/movie/PluginMovieFDb.py
   trunk/lib/plugins/movie/PluginMovieFilmAffinity.py
   trunk/lib/plugins/movie/PluginMovieFilmDb.py
   trunk/lib/plugins/movie/PluginMovieFilmeVonAZ.py
   trunk/lib/plugins/movie/PluginMovieFilmtipset.py
   trunk/lib/plugins/movie/PluginMovieFilmweb.py
   trunk/lib/plugins/movie/PluginMovieIMDB-de.py
   trunk/lib/plugins/movie/PluginMovieIMDB-es.py
   trunk/lib/plugins/movie/PluginMovieIMDB.py
   trunk/lib/plugins/movie/PluginMovieKinoDe.py
   trunk/lib/plugins/movie/PluginMovieMediadis.py
   trunk/lib/plugins/movie/PluginMovieMoviefone.py
   trunk/lib/plugins/movie/PluginMovieOFDb.py
   trunk/lib/plugins/movie/PluginMovieOnet.py
   trunk/lib/plugins/movie/PluginMoviePTGate.py
   trunk/lib/plugins/movie/PluginMovieStopklatka.py
   trunk/lib/plugins/movie/PluginMovieTanukiAnime.py
   trunk/lib/plugins/movie/PluginMovieWP.py
   trunk/lib/plugins/movie/PluginMovieZelluloid.py
   trunk/lib/preferences.py
   trunk/lib/quick_filter.py
   trunk/lib/sql.py
   trunk/lib/test_movieplugins.py
   trunk/lib/update.py
   trunk/lib/version.py
   trunk/lib/view.py
   trunk/lib/widgets.py
Log:
Use unicode in gettext and SQLAlchemy


Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/ChangeLog	2008-08-02 09:20:49 UTC (rev 977)
@@ -5,6 +5,9 @@
 (c) 2005-2008  Vasco Nunes, Piotr O&#380;arowski
 
 
+2008-08-02  Piotr O&#380;arowski
+	* Use unicode in gettext and SQLAlchemy
+
 2008-07-31  Piotr O&#380;arowski
 	* Replace gdebug with Python's logging module
 	* Add posters table (to store posters in database)

Modified: trunk/griffith
===================================================================
--- trunk/griffith	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/griffith	2008-08-02 09:20:49 UTC (rev 977)
@@ -22,6 +22,9 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
+import gettext
+gettext.install('griffith', unicode=1)
+
 # set the PATH
 import sys, os.path
 lib = os.path.abspath(os.path.join(os.path.dirname(sys.argv[0]), 'lib'))
@@ -54,7 +57,6 @@
 # other imports
 import gtk, gtk.glade
 import add, config, gconsole, gutils, initialize, main_treeview, quick_filter, update
-from gettext import gettext as _
 import db
 
 class Griffith:

Modified: trunk/lib/about.py
===================================================================
--- trunk/lib/about.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/about.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gtk
 import version
 import os

Modified: trunk/lib/add.py
===================================================================
--- trunk/lib/add.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/add.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -23,7 +23,8 @@
 # GNU General Public License, version 2 or later
 
 from sqlalchemy.exceptions import IntegrityError
-from gettext               import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import os
 import gtk
@@ -307,25 +308,25 @@
     plot_buffer  = w['plot'].get_buffer()
     
     t_movies = {
-        'classification' : w['classification'].get_text(),
+        'classification' : w['classification'].get_text().decode('utf-8'),
         'color'          : w['color'].get_active(),
         'cond'           : w['condition'].get_active(),
-        'country'        : w['country'].get_text(),
-        'director'       : w['director'].get_text(),
-        'genre'          : w['genre'].get_text(),
-        'image'          : w['image'].get_text(),
+        'country'        : w['country'].get_text().decode('utf-8'),
+        'director'       : w['director'].get_text().decode('utf-8'),
+        'genre'          : w['genre'].get_text().decode('utf-8'),
+        'image'          : w['image'].get_text().decode('utf-8'),
         'layers'         : w['layers'].get_active(),
         'media_num'      : w['discs'].get_value(),
         'number'         : w['number'].get_value(),
-        'o_site'         : w['o_site'].get_text(),
-        'o_title'        : w['o_title'].get_text(),
+        'o_site'         : w['o_site'].get_text().decode('utf-8'),
+        'o_title'        : w['o_title'].get_text().decode('utf-8'),
         'rating'         : w['rating_slider'].get_value(),
         'region'         : w['region'].get_active(),
-        'runtime'        : w['runtime'].get_text(),
-        'site'           : w['site'].get_text(),
-        'studio'         : w['studio'].get_text(),
-        'title'          : w['title'].get_text(),
-        'trailer'        : w['trailer'].get_text(),
+        'runtime'        : w['runtime'].get_text().decode('utf-8'),
+        'site'           : w['site'].get_text().decode('utf-8'),
+        'studio'         : w['studio'].get_text().decode('utf-8'),
+        'title'          : w['title'].get_text().decode('utf-8'),
+        'trailer'        : w['trailer'].get_text().decode('utf-8'),
         'year'           : w['year'].get_value(),
         'collection_id'  : w['collection'].get_active(),
         'medium_id'      : w['media'].get_active(),

Modified: trunk/lib/backup.py
===================================================================
--- trunk/lib/backup.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/backup.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gtk
 import os.path
 import zipfile

Modified: trunk/lib/cover.py
===================================================================
--- trunk/lib/cover.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/cover.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -26,7 +26,8 @@
 import pango
 import string
 import sys
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from reportlab.pdfgen import canvas
 from reportlab.lib.pagesizes import letter, A4
 from reportlab.lib.units import mm

Modified: trunk/lib/db.py
===================================================================
--- trunk/lib/db.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/db.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -170,17 +170,17 @@
     Column('media_num', SmallInteger),
     Column('runtime', Integer),
     Column('year', Integer),
-    Column('o_title', VARCHAR(255)),
-    Column('title', VARCHAR(255)),
-    Column('director', VARCHAR(255)),
-    Column('o_site', VARCHAR(255)),
-    Column('site', VARCHAR(255)),
-    Column('trailer', VARCHAR(256)),
-    Column('country', VARCHAR(128)),
-    Column('genre', VARCHAR(128)),
-    Column('image', VARCHAR(128)), # TODO: VARCHAR(32) is enough for MD5, use after transition
-    Column('studio', VARCHAR(128)),
-    Column('classification', VARCHAR(128)),
+    Column('o_title', Unicode(255)),
+    Column('title', Unicode(255)),
+    Column('director', Unicode(255)),
+    Column('o_site', Unicode(255)),
+    Column('site', Unicode(255)),
+    Column('trailer', Unicode(256)),
+    Column('country', Unicode(128)),
+    Column('genre', Unicode(128)),
+    Column('image', Unicode(128)), # TODO: Unicode(32) is enough for MD5, use after transition
+    Column('studio', Unicode(128)),
+    Column('classification', Unicode(128)),
     Column('cast', TEXT),
     Column('plot', TEXT),
     Column('notes', TEXT))
@@ -196,47 +196,47 @@
 
 people_table = Table('people', metadata,
     Column('person_id', Integer, primary_key=True),
-    Column('name', VARCHAR(255), nullable=False, unique=True),
-    Column('email', VARCHAR(128)),
-    Column('phone', VARCHAR(64)))
+    Column('name', Unicode(255), nullable=False, unique=True),
+    Column('email', Unicode(128)),
+    Column('phone', Unicode(64)))
 
 volumes_table = Table('volumes', metadata,
     Column('volume_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True),
+    Column('name', Unicode(64), nullable=False, unique=True),
     Column('loaned', Boolean, nullable=False, default=False))
 
 collections_table = Table('collections', metadata,
     Column('collection_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True),
+    Column('name', Unicode(64), nullable=False, unique=True),
     Column('loaned', Boolean, nullable=False, default=False))
 
 media_table = Table('media', metadata,
     Column('medium_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 languages_table = Table('languages', metadata,
     Column('lang_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 vcodecs_table = Table('vcodecs', metadata,
     Column('vcodec_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 acodecs_table = Table('acodecs', metadata,
     Column('acodec_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 achannels_table = Table('achannels', metadata,
     Column('achannel_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 subformats_table = Table('subformats', metadata,
     Column('subformat_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 tags_table = Table('tags', metadata,
     Column('tag_id', Integer, primary_key=True),
-    Column('name', VARCHAR(64), nullable=False, unique=True))
+    Column('name', Unicode(64), nullable=False, unique=True))
 
 movie_lang_table = Table('movie_lang', metadata,
     Column('ml_id', Integer, primary_key=True),
@@ -253,11 +253,11 @@
     Column('tag_id', Integer, ForeignKey('tags.tag_id')))
 
 configuration_table = Table('configuration', metadata,
-    Column('param', VARCHAR(16), primary_key=True),
-    Column('value', VARCHAR(128), nullable=False))
+    Column('param', Unicode(16), primary_key=True),
+    Column('value', Unicode(128), nullable=False))
 
 posters_table = Table('posters', metadata,
-    Column('md5sum', VARCHAR(32), ForeignKey('movies.image'), primary_key=True),
+    Column('md5sum', Unicode(32), ForeignKey('movies.image'), primary_key=True),
     Column('data', BLOB, nullable=False))
 #}}}
 
@@ -342,7 +342,7 @@
     movie1 = sess2.query(Movie)[0]
     print movie1, movie1.title
     movie1_clone = sess.merge(movie1)
-    movie1_clone.title = 'cos'
+    movie1_clone.title = u'cos'
     sess.add(movie1_clone)
     sess.commit()
     for i in sess.query(Movie)[:3]:

Modified: trunk/lib/dbupgrade.py
===================================================================
--- trunk/lib/dbupgrade.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/dbupgrade.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from sqlalchemy import *
 import os.path
 import gutils
@@ -34,46 +35,46 @@
     b = self.session.bind
     if version == 0:
         db.metadata.create_all(b)
-        db.configuration_table.insert(bind=b).execute(param='version', value=self.version)
-        db.media_table.insert(bind=b).execute(name='DVD')
-        db.media_table.insert(bind=b).execute(name='DVD-R')
-        db.media_table.insert(bind=b).execute(name='DVD-RW')
-        db.media_table.insert(bind=b).execute(name='DVD+R')
-        db.media_table.insert(bind=b).execute(name='DVD+RW')
-        db.media_table.insert(bind=b).execute(name='DVD-RAM')
-        db.media_table.insert(bind=b).execute(name='CD')
-        db.media_table.insert(bind=b).execute(name='CD-RW')
-        db.media_table.insert(bind=b).execute(name='VCD')
-        db.media_table.insert(bind=b).execute(name='SVCD')
-        db.media_table.insert(bind=b).execute(name='VHS')
-        db.media_table.insert(bind=b).execute(name='BETACAM')
-        db.media_table.insert(bind=b).execute(name='LaserDisc')
-        db.acodecs_table.insert(bind=b).execute(name='AC-3 Dolby audio')
-        db.acodecs_table.insert(bind=b).execute(name='OGG')
-        db.acodecs_table.insert(bind=b).execute(name='MP3')
-        db.acodecs_table.insert(bind=b).execute(name='MPEG-1')
-        db.acodecs_table.insert(bind=b).execute(name='MPEG-2')
-        db.acodecs_table.insert(bind=b).execute(name='AAC')
-        db.acodecs_table.insert(bind=b).execute(name='Windows Media Audio')
-        db.vcodecs_table.insert(bind=b).execute(name='MPEG-1')
-        db.vcodecs_table.insert(bind=b).execute(name='MPEG-2')
-        db.vcodecs_table.insert(bind=b).execute(name='XviD')
-        db.vcodecs_table.insert(bind=b).execute(name='DivX')
-        db.vcodecs_table.insert(bind=b).execute(name='H.264')
-        db.vcodecs_table.insert(bind=b).execute(name='RealVideo')
-        db.vcodecs_table.insert(bind=b).execute(name='QuickTime')
-        db.vcodecs_table.insert(bind=b).execute(name='Windows Media Video')
-        db.achannels_table.insert(bind=b).execute(name='mono')
-        db.achannels_table.insert(bind=b).execute(name='stereo')
-        db.achannels_table.insert(bind=b).execute(name='5.1')
-        db.achannels_table.insert(bind=b).execute(name='7.1')
-        db.subformats_table.insert(bind=b).execute(name='DVD VOB')
-        db.subformats_table.insert(bind=b).execute(name='MPL2 (.txt)')
-        db.subformats_table.insert(bind=b).execute(name='MicroDVD (.sub)')
-        db.subformats_table.insert(bind=b).execute(name='SubRip (.srt)')
-        db.subformats_table.insert(bind=b).execute(name='SubViewer2 (.sub)')
-        db.subformats_table.insert(bind=b).execute(name='Sub Station Alpha (.ssa)')
-        db.subformats_table.insert(bind=b).execute(name='Advanced Sub Station Alpha (.ssa)')
+        db.configuration_table.insert(bind=b).execute(param=u'version', value=self.version)
+        db.media_table.insert(bind=b).execute(name=u'DVD')
+        db.media_table.insert(bind=b).execute(name=u'DVD-R')
+        db.media_table.insert(bind=b).execute(name=u'DVD-RW')
+        db.media_table.insert(bind=b).execute(name=u'DVD+R')
+        db.media_table.insert(bind=b).execute(name=u'DVD+RW')
+        db.media_table.insert(bind=b).execute(name=u'DVD-RAM')
+        db.media_table.insert(bind=b).execute(name=u'CD')
+        db.media_table.insert(bind=b).execute(name=u'CD-RW')
+        db.media_table.insert(bind=b).execute(name=u'VCD')
+        db.media_table.insert(bind=b).execute(name=u'SVCD')
+        db.media_table.insert(bind=b).execute(name=u'VHS')
+        db.media_table.insert(bind=b).execute(name=u'BETACAM')
+        db.media_table.insert(bind=b).execute(name=u'LaserDisc')
+        db.acodecs_table.insert(bind=b).execute(name=u'AC-3 Dolby audio')
+        db.acodecs_table.insert(bind=b).execute(name=u'OGG')
+        db.acodecs_table.insert(bind=b).execute(name=u'MP3')
+        db.acodecs_table.insert(bind=b).execute(name=u'MPEG-1')
+        db.acodecs_table.insert(bind=b).execute(name=u'MPEG-2')
+        db.acodecs_table.insert(bind=b).execute(name=u'AAC')
+        db.acodecs_table.insert(bind=b).execute(name=u'Windows Media Audio')
+        db.vcodecs_table.insert(bind=b).execute(name=u'MPEG-1')
+        db.vcodecs_table.insert(bind=b).execute(name=u'MPEG-2')
+        db.vcodecs_table.insert(bind=b).execute(name=u'XviD')
+        db.vcodecs_table.insert(bind=b).execute(name=u'DivX')
+        db.vcodecs_table.insert(bind=b).execute(name=u'H.264')
+        db.vcodecs_table.insert(bind=b).execute(name=u'RealVideo')
+        db.vcodecs_table.insert(bind=b).execute(name=u'QuickTime')
+        db.vcodecs_table.insert(bind=b).execute(name=u'Windows Media Video')
+        db.achannels_table.insert(bind=b).execute(name=u'mono')
+        db.achannels_table.insert(bind=b).execute(name=u'stereo')
+        db.achannels_table.insert(bind=b).execute(name=u'5.1')
+        db.achannels_table.insert(bind=b).execute(name=u'7.1')
+        db.subformats_table.insert(bind=b).execute(name=u'DVD VOB')
+        db.subformats_table.insert(bind=b).execute(name=u'MPL2 (.txt)')
+        db.subformats_table.insert(bind=b).execute(name=u'MicroDVD (.sub)')
+        db.subformats_table.insert(bind=b).execute(name=u'SubRip (.srt)')
+        db.subformats_table.insert(bind=b).execute(name=u'SubViewer2 (.sub)')
+        db.subformats_table.insert(bind=b).execute(name=u'Sub Station Alpha (.ssa)')
+        db.subformats_table.insert(bind=b).execute(name=u'Advanced Sub Station Alpha (.ssa)')
         db.languages_table.insert(bind=b).execute(name=_('Brazilian Portuguese'))
         db.languages_table.insert(bind=b).execute(name=_('Bulgarian'))
         db.languages_table.insert(bind=b).execute(name=_('Catalan'))

Modified: trunk/lib/delete.py
===================================================================
--- trunk/lib/delete.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/delete.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import os
 import db

Modified: trunk/lib/edit.py
===================================================================
--- trunk/lib/edit.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/edit.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -25,7 +25,8 @@
 import gtk
 import tempfile
 import shutil
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from PIL     import Image
 from urllib  import urlcleanup, FancyURLopener, urlretrieve
 import amazon

Modified: trunk/lib/gconsole.py
===================================================================
--- trunk/lib/gconsole.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/gconsole.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import getopt
 import sys
 import gutils

Modified: trunk/lib/gemail.py
===================================================================
--- trunk/lib/gemail.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/gemail.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -24,7 +24,8 @@
 import socket
 import smtplib
 import gutils
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 
 socket.setdefaulttimeout(10)
 

Modified: trunk/lib/gutils.py
===================================================================
--- trunk/lib/gutils.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/gutils.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import string
 import os
 try:

Modified: trunk/lib/initialize.py
===================================================================
--- trunk/lib/initialize.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/initialize.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -30,7 +30,8 @@
 import gettext
 import platform
 import re
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from locale import getdefaultlocale
 import logging
 log = logging.getLogger(&quot;Griffith&quot;)

Modified: trunk/lib/loan.py
===================================================================
--- trunk/lib/loan.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/loan.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import gtk
 import datetime

Modified: trunk/lib/main_treeview.py
===================================================================
--- trunk/lib/main_treeview.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/main_treeview.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -23,7 +23,8 @@
 
 from sqlalchemy import select, desc
 from sqlalchemy.sql.expression import Select
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import os
 import gtk

Modified: trunk/lib/movie.py
===================================================================
--- trunk/lib/movie.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/movie.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from urllib import *
 import sys
 import string

Modified: trunk/lib/people.py
===================================================================
--- trunk/lib/people.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/people.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import db
 import logging

Modified: trunk/lib/plugins/export/PluginExportCSV.py
===================================================================
--- trunk/lib/plugins/export/PluginExportCSV.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/export/PluginExportCSV.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -24,7 +24,8 @@
 import csv
 import gtk
 import os
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import db
 

Modified: trunk/lib/plugins/export/PluginExportHTML.py
===================================================================
--- trunk/lib/plugins/export/PluginExportHTML.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/export/PluginExportHTML.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -30,7 +30,8 @@
 import version
 import math
 from xml.dom import minidom
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import logging
 log = logging.getLogger(&quot;Griffith&quot;)
 import db

Modified: trunk/lib/plugins/export/PluginExportPDF.py
===================================================================
--- trunk/lib/plugins/export/PluginExportPDF.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/export/PluginExportPDF.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from reportlab.pdfgen import canvas
 from reportlab.lib.pagesizes import letter, A4
 from reportlab.lib.units import mm, inch

Modified: trunk/lib/plugins/export/PluginExportXML.py
===================================================================
--- trunk/lib/plugins/export/PluginExportXML.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/export/PluginExportXML.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -25,7 +25,8 @@
 import xml.dom.ext
 import gtk
 import os
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import db
 import gutils
 

Modified: trunk/lib/plugins/export/PluginExportiPod.py
===================================================================
--- trunk/lib/plugins/export/PluginExportiPod.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/export/PluginExportiPod.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -30,7 +30,8 @@
 import platform
 import shutil
 from tempfile import mkdtemp
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import db
 
 plugin_name = &quot;iPod&quot;

Modified: trunk/lib/plugins/imp/CSV.py
===================================================================
--- trunk/lib/plugins/imp/CSV.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/imp/CSV.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -10,7 +10,8 @@
 #
 ###########################################################################
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 from plugins.imp import ImportPlugin as IP
 import gtk
 import gtk.glade

Modified: trunk/lib/plugins/imp/__init__.py
===================================================================
--- trunk/lib/plugins/imp/__init__.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/imp/__init__.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -23,7 +23,8 @@
 
 # detect all plugins:
 import glob, os.path
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 
 __all__ = [os.path.basename(x)[:-3] for x in glob.glob(&quot;%s/*.py&quot; % os.path.dirname(__file__))]
 __all__.remove('__init__')

Modified: trunk/lib/plugins/movie/PluginMovie7arte.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovie7arte.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovie7arte.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieAllocine.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieAllocine.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieAllocine.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieAniDB.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieAniDB.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieAniDB.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie
 import string, re
 from gutils import decompress

Modified: trunk/lib/plugins/movie/PluginMovieCSFD.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieCSFD.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieCSFD.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -19,7 +19,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 import re

Modified: trunk/lib/plugins/movie/PluginMovieCineMovies.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieCineMovies.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieCineMovies.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 

Modified: trunk/lib/plugins/movie/PluginMovieCinematografo.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieCinematografo.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieCinematografo.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie, string
 
 plugin_name = &quot;Cinematografo&quot;

Modified: trunk/lib/plugins/movie/PluginMovieCineteka.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieCineteka.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieCineteka.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieCulturalia.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieCulturalia.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieCulturalia.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieDVDEmpire.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieDVDEmpire.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieDVDEmpire.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import re

Modified: trunk/lib/plugins/movie/PluginMovieDVDPalace.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieDVDPalace.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieDVDPalace.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieE-Pipoca.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieE-Pipoca.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieE-Pipoca.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -25,7 +25,8 @@
 # <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">joe1310 at terra.com.br</A> - S&#227;o Paulo/Brasil
 
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie, string
 
 plugin_name = &quot;E-Pipoca&quot;

Modified: trunk/lib/plugins/movie/PluginMovieFDb.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieFDb.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieFDb.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieFilmAffinity.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieFilmAffinity.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieFilmAffinity.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieFilmDb.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieFilmDb.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieFilmDb.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieFilmeVonAZ.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieFilmeVonAZ.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieFilmeVonAZ.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieFilmtipset.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieFilmtipset.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieFilmtipset.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieFilmweb.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieFilmweb.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieFilmweb.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie
 import re,string
 

Modified: trunk/lib/plugins/movie/PluginMovieIMDB-de.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieIMDB-de.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieIMDB-de.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie
 import string, re
 

Modified: trunk/lib/plugins/movie/PluginMovieIMDB-es.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieIMDB-es.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieIMDB-es.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieIMDB.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieIMDB.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieIMDB.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie
 import string, re
 

Modified: trunk/lib/plugins/movie/PluginMovieKinoDe.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieKinoDe.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieKinoDe.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieMediadis.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieMediadis.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieMediadis.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -6,7 +6,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 

Modified: trunk/lib/plugins/movie/PluginMovieMoviefone.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieMoviefone.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieMoviefone.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -6,7 +6,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 

Modified: trunk/lib/plugins/movie/PluginMovieOFDb.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieOFDb.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieOFDb.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -7,7 +7,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string,re
 

Modified: trunk/lib/plugins/movie/PluginMovieOnet.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieOnet.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieOnet.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 

Modified: trunk/lib/plugins/movie/PluginMoviePTGate.py
===================================================================
--- trunk/lib/plugins/movie/PluginMoviePTGate.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMoviePTGate.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/plugins/movie/PluginMovieStopklatka.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieStopklatka.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieStopklatka.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils, movie
 import string, re
 

Modified: trunk/lib/plugins/movie/PluginMovieTanukiAnime.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieTanukiAnime.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieTanukiAnime.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 

Modified: trunk/lib/plugins/movie/PluginMovieWP.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieWP.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieWP.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie,string
 import re

Modified: trunk/lib/plugins/movie/PluginMovieZelluloid.py
===================================================================
--- trunk/lib/plugins/movie/PluginMovieZelluloid.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/plugins/movie/PluginMovieZelluloid.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import movie
 import string

Modified: trunk/lib/preferences.py
===================================================================
--- trunk/lib/preferences.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/preferences.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import os
 import socket
 import logging

Modified: trunk/lib/quick_filter.py
===================================================================
--- trunk/lib/quick_filter.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/quick_filter.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import db
 

Modified: trunk/lib/sql.py
===================================================================
--- trunk/lib/sql.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/sql.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -26,7 +26,8 @@
 #from sqlalchemy            import *
 from sqlalchemy.orm        import sessionmaker
 from sqlalchemy.exceptions import SQLError
-from gettext               import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import logging
 log = logging.getLogger(&quot;Griffith&quot;)
 import os.path
@@ -123,7 +124,7 @@
         
         # check if database needs an upgrade
         try:
-            v = self.session.query(Configuration).filter_by(param='version').one()    # returns None if table exists &amp;&amp; param ISNULL
+            v = self.session.query(Configuration).filter_by(param=u'version').one()    # returns None if table exists &amp;&amp; param ISNULL
         except SQLError, e:    # table doesn't exist
             log.info(&quot;DB version: %s&quot; % e)
             v = 0

Modified: trunk/lib/test_movieplugins.py
===================================================================
--- trunk/lib/test_movieplugins.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/test_movieplugins.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -42,7 +42,6 @@
 
 import sys
 import initialize
-import gdebug
 import gutils
 try:
     import gtk
@@ -209,8 +208,6 @@
     # and executes the Plugin and SearchPlugin test methods
     #
     def do_test(self, domsgbox=True):
-        global debug
-        debug = self.debug = gdebug.GriffithDebug()
         self._tmp_home = None
         initialize.locations(self)
         search_successful = ''

Modified: trunk/lib/update.py
===================================================================
--- trunk/lib/update.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/update.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gutils
 import os
 import db

Modified: trunk/lib/version.py
===================================================================
--- trunk/lib/version.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/version.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 pname        = &quot;Griffith&quot;
 pversion     = &quot;0.10~svn&quot;
 pauthor      = &quot;Vasco Nunes, Piotr O&#380;arowski &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">griffith-private at lists.berlios.de</A>&gt;&quot;

Modified: trunk/lib/view.py
===================================================================
--- trunk/lib/view.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/view.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 
 def filter_not_seen(self):
     self.populate_treeview()

Modified: trunk/lib/widgets.py
===================================================================
--- trunk/lib/widgets.py	2008-07-31 22:44:52 UTC (rev 976)
+++ trunk/lib/widgets.py	2008-08-02 09:20:49 UTC (rev 977)
@@ -21,7 +21,8 @@
 # You may use and distribute this software under the terms of the
 # GNU General Public License, version 2 or later
 
-from gettext import gettext as _
+import gettext
+gettext.install('griffith', unicode=1)
 import gtk
 import sys
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000459.html">[Griffith-svn] r976 - in trunk: . lib lib/plugins/export	lib/plugins/imp
</A></li>
	<LI>Next message: <A HREF="000461.html">[Griffith-svn] r978 - in trunk: . lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#460">[ date ]</a>
              <a href="thread.html#460">[ thread ]</a>
              <a href="subject.html#460">[ subject ]</a>
              <a href="author.html#460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/griffith-svn">More information about the Griffith-svn
mailing list</a><br>
</body></html>
