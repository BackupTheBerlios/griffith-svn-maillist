<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Griffith-svn] r852 - in trunk: . export_templates/csv	export_templates/html_table export_templates/html_tables	export_templates/latex export_templates/xml lib/plugins/export
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/griffith-svn/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r852%20-%20in%20trunk%3A%20.%20export_templates/csv%0A%09export_templates/html_table%20export_templates/html_tables%0A%09export_templates/latex%20export_templates/xml%20lib/plugins/export&In-Reply-To=%3C200709021809.l82I9gjd019974%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000360.html">
   <LINK REL="Next"  HREF="000361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Griffith-svn] r852 - in trunk: . export_templates/csv	export_templates/html_table export_templates/html_tables	export_templates/latex export_templates/xml lib/plugins/export</H1>
    <B>mikej06 at mail.berlios.de</B> 
    <A HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r852%20-%20in%20trunk%3A%20.%20export_templates/csv%0A%09export_templates/html_table%20export_templates/html_tables%0A%09export_templates/latex%20export_templates/xml%20lib/plugins/export&In-Reply-To=%3C200709021809.l82I9gjd019974%40sheep.berlios.de%3E"
       TITLE="[Griffith-svn] r852 - in trunk: . export_templates/csv	export_templates/html_table export_templates/html_tables	export_templates/latex export_templates/xml lib/plugins/export">mikej06 at mail.berlios.de
       </A><BR>
    <I>Sun Sep  2 20:09:42 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000360.html">[Griffith-svn] r851 - in trunk: . lib
</A></li>
        <LI>Next message: <A HREF="000361.html">[Griffith-svn] r853 - trunk/lib/plugins/export
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#359">[ date ]</a>
              <a href="thread.html#359">[ thread ]</a>
              <a href="subject.html#359">[ subject ]</a>
              <a href="author.html#359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mikej06
Date: 2007-09-02 20:08:57 +0200 (Sun, 02 Sep 2007)
New Revision: 852

Modified:
   trunk/ChangeLog
   trunk/export_templates/csv/page.tpl
   trunk/export_templates/html_table/page.tpl
   trunk/export_templates/html_tables/page.tpl
   trunk/export_templates/latex/page.tpl
   trunk/export_templates/xml/page.tpl
   trunk/lib/plugins/export/PluginExportHTML.py
Log:
added support for media type, collection and volume in HTML export plugin

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/ChangeLog	2007-09-02 18:08:57 UTC (rev 852)
@@ -5,6 +5,7 @@
 (c) 2005-2007  Vasco Nunes, Piotr O&#380;arowski
 
 2007-09-02  Michael Jahn
+	* added support for media type, collection and volume in HTML export plugin
 	* added &quot;auto-fixing&quot; of config file values for defaults section
 
 2007-09-01  Piotr O&#380;arowski

Modified: trunk/export_templates/csv/page.tpl
===================================================================
--- trunk/export_templates/csv/page.tpl	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/export_templates/csv/page.tpl	2007-09-02 18:08:57 UTC (rev 852)
@@ -1,3 +1,3 @@
-&quot;ID&quot;&lt;@image&gt;,&quot;@TITLE@&quot;&lt;/@image&gt;&lt;@title&gt;,&quot;@TITLE@&quot;&lt;/@title&gt;&lt;@o_title&gt;,&quot;@TITLE@&quot;&lt;/@o_title&gt;&lt;@number&gt;,&quot;@TITLE@&quot;&lt;/@number&gt;&lt;@year&gt;,&quot;@TITLE@&quot;&lt;/@year&gt;&lt;@director&gt;,&quot;@TITLE@&quot;&lt;/@director&gt;&lt;@rating&gt;,&quot;@TITLE@&quot;&lt;/@rating&gt;&lt;@runtime&gt;,&quot;@TITLE@&quot;&lt;/@runtime&gt;&lt;@country&gt;,&quot;@TITLE@&quot;&lt;/@country&gt;&lt;@genre&gt;,&quot;@TITLE@&quot;&lt;/@genre&gt;&lt;@site&gt;,&quot;@TITLE@&quot;&lt;/@site&gt;&lt;@o_site&gt;,&quot;@TITLE@&quot;&lt;/@o_site&gt;&lt;@trailer&gt;,&quot;@TITLE@&quot;&lt;/@trailer&gt;&lt;@media_num&gt;,&quot;@TITLE@&quot;&lt;/@media_num&gt;&lt;@seen&gt;,&quot;@TITLE@&quot;&lt;/@seen&gt;&lt;@loaned&gt;,&quot;@TITLE@&quot;&lt;/@loaned&gt;&lt;@classification&gt;,&quot;@TITLE@&quot;&lt;/@classification&gt;&lt;@studio&gt;,&quot;@TITLE@&quot;&lt;/@studio&gt;&lt;@cast&gt;,&quot;@TITLE@&quot;&lt;/@cast&gt;&lt;@plot&gt;,&quot;@TITLE@&quot;&lt;/@plot&gt;&lt;@notes&gt;,&quot;@TITLE@&quot;&lt;/@notes&gt;
-&lt;!-- ITEMS --&gt;&lt;@item&gt;&quot;@DATA@&quot;&lt;/@item&gt;&lt;@image&gt;&lt;@item&gt;,&lt;/@item&gt;&quot;@DATA@&quot;&lt;/@image&gt;&lt;@title&gt;,&quot;@DATA@&quot;&lt;/@title&gt;&lt;@o_title&gt;,&quot;@DATA@&quot;&lt;/@o_title&gt;&lt;@number&gt;,&quot;@DATA@&quot;&lt;/@number&gt;&lt;@year&gt;,&quot;@DATA@&quot;&lt;/@year&gt;&lt;@director&gt;,&quot;@DATA@&quot;&lt;/@director&gt;&lt;@rating&gt;,&quot;@DATA@&quot;&lt;/@rating&gt;&lt;@runtime&gt;,&quot;@DATA@&quot;&lt;/@runtime&gt;&lt;@country&gt;,&quot;@DATA@&quot;&lt;/@country&gt;&lt;@genre&gt;,&quot;@DATA@&quot;&lt;/@genre&gt;&lt;@site&gt;,&quot;@DATA@&quot;&lt;/@site&gt;&lt;@o_site&gt;,&quot;@DATA@&quot;&lt;/@o_site&gt;&lt;@trailer&gt;,&quot;@DATA@&quot;&lt;/@trailer&gt;&lt;@media_num&gt;,&quot;@DATA@&quot;&lt;/@media_num&gt;&lt;@seen&gt;,&quot;@DATA@&quot;&lt;/@seen&gt;&lt;@loaned&gt;,&quot;@DATA@&quot;&lt;/@loaned&gt;&lt;@classification&gt;,&quot;@DATA@&quot;&lt;/@classification&gt;&lt;@studio&gt;,&quot;@DATA@&quot;&lt;/@studio&gt;&lt;@cast&gt;,&quot;@DATA@&quot;&lt;/@cast&gt;&lt;@plot&gt;,&quot;@DATA@&quot;&lt;/@plot&gt;&lt;@notes&gt;,&quot;@DATA@&quot;&lt;/@notes&gt;
+&quot;ID&quot;&lt;@movies_image&gt;,&quot;@TITLE@&quot;&lt;/@movies_image&gt;&lt;@movies_title&gt;,&quot;@TITLE@&quot;&lt;/@movies_title&gt;&lt;@movies_o_title&gt;,&quot;@TITLE@&quot;&lt;/@movies_o_title&gt;&lt;@movies_number&gt;,&quot;@TITLE@&quot;&lt;/@movies_number&gt;&lt;@movies_year&gt;,&quot;@TITLE@&quot;&lt;/@movies_year&gt;&lt;@movies_director&gt;,&quot;@TITLE@&quot;&lt;/@movies_director&gt;&lt;@movies_rating&gt;,&quot;@TITLE@&quot;&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;,&quot;@TITLE@&quot;&lt;/@movies_runtime&gt;&lt;@movies_country&gt;,&quot;@TITLE@&quot;&lt;/@movies_country&gt;&lt;@movies_genre&gt;,&quot;@TITLE@&quot;&lt;/@movies_genre&gt;&lt;@movies_site&gt;,&quot;@TITLE@&quot;&lt;/@movies_site&gt;&lt;@movies_o_site&gt;,&quot;@TITLE@&quot;&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;,&quot;@TITLE@&quot;&lt;/@movies_trailer&gt;&lt;@movies_media_num&gt;,&quot;@TITLE@&quot;&lt;/@movies_media_num&gt;&lt;@movies_seen&gt;,&quot;@TITLE@&quot;&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;,&quot;@TITLE@&quot;&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;,&quot;@TITLE@&quot;&lt;/@movies_classification&gt;&lt;@movies_studio&gt;,&quot;@TITLE@&quot;&lt;/@movies_studio&gt;&lt;@movies_cast&gt;,&quot;@TITLE@&quot;&lt;/@movies_cast&gt;&lt;@movies_plot&gt;,&quot;@TITLE@&quot;&lt;/@movies_plot&gt;&lt;@movies_notes&gt;,&quot;@TITLE@&quot;&lt;/@movies_notes&gt;
+&lt;!-- ITEMS --&gt;&lt;@item&gt;&quot;@DATA@&quot;&lt;/@item&gt;&lt;@movies_image&gt;&lt;@item&gt;,&lt;/@item&gt;&quot;@DATA@&quot;&lt;/@movies_image&gt;&lt;@movies_title&gt;,&quot;@DATA@&quot;&lt;/@movies_title&gt;&lt;@movies_o_title&gt;,&quot;@DATA@&quot;&lt;/@movies_o_title&gt;&lt;@movies_number&gt;,&quot;@DATA@&quot;&lt;/@movies_number&gt;&lt;@movies_year&gt;,&quot;@DATA@&quot;&lt;/@movies_year&gt;&lt;@movies_director&gt;,&quot;@DATA@&quot;&lt;/@movies_director&gt;&lt;@movies_rating&gt;,&quot;@DATA@&quot;&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;,&quot;@DATA@&quot;&lt;/@movies_runtime&gt;&lt;@movies_country&gt;,&quot;@DATA@&quot;&lt;/@movies_country&gt;&lt;@movies_genre&gt;,&quot;@DATA@&quot;&lt;/@movies_genre&gt;&lt;@movies_site&gt;,&quot;@DATA@&quot;&lt;/@movies_site&gt;&lt;@movies_o_site&gt;,&quot;@DATA@&quot;&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;,&quot;@DATA@&quot;&lt;/@movies_trailer&gt;&lt;@movies_media_num&gt;,&quot;@DATA@&quot;&lt;/@movies_media_num&gt;&lt;@movies_seen&gt;,&quot;@DATA@&quot;&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;,&quot;@DATA@&quot;&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;,&quot;@DATA@&quot;&lt;/@movies_classification&gt;&lt;@movies_studio&gt;,&quot;@DATA@&quot;&lt;/@movies_studio&gt;&lt;@movies_cast&gt;,&quot;@DATA@&quot;&lt;/@movies_cast&gt;&lt;@movies_plot&gt;,&quot;@DATA@&quot;&lt;/@movies_plot&gt;&lt;@movies_notes&gt;,&quot;@DATA@&quot;&lt;/@movies_notes&gt;
 &lt;!-- /ITEMS --&gt;

Modified: trunk/export_templates/html_table/page.tpl
===================================================================
--- trunk/export_templates/html_table/page.tpl	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/export_templates/html_table/page.tpl	2007-09-02 18:08:57 UTC (rev 852)
@@ -12,54 +12,60 @@
 
 &lt;table&gt;
 	&lt;thead&gt;
-		&lt;tr&gt;&lt;@image&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@image&gt;&lt;@number&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@number&gt;&lt;@title&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@title&gt;&lt;@o_title&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@o_title&gt;&lt;@year&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@year&gt;&lt;@director&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@director&gt;&lt;@rating&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@rating&gt;&lt;@runtime&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@runtime&gt;&lt;@country&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@country&gt;&lt;@genre&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@genre&gt;&lt;@site&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@site&gt;&lt;@o_site&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@o_site&gt;&lt;@trailer&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@trailer&gt;&lt;@media_num&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@media_num&gt;&lt;@seen&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@seen&gt;&lt;@loaned&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@loaned&gt;&lt;@classification&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@classification&gt;&lt;@studio&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@studio&gt;&lt;@cast&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@cast&gt;&lt;@plot&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@plot&gt;&lt;@notes&gt;
-			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@notes&gt;
+		&lt;tr&gt;&lt;@movies_image&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_image&gt;&lt;@movies_number&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_number&gt;&lt;@movies_title&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_title&gt;&lt;@movies_o_title&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_o_title&gt;&lt;@movies_year&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_year&gt;&lt;@movies_director&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_director&gt;&lt;@movies_rating&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_runtime&gt;&lt;@movies_country&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_country&gt;&lt;@movies_genre&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_genre&gt;&lt;@movies_site&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_site&gt;&lt;@movies_o_site&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_trailer&gt;&lt;@media_name&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@media_name&gt;&lt;@movies_media_num&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_media_num&gt;&lt;@collections_name&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@collections_name&gt;&lt;@volumes_name&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@volumes_name&gt;&lt;@movies_seen&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_classification&gt;&lt;@movies_studio&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_studio&gt;&lt;@movies_cast&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_cast&gt;&lt;@movies_plot&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_plot&gt;&lt;@movies_notes&gt;
+			&lt;th&gt;@TITLE@&lt;/th&gt;&lt;/@movies_notes&gt;
 		&lt;/tr&gt;
 	&lt;/thead&gt;
 
 &lt;!-- ITEMS --&gt;
-	&lt;tr&lt;@id&gt; id=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">i at DATA</A>@&quot;&lt;/@id&gt;&gt;&lt;@image&gt;
-		&lt;td class=&quot;image&quot;&gt;&lt;img src=&quot;./posters/@DATA@&quot; alt=&quot;poster&quot; /&gt;&lt;/td&gt;&lt;/@image&gt;&lt;@number&gt;
-		&lt;td class=&quot;number&quot;&gt;@DATA@&lt;/td&gt;&lt;/@number&gt;&lt;@title&gt;
-		&lt;td class=&quot;title&quot;&gt;@DATA@&lt;/td&gt;&lt;/@title&gt;&lt;@o_title&gt;
-		&lt;td class=&quot;otitle&quot;&gt;@DATA@&lt;/td&gt;&lt;/@o_title&gt;&lt;@year&gt;
-		&lt;td class=&quot;year&quot;&gt;@DATA@&lt;/td&gt;&lt;/@year&gt;&lt;@director&gt;
-		&lt;td class=&quot;director&quot;&gt;@DATA@&lt;/td&gt;&lt;/@director&gt;&lt;@rating&gt;
-		&lt;td class=&quot;rating&quot;&gt;@DATA@&lt;/td&gt;&lt;/@rating&gt;&lt;@runtime&gt;
-		&lt;td class=&quot;runtime&quot;&gt;@DATA@&lt;/td&gt;&lt;/@runtime&gt;&lt;@country&gt;
-		&lt;td class=&quot;country&quot;&gt;@DATA@&lt;/td&gt;&lt;/@country&gt;&lt;@genre&gt;
-		&lt;td class=&quot;genre&quot;&gt;@DATA@&lt;/td&gt;&lt;/@genre&gt;&lt;@site&gt;
-		&lt;td class=&quot;links&quot;&gt;&lt;a href=&quot;@DATA@&quot;&gt;link&lt;/a&gt;&lt;/td&gt;&lt;/@site&gt;&lt;@o_site&gt;
-		&lt;td class=&quot;links&quot;&gt;&lt;a href=&quot;@DATA@&quot;&gt;link&lt;/a&gt;&lt;/td&gt;&lt;/@o_site&gt;&lt;@trailer&gt;
-		&lt;td class=&quot;links&quot;&gt;&lt;a href=&quot;@DATA@&quot;&gt;link&lt;/a&gt;&lt;/td&gt;&lt;/@trailer&gt;&lt;@media_num&gt;
-		&lt;td class=&quot;media&quot;&gt;@DATA@&lt;/td&gt;&lt;/@media_num&gt;&lt;@seen&gt;
-		&lt;td class=&quot;seen&quot;&gt;@DATA@&lt;/td&gt;&lt;/@seen&gt;&lt;@loaned&gt;
-		&lt;td class=&quot;loaned&quot;&gt;@DATA@&lt;/td&gt;&lt;/@loaned&gt;&lt;@classification&gt;
-		&lt;td class=&quot;classification&quot;&gt;@DATA@&lt;/td&gt;&lt;/@classification&gt;&lt;@studio&gt;
-		&lt;td class=&quot;studio&quot;&gt;@DATA@&lt;/td&gt;&lt;/@studio&gt;&lt;@cast&gt;
-		&lt;td class=&quot;cast&quot;&gt;@DATA@&lt;/td&gt;&lt;/@cast&gt;&lt;@plot&gt;
-		&lt;td class=&quot;plot&quot;&gt;@DATA@&lt;/td&gt;&lt;/@plot&gt;&lt;@notes&gt;
-		&lt;td class=&quot;notes&quot;&gt;@DATA@&lt;/td&gt;&lt;/@notes&gt;
+	&lt;tr&lt;@id&gt; id=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">i at DATA</A>@&quot;&lt;/@id&gt;&gt;&lt;@movies_image&gt;
+		&lt;td class=&quot;image&quot;&gt;&lt;img src=&quot;./posters/@DATA@&quot; alt=&quot;poster&quot; /&gt;&lt;/td&gt;&lt;/@movies_image&gt;&lt;@movies_number&gt;
+		&lt;td class=&quot;number&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_number&gt;&lt;@movies_title&gt;
+		&lt;td class=&quot;title&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_title&gt;&lt;@movies_o_title&gt;
+		&lt;td class=&quot;otitle&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_o_title&gt;&lt;@movies_year&gt;
+		&lt;td class=&quot;year&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_year&gt;&lt;@movies_director&gt;
+		&lt;td class=&quot;director&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_director&gt;&lt;@movies_rating&gt;
+		&lt;td class=&quot;rating&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;
+		&lt;td class=&quot;runtime&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_runtime&gt;&lt;@movies_country&gt;
+		&lt;td class=&quot;country&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_country&gt;&lt;@movies_genre&gt;
+		&lt;td class=&quot;genre&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_genre&gt;&lt;@movies_site&gt;
+		&lt;td class=&quot;links&quot;&gt;&lt;a href=&quot;@DATA@&quot;&gt;link&lt;/a&gt;&lt;/td&gt;&lt;/@movies_site&gt;&lt;@movies_o_site&gt;
+		&lt;td class=&quot;links&quot;&gt;&lt;a href=&quot;@DATA@&quot;&gt;link&lt;/a&gt;&lt;/td&gt;&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;
+		&lt;td class=&quot;links&quot;&gt;&lt;a href=&quot;@DATA@&quot;&gt;link&lt;/a&gt;&lt;/td&gt;&lt;/@movies_trailer&gt;&lt;@media_name&gt;
+		&lt;td class=&quot;media&quot;&gt;@DATA@&lt;/td&gt;&lt;/@media_name&gt;&lt;@movies_media_num&gt;
+		&lt;td class=&quot;media&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_media_num&gt;&lt;@collections_name&gt;
+		&lt;td class=&quot;media&quot;&gt;@DATA@&lt;/td&gt;&lt;/@collections_name&gt;&lt;@volumes_name&gt;
+		&lt;td class=&quot;media&quot;&gt;@DATA@&lt;/td&gt;&lt;/@volumes_name&gt;&lt;@movies_seen&gt;
+		&lt;td class=&quot;seen&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;
+		&lt;td class=&quot;loaned&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;
+		&lt;td class=&quot;classification&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_classification&gt;&lt;@movies_studio&gt;
+		&lt;td class=&quot;studio&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_studio&gt;&lt;@movies_cast&gt;
+		&lt;td class=&quot;cast&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_cast&gt;&lt;@movies_plot&gt;
+		&lt;td class=&quot;plot&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_plot&gt;&lt;@movies_notes&gt;
+		&lt;td class=&quot;notes&quot;&gt;@DATA@&lt;/td&gt;&lt;/@movies_notes&gt;
 	&lt;/tr&gt;
 &lt;!-- /ITEMS --&gt;
 

Modified: trunk/export_templates/html_tables/page.tpl
===================================================================
--- trunk/export_templates/html_tables/page.tpl	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/export_templates/html_tables/page.tpl	2007-09-02 18:08:57 UTC (rev 852)
@@ -11,92 +11,104 @@
 &lt;@header&gt;&lt;h1&gt;@DATA@&lt;/h1&gt;&lt;/@header&gt;
 
 &lt;!-- ITEMS --&gt;
-&lt;table&lt;@id&gt; id=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">i at DATA</A>@&quot;&lt;/@id&gt;&gt;&lt;@image&gt;
+&lt;table&lt;@id&gt; id=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">i at DATA</A>@&quot;&lt;/@id&gt;&gt;&lt;@movies_image&gt;
 	&lt;tr class=&quot;image&quot;&gt;
 		&lt;td&lt;@rowspan&gt; rowspan=&quot;@DATA@&quot;&lt;/@rowspan&gt;&gt;
 			&lt;img src=&quot;./posters/@DATA@&quot; alt=&quot;@TITLE@&quot; /&gt;
 		&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@image&gt;&lt;@title&gt;
+	&lt;/tr&gt;&lt;/@movies_image&gt;&lt;@movies_title&gt;
 	&lt;tr class=&quot;title&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@title&gt;&lt;@o_title&gt;
+	&lt;/tr&gt;&lt;/@movies_title&gt;&lt;@movies_o_title&gt;
 	&lt;tr class=&quot;otitle&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@o_title&gt;&lt;@number&gt;
+	&lt;/tr&gt;&lt;/@movies_o_title&gt;&lt;@movies_number&gt;
 	&lt;tr class=&quot;number&quot;&gt;		
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@number&gt;&lt;@year&gt;
+	&lt;/tr&gt;&lt;/@movies_number&gt;&lt;@movies_year&gt;
 	&lt;tr class=&quot;year&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@year&gt;&lt;@director&gt;
+	&lt;/tr&gt;&lt;/@movies_year&gt;&lt;@movies_director&gt;
 	&lt;tr class=&quot;director&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@director&gt;&lt;@rating&gt;
+	&lt;/tr&gt;&lt;/@movies_director&gt;&lt;@movies_rating&gt;
 	&lt;tr class=&quot;rating&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@rating&gt;&lt;@runtime&gt;
+	&lt;/tr&gt;&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;
 	&lt;tr class=&quot;runtime&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@runtime&gt;&lt;@country&gt;
+	&lt;/tr&gt;&lt;/@movies_runtime&gt;&lt;@movies_country&gt;
 	&lt;tr class=&quot;country&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@country&gt;&lt;@genre&gt;
+	&lt;/tr&gt;&lt;/@movies_country&gt;&lt;@movies_genre&gt;
 	&lt;tr class=&quot;genre&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@genre&gt;&lt;@site&gt;
+	&lt;/tr&gt;&lt;/@movies_genre&gt;&lt;@movies_site&gt;
 	&lt;tr class=&quot;links&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;&lt;a href=&quot;@DATA@&quot;&gt;@DATA@&lt;/a&gt;&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@site&gt;&lt;@o_site&gt;
+	&lt;/tr&gt;&lt;/@movies_site&gt;&lt;@movies_o_site&gt;
 	&lt;tr class=&quot;links&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;&lt;a href=&quot;@DATA@&quot;&gt;@DATA@&lt;/a&gt;&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@o_site&gt;&lt;@trailer&gt;
+	&lt;/tr&gt;&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;
 	&lt;tr class=&quot;links&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;&lt;a href=&quot;@DATA@&quot;&gt;@DATA@&lt;/a&gt;&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@trailer&gt;&lt;@media_num&gt;
+	&lt;/tr&gt;&lt;/@movies_trailer&gt;&lt;@media_name&gt;
 	&lt;tr class=&quot;media&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@media_num&gt;&lt;@seen&gt;
+	&lt;/tr&gt;&lt;/@media_name&gt;&lt;@movies_media_num&gt;
+	&lt;tr class=&quot;media&quot;&gt;
+		&lt;th&gt;@TITLE@&lt;/th&gt;
+		&lt;td&gt;@DATA@&lt;/td&gt;
+	&lt;/tr&gt;&lt;/@movies_media_num&gt;&lt;@collections_name&gt;
+	&lt;tr class=&quot;collection&quot;&gt;
+		&lt;th&gt;@TITLE@&lt;/th&gt;
+		&lt;td&gt;@DATA@&lt;/td&gt;
+	&lt;/tr&gt;&lt;/@collections_name&gt;&lt;@volumes_name&gt;
+	&lt;tr class=&quot;volume&quot;&gt;
+		&lt;th&gt;@TITLE@&lt;/th&gt;
+		&lt;td&gt;@DATA@&lt;/td&gt;
+	&lt;/tr&gt;&lt;/@volumes_name&gt;&lt;@movies_seen&gt;
 	&lt;tr class=&quot;seen&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@seen&gt;&lt;@loaned&gt;
+	&lt;/tr&gt;&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;
 	&lt;tr class=&quot;loaned&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@loaned&gt;&lt;@classification&gt;
+	&lt;/tr&gt;&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;
 	&lt;tr class=&quot;classification&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@classification&gt;&lt;@studio&gt;
+	&lt;/tr&gt;&lt;/@movies_classification&gt;&lt;@movies_studio&gt;
 	&lt;tr class=&quot;studio&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@studio&gt;&lt;@cast&gt;
+	&lt;/tr&gt;&lt;/@movies_studio&gt;&lt;@movies_cast&gt;
 	&lt;tr class=&quot;cast&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@cast&gt;&lt;@plot&gt;
+	&lt;/tr&gt;&lt;/@movies_cast&gt;&lt;@movies_plot&gt;
 	&lt;tr class=&quot;plot&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@plot&gt;&lt;@notes&gt;
+	&lt;/tr&gt;&lt;/@movies_plot&gt;&lt;@movies_notes&gt;
 	&lt;tr class=&quot;notes&quot;&gt;
 		&lt;th&gt;@TITLE@&lt;/th&gt;
 		&lt;td&gt;@DATA@&lt;/td&gt;
-	&lt;/tr&gt;&lt;/@notes&gt;
+	&lt;/tr&gt;&lt;/@movies_notes&gt;
 &lt;/table&gt;
 &lt;!-- /ITEMS --&gt;
 

Modified: trunk/export_templates/latex/page.tpl
===================================================================
--- trunk/export_templates/latex/page.tpl	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/export_templates/latex/page.tpl	2007-09-02 18:08:57 UTC (rev 852)
@@ -7,52 +7,58 @@
 \begin{document}
 \maketitle
 &lt;!-- ITEMS --&gt;
-&lt;@image&gt;\includegraphics{./posters/@DATA@}
-&lt;/@image&gt;&lt;@title&gt;
-\section{@DATA@}&lt;/@title&gt;
+&lt;@movies_image&gt;\includegraphics{./posters/@DATA@}
+&lt;/@movies_image&gt;&lt;@movies_title&gt;
+\section{@DATA@}&lt;/@movies_title&gt;
 
 \begin{itemize}
-&lt;@number&gt;
+&lt;@movies_number&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@number&gt;&lt;@title&gt;
+&lt;/@movies_number&gt;&lt;@movies_title&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@title&gt;&lt;@o_title&gt;
+&lt;/@movies_title&gt;&lt;@movies_o_title&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@o_title&gt;&lt;@year&gt;
+&lt;/@movies_o_title&gt;&lt;@movies_year&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@year&gt;&lt;@director&gt;
+&lt;/@movies_year&gt;&lt;@movies_director&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@director&gt;&lt;@rating&gt;
+&lt;/@movies_director&gt;&lt;@movies_rating&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@rating&gt;&lt;@runtime&gt;
+&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@runtime&gt;&lt;@country&gt;
+&lt;/@movies_runtime&gt;&lt;@movies_country&gt;
 		\item {@TITLE@: @DATA@ min.}
-&lt;/@country&gt;&lt;@genre&gt;
+&lt;/@movies_country&gt;&lt;@movies_genre&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@genre&gt;&lt;@site&gt;
+&lt;/@movies_genre&gt;&lt;@movies_site&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@site&gt;&lt;@o_site&gt;
+&lt;/@movies_site&gt;&lt;@movies_o_site&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@o_site&gt;&lt;@trailer&gt;
+&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@trailer&gt;&lt;@media_num&gt;
+&lt;/@movies_trailer&gt;&lt;@media_name&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@media_num&gt;&lt;@seen&gt;
+&lt;/@media_name&gt;&lt;@movies_media_num&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@seen&gt;&lt;@loaned&gt;
+&lt;/@movies_media_num&gt;&lt;@collections_name&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@loaned&gt;&lt;@classification&gt;
+&lt;/@collections_name&gt;&lt;@volumes_name&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@classification&gt;&lt;@studio&gt;
+&lt;/@volumes_name&gt;&lt;@movies_seen&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@studio&gt;&lt;@cast&gt;
+&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@cast&gt;&lt;@plot&gt;
+&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@plot&gt;&lt;@notes&gt;
+&lt;/@movies_classification&gt;&lt;@movies_studio&gt;
 		\item {@TITLE@: @DATA@}
-&lt;/@notes&gt;
+&lt;/@movies_studio&gt;&lt;@movies_cast&gt;
+		\item {@TITLE@: @DATA@}
+&lt;/@movies_cast&gt;&lt;@movies_plot&gt;
+		\item {@TITLE@: @DATA@}
+&lt;/@movies_plot&gt;&lt;@movies_notes&gt;
+		\item {@TITLE@: @DATA@}
+&lt;/@movies_notes&gt;
 \end{itemize}
 
 &lt;!-- /ITEMS --&gt;

Modified: trunk/export_templates/xml/page.tpl
===================================================================
--- trunk/export_templates/xml/page.tpl	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/export_templates/xml/page.tpl	2007-09-02 18:08:57 UTC (rev 852)
@@ -2,28 +2,31 @@
 &lt;movies&gt;
 &lt;!-- ITEMS --&gt;
 	&lt;movie&gt;&lt;@id&gt;
-		&lt;id&gt;@DATA@&lt;/id&gt;&lt;/@id&gt;&lt;@image&gt;
-		&lt;image&gt;@DATA@&lt;/image&gt;&lt;/@image&gt;&lt;@title&gt;
-		&lt;title&gt;@DATA@&lt;/title&gt;&lt;/@title&gt;&lt;@o_title&gt;
-		&lt;otitle&gt;@DATA@&lt;/otitle&gt;&lt;/@o_title&gt;&lt;@number&gt;
-		&lt;number&gt;@DATA@&lt;/number&gt;&lt;/@number&gt;&lt;@year&gt;
-		&lt;year&gt;@DATA@&lt;/year&gt;&lt;/@year&gt;&lt;@director&gt;
-		&lt;director&gt;@DATA@&lt;/director&gt;&lt;/@director&gt;&lt;@rating&gt;
-		&lt;rating&gt;@DATA@&lt;/rating&gt;&lt;/@rating&gt;&lt;@runtime&gt;
-		&lt;runtime&gt;@DATA@&lt;/runtime&gt;&lt;/@runtime&gt;&lt;@country&gt;
-		&lt;country&gt;@DATA@&lt;/country&gt;&lt;/@country&gt;&lt;@genre&gt;
-		&lt;genre&gt;@DATA@&lt;/genre&gt;&lt;/@genre&gt;&lt;@site&gt;
-		&lt;imdb&gt;@DATA@&lt;/imdb&gt;&lt;/@site&gt;&lt;@o_site&gt;
-		&lt;site&gt;@DATA@&lt;/site&gt;&lt;/@o_site&gt;&lt;@trailer&gt;
-		&lt;trailer&gt;@DATA@&lt;/trailer&gt;&lt;/@trailer&gt;&lt;@media_num&gt;
-		&lt;media&gt;@DATA@&lt;/media&gt;&lt;/@media_num&gt;&lt;@seen&gt;
-		&lt;seen&gt;@DATA@&lt;/seen&gt;&lt;/@seen&gt;&lt;@loaned&gt;
-		&lt;loaned&gt;@DATA@&lt;/loaned&gt;&lt;/@loaned&gt;&lt;@classification&gt;
-		&lt;classification&gt;@DATA@&lt;/classification&gt;&lt;/@classification&gt;&lt;@studio&gt;
-		&lt;studio&gt;@DATA@&lt;/studio&gt;&lt;/@studio&gt;&lt;@cast&gt;
-		&lt;cast&gt;@DATA@&lt;/cast&gt;&lt;/@cast&gt;&lt;@plot&gt;
-		&lt;plot&gt;@DATA@&lt;/plot&gt;&lt;/@plot&gt;&lt;@notes&gt;
-		&lt;notes&gt;@DATA@&lt;/notes&gt;&lt;/@notes&gt;
+		&lt;id&gt;@DATA@&lt;/id&gt;&lt;/@id&gt;&lt;@movies_image&gt;
+		&lt;image&gt;@DATA@&lt;/image&gt;&lt;/@movies_image&gt;&lt;@movies_title&gt;
+		&lt;title&gt;@DATA@&lt;/title&gt;&lt;/@movies_title&gt;&lt;@movies_o_title&gt;
+		&lt;otitle&gt;@DATA@&lt;/otitle&gt;&lt;/@movies_o_title&gt;&lt;@movies_number&gt;
+		&lt;number&gt;@DATA@&lt;/number&gt;&lt;/@movies_number&gt;&lt;@movies_year&gt;
+		&lt;year&gt;@DATA@&lt;/year&gt;&lt;/@movies_year&gt;&lt;@movies_director&gt;
+		&lt;director&gt;@DATA@&lt;/director&gt;&lt;/@movies_director&gt;&lt;@movies_rating&gt;
+		&lt;rating&gt;@DATA@&lt;/rating&gt;&lt;/@movies_rating&gt;&lt;@movies_runtime&gt;
+		&lt;runtime&gt;@DATA@&lt;/runtime&gt;&lt;/@movies_runtime&gt;&lt;@movies_country&gt;
+		&lt;country&gt;@DATA@&lt;/country&gt;&lt;/@movies_country&gt;&lt;@movies_genre&gt;
+		&lt;genre&gt;@DATA@&lt;/genre&gt;&lt;/@movies_genre&gt;&lt;@movies_site&gt;
+		&lt;imdb&gt;@DATA@&lt;/imdb&gt;&lt;/@movies_site&gt;&lt;@movies_o_site&gt;
+		&lt;site&gt;@DATA@&lt;/site&gt;&lt;/@movies_o_site&gt;&lt;@movies_trailer&gt;
+		&lt;trailer&gt;@DATA@&lt;/trailer&gt;&lt;/@movies_trailer&gt;&lt;@media_name&gt;
+		&lt;media_name&gt;@DATA@&lt;/media_name&gt;&lt;/@media_name&gt;&lt;@movies_media_num&gt;
+		&lt;media&gt;@DATA@&lt;/media&gt;&lt;/@movies_media_num&gt;&lt;@collections_name&gt;
+		&lt;collection&gt;@DATA@&lt;/collection&gt;&lt;/@collections_name&gt;&lt;@volumes_name&gt;
+		&lt;volume&gt;@DATA@&lt;/volume&gt;&lt;/@volumes_name&gt;&lt;@movies_seen&gt;
+		&lt;seen&gt;@DATA@&lt;/seen&gt;&lt;/@movies_seen&gt;&lt;@movies_loaned&gt;
+		&lt;loaned&gt;@DATA@&lt;/loaned&gt;&lt;/@movies_loaned&gt;&lt;@movies_classification&gt;
+		&lt;classification&gt;@DATA@&lt;/classification&gt;&lt;/@movies_classification&gt;&lt;@movies_studio&gt;
+		&lt;studio&gt;@DATA@&lt;/studio&gt;&lt;/@movies_studio&gt;&lt;@movies_cast&gt;
+		&lt;cast&gt;@DATA@&lt;/cast&gt;&lt;/@movies_cast&gt;&lt;@movies_plot&gt;
+		&lt;plot&gt;@DATA@&lt;/plot&gt;&lt;/@movies_plot&gt;&lt;@movies_notes&gt;
+		&lt;notes&gt;@DATA@&lt;/notes&gt;&lt;/@movies_notes&gt;
 	&lt;/movie&gt;
 &lt;!-- /ITEMS --&gt;
 &lt;/movies&gt;

Modified: trunk/lib/plugins/export/PluginExportHTML.py
===================================================================
--- trunk/lib/plugins/export/PluginExportHTML.py	2007-09-02 18:03:02 UTC (rev 851)
+++ trunk/lib/plugins/export/PluginExportHTML.py	2007-09-02 18:08:57 UTC (rev 852)
@@ -41,7 +41,7 @@
 class ExportPlugin(gtk.Window):
 	#==[ configuration - default values ]==========={{{
 	config = {
-		'sorting'           : 'title',
+		'sorting'           : 'movies_title',
 		'sorting2'          : 'ASC',
 		'exported_dir'      : 'griffith_movies',
 		'template'          : 0,
@@ -60,63 +60,102 @@
 		'poster_format'     : 'jpg'
 	}
 	fields = {
-		'cast'         : False,
-		'classification' : False,
-		'country'        : True,
-		'genre'          : True,
-		'director'       : True,
-		'image'          : True,
-		'o_site'         : True,
-		'site'           : True,
-		'trailer'        : True,
-		'loaned'         : False,
-		'media_num'      : True,
-		'number'         : True,
-		'o_title'        : True,
-		'plot'           : False,
-		'rating'         : True,
-		'runtime'        : True,
-		'studio'         : False,
-		'seen'           : True,
-		'title'          : True,
-		'year'           : True,
-		'notes'          : False,
-#		'region'         : False,
-#		'layers'         : False,
-#		'condition'      : False,
-#		'color'          : False,
-#		'volume_id'      : False,
-#		'collection_id'  : False,
+		'movies_cast'           : False,
+		'movies_classification' : False,
+		'movies_country'        : True,
+		'movies_genre'          : True,
+		'movies_director'       : True,
+		'movies_image'          : True,
+		'movies_o_site'         : True,
+		'movies_site'           : True,
+		'movies_trailer'        : True,
+		'movies_loaned'         : False,
+		'movies_media_num'      : True,
+		'movies_number'         : True,
+		'movies_o_title'        : True,
+		'movies_plot'           : False,
+		'movies_rating'         : True,
+		'movies_runtime'        : True,
+		'movies_studio'         : False,
+		'movies_seen'           : True,
+		'movies_title'          : True,
+		'movies_year'           : True,
+		'movies_notes'          : False,
+#		'movies_region'         : False,
+#		'movies_layers'         : False,
+#		'movies_condition'      : False,
+#		'movies_color'          : False,
+#		'movies_volume_id'      : False,
+#		'movies_collection_id'  : False,
+		'media_name'            : True,
+		'collections_name'      : True,
+		'volumes_name'          : True,
 	}
 	
+	fields_as_columns = {
+		'movies_cast'           : 'cast',
+		'movies_classification' : 'classification',
+		'movies_country'        : 'country',
+		'movies_genre'          : 'genre',
+		'movies_director'       : 'director',
+		'movies_image'          : 'image',
+		'movies_o_site'         : 'o_site',
+		'movies_site'           : 'site',
+		'movies_trailer'        : 'trailer',
+		'movies_loaned'         : 'loaned',
+		'movies_media_num'      : 'media_num',
+		'movies_number'         : 'number',
+		'movies_o_title'        : 'o_title',
+		'movies_plot'           : 'plot',
+		'movies_rating'         : 'rating',
+		'movies_runtime'        : 'runtime',
+		'movies_studio'         : 'studio',
+		'movies_seen'           : 'seen',
+		'movies_title'          : 'title',
+		'movies_year'           : 'year',
+		'movies_notes'          : 'notes',
+#		'movies_region'         : 'region',
+#		'movies_layers'         : 'layers',
+#		'movies_condition'      : 'condition',
+#		'movies_color'          : 'color',
+#		'movies_volume_id'      : 'volume_id',
+#		'movies_collection_id'  : 'collection_id',
+		'media_name'            : 'name',
+		'collections_name'      : 'name',
+		'volumes_name'          : 'name',
+	}
+	
 	names = {
-		_('Cast')           : 'cast',
-		_('Classification') : 'classification',
-		_('Country')        : 'country',
-		_('Director')       : 'director',
-		_('Genre')          : 'genre',
-		_('Image')          : 'image',
-		_('Official site')  : 'o_site',
-		_('Site')           : 'site',
-		_('Trailer')        : 'trailer',
-		_('Loaned')         : 'loaned',
-		_('Discs')          : 'media_num',
-		_('Number')         : 'number',
-		_('Original Title') : 'o_title',
-		_('Plot')           : 'plot',
-		_('Rating')         : 'rating',
-		_('Runtime')        : 'runtime',
-		_('Studio')         : 'studio',
-		_('Seen it')        : 'seen',
-		_('Title')          : 'title',
-		_('Year')           : 'year',
-		_('Notes')          : 'notes',
-#		_('Region')         : 'region',
-#		_('Layers')         : 'layers',
-#		_('Condition')      : 'condition',
-#		_('Color')          : 'color',
-#		_('Volume')         : 'volume_id',
-#		_('Collection')     : 'collection_id',
+		_('Cast')           : 'movies_cast',
+		_('Classification') : 'movies_classification',
+		_('Country')        : 'movies_country',
+		_('Director')       : 'movies_director',
+		_('Genre')          : 'movies_genre',
+		_('Image')          : 'movies_image',
+		_('Official site')  : 'movies_o_site',
+		_('Site')           : 'movies_site',
+		_('Trailer')        : 'movies_trailer',
+		_('Loaned')         : 'movies_loaned',
+		_('Discs')          : 'movies_media_num',
+		_('Number')         : 'movies_number',
+		_('Original Title') : 'movies_o_title',
+		_('Plot')           : 'movies_plot',
+		_('Rating')         : 'movies_rating',
+		_('Runtime')        : 'movies_runtime',
+		_('Studio')         : 'movies_studio',
+		_('Seen it')        : 'movies_seen',
+		_('Title')          : 'movies_title',
+		_('Year')           : 'movies_year',
+		_('Notes')          : 'movies_notes',
+#		_('Region')         : 'movies_region',
+#		_('Layers')         : 'movies_layers',
+#		_('Condition')      : 'movies_condition',
+#		_('Color')          : 'movies_color',
+#		_('Volume')         : 'movies_volume_id',
+#		_('Collection')     : 'movies_collection_id',
+		_('Media')          : 'media_name',
+		_('Collection')     : 'collections_name',
+		_('Volume')         : 'volumes_name',
 	}
 	#}}}
 
@@ -483,19 +522,38 @@
 		
 		# columns to select
 		columns = []
-		for i in self.fields:
-			columns.append(self.db.Movie.c[i])
-		
+		for i in self.fields_as_columns:
+			try:
+				columns.append(self.db.Movie.c[self.fields_as_columns[i]])
+			except:
+				pass
+		# use outer join to media table to get the name of the media
+		from sqlalchemy import outerjoin
+		columns.append(self.db.Medium.c['name'])
+		media_join = outerjoin(self.db.metadata.tables['movies'], \
+			self.db.metadata.tables['media'], \
+			self.db.metadata.tables['movies'].c.medium_id==self.db.metadata.tables['media'].c.medium_id)
+		# use outer join to collections table to get the name of the collection
+		columns.append(self.db.Collection.c['name'])
+		collection_join = media_join.outerjoin( \
+			self.db.metadata.tables['collections'], \
+			self.db.metadata.tables['movies'].c.collection_id==self.db.metadata.tables['collections'].c.collection_id)
+		# use outer join to volumes table to get the name of the volume
+		columns.append(self.db.Volume.c['name'])
+		volume_join = collection_join.outerjoin( \
+			self.db.metadata.tables['volumes'], \
+			self.db.metadata.tables['movies'].c.volume_id==self.db.metadata.tables['volumes'].c.volume_id)
+
 		# sort order	TODO: more than one sort column
 		sort_columns = []
 		if config['sorting2'] == 'ASC':
 			from sqlalchemy import asc
-			sort_columns.append(asc(self.db.Movie.c[config['sorting']]))
+			sort_columns.append(asc(self.db.Movie.c[self.fields_as_columns[config['sorting']]]))
 		elif config['sorting2'] == 'DESC':
 			from sqlalchemy import desc
-			sort_columns.append(desc(self.db.Movie.c[config['sorting']]))
+			sort_columns.append(desc(self.db.Movie.c[self.fields_as_columns[config['sorting']]]))
 
-		statement = select(columns=columns, order_by=sort_columns)
+		statement = select(columns=columns, order_by=sort_columns, from_obj=[media_join, collection_join, volume_join], use_labels = True)
 
 		# where clause
 		if config['seen_only'] == 1:
@@ -554,7 +612,7 @@
 			except Exception, err:
 				gutils.warning(self, str(err))
 
-		if fields['image']:
+		if fields['movies_image']:
 			# import modules needed later
 			if config['poster_convert']:
 				from PIL import Image
@@ -684,9 +742,9 @@
 			tmp = self.fill_template(tmp, 'item', str(i))
 			for j in self.names:
 				if self.fields[self.names[j]] == True:
-					if self.names[j] == 'image':
-						if row['image']:
-							image = row['image'] + '.' + config['poster_format'].lower()
+					if self.names[j] == 'movies_image':
+						if row['movies_image']:
+							image = row['movies_image'] + '.' + config['poster_format'].lower()
 							tmp = self.fill_template(tmp, self.names[j], image, j)
 						else:
 							tmp = self.fill_template(tmp, self.names[j], '', j)
@@ -712,9 +770,9 @@
 			# ---------------------------------------------
 			
 			# copy poster
-			if fields['image']:
-				if row['image'] is not None:
-					image_file = os.path.join(self.locations['posters'], str(row['image']) + '.jpg')
+			if fields['movies_image']:
+				if row['movies_image'] is not None:
+					image_file = os.path.join(self.locations['posters'], str(row['movies_image']) + '.jpg')
 					if not config['poster_convert']:	# copy file
 						try:
 							shutil.copy(image_file,	posters_dir)
@@ -724,7 +782,7 @@
 						try:
 							im = Image.open(image_file, 'r').convert(config['poster_mode'])
 							im.thumbnail((config['poster_width'], config['poster_height']), Image.ANTIALIAS)
-							im.save(os.path.join(posters_dir, row['image']) + '.' + config['poster_format'].lower(), config['poster_format'])
+							im.save(os.path.join(posters_dir, row['movies_image']) + '.' + config['poster_format'].lower(), config['poster_format'])
 						except:
 							self.debug.show(&quot;Can't convert %s&quot; % image_file)
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000360.html">[Griffith-svn] r851 - in trunk: . lib
</A></li>
	<LI>Next message: <A HREF="000361.html">[Griffith-svn] r853 - trunk/lib/plugins/export
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#359">[ date ]</a>
              <a href="thread.html#359">[ thread ]</a>
              <a href="subject.html#359">[ subject ]</a>
              <a href="author.html#359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/griffith-svn">More information about the Griffith-svn
mailing list</a><br>
</body></html>
