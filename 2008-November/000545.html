<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Griffith-svn] r1070 - / online online/trunk	online/trunk/WebGriffith.egg-info online/trunk/docs	online/trunk/webgriffith online/trunk/webgriffith/config	online/trunk/webgriffith/controllers online/trunk/webgriffith/i18n	online/trunk/webgriffith/i18n/en	online/trunk/webgriffith/i18n/en/LC_MESSAGES	online/trunk/webgriffith/lib online/trunk/webgriffith/model	online/trunk/webgriffith/public online/trunk/webgriffith/public/js	online/trunk/webgriffith/templates	online/trunk/webgriffith/templates/default	online/trunk/webgriffith/tests	online/trunk/webgriffith/tests/functional
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/griffith-svn/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r1070%20-%20/%20online%20online/trunk%0A%09online/trunk/WebGriffith.egg-info%20online/trunk/docs%0A%09online/trunk/webgriffith%20online/trunk/webgriffith/config%0A%09online/trunk/webgriffith/controllers%20online/trunk/webgriffith/i18n%0A%09online/trunk/webgriffith/i18n/en%0A%09online/trunk/webgriffith/i18n/en/LC_MESSAGES%0A%09online/trunk/webgriffith/lib%20online/trunk/webgriffith/model%0A%09online/trunk/webgriffith/public%20online/trunk/webgriffith/public/js%0A%09online/trunk/webgriffith/templates%0A%09online/trunk/webgriffith/templates/default%0A%09online/trunk/webgriffith/tests%0A%09online/trunk/webgriffith/tests/functional&In-Reply-To=%3C200811221640.mAMGeoLv028705%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000544.html">
   <LINK REL="Next"  HREF="000546.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Griffith-svn] r1070 - / online online/trunk	online/trunk/WebGriffith.egg-info online/trunk/docs	online/trunk/webgriffith online/trunk/webgriffith/config	online/trunk/webgriffith/controllers online/trunk/webgriffith/i18n	online/trunk/webgriffith/i18n/en	online/trunk/webgriffith/i18n/en/LC_MESSAGES	online/trunk/webgriffith/lib online/trunk/webgriffith/model	online/trunk/webgriffith/public online/trunk/webgriffith/public/js	online/trunk/webgriffith/templates	online/trunk/webgriffith/templates/default	online/trunk/webgriffith/tests	online/trunk/webgriffith/tests/functional</H1>
    <B>piotrek at BerliOS</B> 
    <A HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r1070%20-%20/%20online%20online/trunk%0A%09online/trunk/WebGriffith.egg-info%20online/trunk/docs%0A%09online/trunk/webgriffith%20online/trunk/webgriffith/config%0A%09online/trunk/webgriffith/controllers%20online/trunk/webgriffith/i18n%0A%09online/trunk/webgriffith/i18n/en%0A%09online/trunk/webgriffith/i18n/en/LC_MESSAGES%0A%09online/trunk/webgriffith/lib%20online/trunk/webgriffith/model%0A%09online/trunk/webgriffith/public%20online/trunk/webgriffith/public/js%0A%09online/trunk/webgriffith/templates%0A%09online/trunk/webgriffith/templates/default%0A%09online/trunk/webgriffith/tests%0A%09online/trunk/webgriffith/tests/functional&In-Reply-To=%3C200811221640.mAMGeoLv028705%40sheep.berlios.de%3E"
       TITLE="[Griffith-svn] r1070 - / online online/trunk	online/trunk/WebGriffith.egg-info online/trunk/docs	online/trunk/webgriffith online/trunk/webgriffith/config	online/trunk/webgriffith/controllers online/trunk/webgriffith/i18n	online/trunk/webgriffith/i18n/en	online/trunk/webgriffith/i18n/en/LC_MESSAGES	online/trunk/webgriffith/lib online/trunk/webgriffith/model	online/trunk/webgriffith/public online/trunk/webgriffith/public/js	online/trunk/webgriffith/templates	online/trunk/webgriffith/templates/default	online/trunk/webgriffith/tests	online/trunk/webgriffith/tests/functional">piotrek at mail.berlios.de
       </A><BR>
    <I>Sat Nov 22 17:40:50 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000544.html">[Griffith-svn] r1069 - trunk/lib
</A></li>
        <LI>Next message: <A HREF="000546.html">[Griffith-svn] r1071 - in online/trunk/webgriffith: controllers lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#545">[ date ]</a>
              <a href="thread.html#545">[ thread ]</a>
              <a href="subject.html#545">[ subject ]</a>
              <a href="author.html#545">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: piotrek
Date: 2008-11-22 17:40:48 +0100 (Sat, 22 Nov 2008)
New Revision: 1070

Added:
   online/
   online/branches/
   online/tags/
   online/trunk/
   online/trunk/MANIFEST.in
   online/trunk/README.txt
   online/trunk/WebGriffith.egg-info/
   online/trunk/WebGriffith.egg-info/PKG-INFO
   online/trunk/WebGriffith.egg-info/SOURCES.txt
   online/trunk/WebGriffith.egg-info/dependency_links.txt
   online/trunk/WebGriffith.egg-info/entry_points.txt
   online/trunk/WebGriffith.egg-info/not-zip-safe
   online/trunk/WebGriffith.egg-info/paster_plugins.txt
   online/trunk/WebGriffith.egg-info/requires.txt
   online/trunk/WebGriffith.egg-info/top_level.txt
   online/trunk/__init__.py
   online/trunk/data/
   online/trunk/development.ini
   online/trunk/docs/
   online/trunk/docs/index.txt
   online/trunk/setup.cfg
   online/trunk/setup.py
   online/trunk/test.ini
   online/trunk/webgriffith/
   online/trunk/webgriffith/__init__.py
   online/trunk/webgriffith/config/
   online/trunk/webgriffith/config/__init__.py
   online/trunk/webgriffith/config/deployment.ini_tmpl
   online/trunk/webgriffith/config/environment.py
   online/trunk/webgriffith/config/middleware.py
   online/trunk/webgriffith/config/routing.py
   online/trunk/webgriffith/controllers/
   online/trunk/webgriffith/controllers/__init__.py
   online/trunk/webgriffith/controllers/error.py
   online/trunk/webgriffith/controllers/list.py
   online/trunk/webgriffith/controllers/movie.py
   online/trunk/webgriffith/controllers/settings.py
   online/trunk/webgriffith/i18n/
   online/trunk/webgriffith/i18n/en/
   online/trunk/webgriffith/i18n/en/LC_MESSAGES/
   online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.mo
   online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.po
   online/trunk/webgriffith/i18n/webgriffith.pot
   online/trunk/webgriffith/lib/
   online/trunk/webgriffith/lib/__init__.py
   online/trunk/webgriffith/lib/app_globals.py
   online/trunk/webgriffith/lib/base.py
   online/trunk/webgriffith/lib/helpers.py
   online/trunk/webgriffith/model/
   online/trunk/webgriffith/model/__init__.py
   online/trunk/webgriffith/model/db.py
   online/trunk/webgriffith/model/meta.py
   online/trunk/webgriffith/public/
   online/trunk/webgriffith/public/bg.png
   online/trunk/webgriffith/public/js/
   online/trunk/webgriffith/public/js/jquery.min.js
   online/trunk/webgriffith/public/pylons-logo.gif
   online/trunk/webgriffith/templates/
   online/trunk/webgriffith/templates/default/
   online/trunk/webgriffith/templates/default/base.mako
   online/trunk/webgriffith/templates/default/details.mako
   online/trunk/webgriffith/templates/default/index.mako
   online/trunk/webgriffith/templates/default/list.mako
   online/trunk/webgriffith/templates/default/movie.mako
   online/trunk/webgriffith/templates/default/settings.mako
   online/trunk/webgriffith/templates/default/verbose_list.mako
   online/trunk/webgriffith/tests/
   online/trunk/webgriffith/tests/__init__.py
   online/trunk/webgriffith/tests/functional/
   online/trunk/webgriffith/tests/functional/__init__.py
   online/trunk/webgriffith/tests/functional/test_list.py
   online/trunk/webgriffith/tests/functional/test_movie.py
   online/trunk/webgriffith/tests/functional/test_settings.py
   online/trunk/webgriffith/tests/test_models.py
   online/trunk/webgriffith/websetup.py
Log:
initial WebGriffith import


Added: online/trunk/MANIFEST.in
===================================================================
--- online/trunk/MANIFEST.in	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/MANIFEST.in	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,3 @@
+include webgriffith/config/deployment.ini_tmpl
+recursive-include webgriffith/public *
+recursive-include webgriffith/templates *

Added: online/trunk/README.txt
===================================================================
--- online/trunk/README.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/README.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,32 @@
+This file is for you to describe the WebGriffith application. Typically
+you would include information such as the information below:
+
+Installation and Setup
+======================
+
+
+Install ``Pylons`` using your favourite package manader::
+
+    aptitude install python-pylons
+
+Make a config file as follows::
+
+    paster make-config WebGriffith config.ini
+
+Tweak the config file as appropriate and then setup the application::
+
+    paster setup-app development.ini
+
+Then you are ready to go.
+
+Starting application
+====================
+
+Development::
+
+    paster serve --reload development.ini
+
+Production::
+
+    paster serve production.ini
+

Added: online/trunk/WebGriffith.egg-info/PKG-INFO
===================================================================
--- online/trunk/WebGriffith.egg-info/PKG-INFO	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/PKG-INFO	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,10 @@
+Metadata-Version: 1.0
+Name: WebGriffith
+Version: 0.1~dev
+Summary: UNKNOWN
+Home-page: <A HREF="http://online.griffith.cc">http://online.griffith.cc</A>
+Author: Piotr O&#380;arowski
+Author-email: <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">piotr at griffith.cc</A>
+License: GPL2
+Description: Online version of Griffith
+Platform: any

Added: online/trunk/WebGriffith.egg-info/SOURCES.txt
===================================================================
--- online/trunk/WebGriffith.egg-info/SOURCES.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/SOURCES.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,33 @@
+MANIFEST.in
+README.txt
+setup.cfg
+setup.py
+WebGriffith.egg-info/PKG-INFO
+WebGriffith.egg-info/SOURCES.txt
+WebGriffith.egg-info/dependency_links.txt
+WebGriffith.egg-info/entry_points.txt
+WebGriffith.egg-info/not-zip-safe
+WebGriffith.egg-info/paster_plugins.txt
+WebGriffith.egg-info/requires.txt
+WebGriffith.egg-info/top_level.txt
+webgriffith/__init__.py
+webgriffith/websetup.py
+webgriffith/config/__init__.py
+webgriffith/config/deployment.ini_tmpl
+webgriffith/config/environment.py
+webgriffith/config/middleware.py
+webgriffith/config/routing.py
+webgriffith/controllers/__init__.py
+webgriffith/controllers/error.py
+webgriffith/lib/__init__.py
+webgriffith/lib/app_globals.py
+webgriffith/lib/base.py
+webgriffith/lib/helpers.py
+webgriffith/model/__init__.py
+webgriffith/model/meta.py
+webgriffith/public/bg.png
+webgriffith/public/index.html
+webgriffith/public/pylons-logo.gif
+webgriffith/tests/__init__.py
+webgriffith/tests/test_models.py
+webgriffith/tests/functional/__init__.py
\ No newline at end of file

Added: online/trunk/WebGriffith.egg-info/dependency_links.txt
===================================================================
--- online/trunk/WebGriffith.egg-info/dependency_links.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/dependency_links.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1 @@
+

Added: online/trunk/WebGriffith.egg-info/entry_points.txt
===================================================================
--- online/trunk/WebGriffith.egg-info/entry_points.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/entry_points.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,7 @@
+
+    [paste.app_factory]
+    main = webgriffith.config.middleware:make_app
+
+    [paste.app_install]
+    main = pylons.util:PylonsInstaller
+    
\ No newline at end of file

Added: online/trunk/WebGriffith.egg-info/not-zip-safe
===================================================================
--- online/trunk/WebGriffith.egg-info/not-zip-safe	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/not-zip-safe	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1 @@
+

Added: online/trunk/WebGriffith.egg-info/paster_plugins.txt
===================================================================
--- online/trunk/WebGriffith.egg-info/paster_plugins.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/paster_plugins.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,2 @@
+PasteScript
+Pylons

Added: online/trunk/WebGriffith.egg-info/requires.txt
===================================================================
--- online/trunk/WebGriffith.egg-info/requires.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/requires.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,5 @@
+Pylons&gt;=0.9.7rc3
+SQLAlchemy&gt;=0.5rc4
+Mako &gt;= 0.2.2
+Beaker
+Webhelpers&gt;=0.6.1

Added: online/trunk/WebGriffith.egg-info/top_level.txt
===================================================================
--- online/trunk/WebGriffith.egg-info/top_level.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/WebGriffith.egg-info/top_level.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1 @@
+webgriffith

Added: online/trunk/__init__.py
===================================================================

Added: online/trunk/development.ini
===================================================================
--- online/trunk/development.ini	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/development.ini	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,91 @@
+#
+# WebGriffith - Pylons development environment configuration
+#
+# The %(here)s variable will be replaced with the parent directory of this file
+#
+[DEFAULT]
+debug = true
+# Uncomment and replace with the address which should receive any error reports
+#email_to = <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">you at yourdomain.com</A>
+smtp_server = localhost
+error_email_from = <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">webgriffith at localhost</A>
+
+[server:main]
+use = egg:Paste#http
+host = 127.0.0.1
+port = 5000
+
+[app:main]
+use = egg:WebGriffith
+full_stack = true
+
+cache_dir = %(here)s/data
+beaker.session.key = webgriffith
+beaker.session.secret = somesecret
+
+# If you'd like to fine-tune the individual locations of the cache data dirs
+# for the Cache data, or the Session saves, un-comment the desired settings
+# here:
+#beaker.cache.data_dir = %(here)s/data/cache
+#beaker.session.data_dir = %(here)s/data/sessions
+
+# SQLAlchemy database URL
+sqlalchemy.url = <A HREF="sqlite:////home/pox/.griffith/griffith.db">sqlite:////home/pox/.griffith/griffith.db</A>
+sqlalchemy.convert_unicode = true
+
+
+# WARNING: *THE LINE BELOW MUST BE UNCOMMENTED ON A PRODUCTION ENVIRONMENT*
+# Debug mode will enable the interactive debugging tool, allowing ANYONE to
+# execute malicious code after an exception is raised.
+#set debug = false
+
+# session defaults:
+view.language = en
+view.template = default
+
+# other view settings:
+view.header = Griffith's movie list
+view.items_per_page = 20
+
+# Logging configuration
+[loggers]
+keys = root, routes, webgriffith, sqlalchemy
+
+[handlers]
+keys = console
+
+[formatters]
+keys = generic
+
+[logger_root]
+level = INFO
+handlers = console
+
+[logger_routes]
+level = INFO
+handlers =
+qualname = routes.middleware
+# &quot;level = DEBUG&quot; logs the route matched and routing variables.
+
+[logger_webgriffith]
+level = DEBUG
+handlers =
+qualname = webgriffith
+
+[logger_sqlalchemy]
+level = WARN
+handlers =
+qualname = sqlalchemy.engine
+# &quot;level = INFO&quot; logs SQL queries.
+# &quot;level = DEBUG&quot; logs SQL queries and results.
+# &quot;level = WARN&quot; logs neither.  (Recommended for production systems.)
+
+[handler_console]
+class = StreamHandler
+args = (sys.stderr,)
+level = NOTSET
+formatter = generic
+
+[formatter_generic]
+format = %(asctime)s,%(msecs)03d %(levelname)-5.5s [%(name)s] %(message)s
+datefmt = %H:%M:%S

Added: online/trunk/docs/index.txt
===================================================================
--- online/trunk/docs/index.txt	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/docs/index.txt	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,19 @@
+webgriffith
++++++++++++
+
+This is the main index page of your documentation. It should be written in
+`reStructuredText format &lt;<A HREF="http://docutils.sourceforge.net/rst.html">http://docutils.sourceforge.net/rst.html</A>&gt;`_.
+
+You can generate your documentation in HTML format by running this command::
+
+    setup.py pudge
+
+For this to work you will need to download and install `buildutils`_,
+`pudge`_, and `pygments`_.  The ``pudge`` command is disabled by
+default; to ativate it in your project, run::
+
+    setup.py addcommand -p buildutils.pudge_command
+
+.. _buildutils: <A HREF="http://pypi.python.org/pypi/buildutils">http://pypi.python.org/pypi/buildutils</A>
+.. _pudge: <A HREF="http://pudge.lesscode.org/">http://pudge.lesscode.org/</A>
+.. _pygments: <A HREF="http://pygments.org/">http://pygments.org/</A>

Added: online/trunk/setup.cfg
===================================================================
--- online/trunk/setup.cfg	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/setup.cfg	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,31 @@
+[egg_info]
+tag_build = dev
+tag_svn_revision = true
+
+[easy_install]
+find_links = <A HREF="http://www.pylonshq.com/download/">http://www.pylonshq.com/download/</A>
+
+[nosetests]
+with-pylons = test.ini
+
+# Babel configuration
+[compile_catalog]
+domain = webgriffith
+directory = webgriffith/i18n
+statistics = true
+
+[extract_messages]
+add_comments = TRANSLATORS:
+output_file = webgriffith/i18n/webgriffith.pot
+width = 80
+
+[init_catalog]
+domain = webgriffith
+input_file = webgriffith/i18n/webgriffith.pot
+output_dir = webgriffith/i18n
+
+[update_catalog]
+domain = webgriffith
+input_file = webgriffith/i18n/webgriffith.pot
+output_dir = webgriffith/i18n
+previous = true

Added: online/trunk/setup.py
===================================================================
--- online/trunk/setup.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/setup.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,40 @@
+try:
+    from setuptools import setup, find_packages
+except ImportError:
+    print 'Please install setuptools'
+    import sys
+    sys.exit(-1)
+
+setup(
+    name='WebGriffith',
+    version='0.1~dev',
+    description='',
+    author='Piotr O&#380;arowski',
+    author_email='<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">piotr at griffith.cc</A>',
+    url='<A HREF="http://online.griffith.cc">http://online.griffith.cc</A>',
+    install_requires=[
+        &quot;Pylons&gt;=0.9.7rc3&quot;,
+        &quot;SQLAlchemy&gt;=0.5rc4&quot;,
+        &quot;Mako&gt;=0.2.2&quot;,
+        &quot;Beaker&quot;,
+        &quot;Webhelpers&quot;,
+    ],
+    setup_requires=[&quot;PasteScript==dev,&gt;=1.6.3dev-r7326&quot;],
+    packages=find_packages(exclude=['ez_setup']),
+    include_package_data=True,
+    test_suite='nose.collector',
+    package_data={'webgriffith': ['i18n/*/LC_MESSAGES/*.mo']},
+    #message_extractors = {'webgriffith': [
+    #        ('**.py', 'python', None),
+    #        ('templates/**.mako', 'mako', None),
+    #        ('public/**', 'ignore', None)]},
+    zip_safe=False,
+    paster_plugins=['PasteScript', 'Pylons'],
+    entry_points=&quot;&quot;&quot;
+    [paste.app_factory]
+    main = webgriffith.config.middleware:make_app
+
+    [paste.app_install]
+    main = pylons.util:PylonsInstaller
+    &quot;&quot;&quot;,
+)

Added: online/trunk/test.ini
===================================================================
--- online/trunk/test.ini	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/test.ini	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,21 @@
+#
+# WebGriffith - Pylons testing environment configuration
+#
+# The %(here)s variable will be replaced with the parent directory of this file
+#
+[DEFAULT]
+debug = true
+# Uncomment and replace with the address which should receive any error reports
+#email_to = <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">you at yourdomain.com</A>
+smtp_server = localhost
+error_email_from = <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">paste at localhost</A>
+
+[server:main]
+use = egg:Paste#http
+host = 0.0.0.0
+port = 5000
+
+[app:main]
+use = config:development.ini
+
+# Add additional test specific configuration options as necessary.

Added: online/trunk/webgriffith/__init__.py
===================================================================

Added: online/trunk/webgriffith/config/__init__.py
===================================================================

Added: online/trunk/webgriffith/config/deployment.ini_tmpl
===================================================================
--- online/trunk/webgriffith/config/deployment.ini_tmpl	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/config/deployment.ini_tmpl	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,70 @@
+#
+# WebGriffith - Pylons configuration
+#
+# The %(here)s variable will be replaced with the parent directory of this file
+#
+[DEFAULT]
+debug = true
+email_to = <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">you at localhost</A>
+smtp_server = localhost
+error_email_from = <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">webgriffith at localhost</A>
+
+[server:main]
+use = egg:Paste#http
+host = 0.0.0.0
+port = 5000
+
+[app:main]
+use = egg:WebGriffith
+full_stack = true
+cache_dir = %(here)s/data
+beaker.session.key = webgriffith
+beaker.session.secret = ${app_instance_secret}
+app_instance_uuid = ${app_instance_uuid}
+
+# If you'd like to fine-tune the individual locations of the cache data dirs
+# for the Cache data, or the Session saves, un-comment the desired settings
+# here:
+#beaker.cache.data_dir = %(here)s/data/cache
+#beaker.session.data_dir = %(here)s/data/sessions
+
+# SQLAlchemy database URL
+sqlalchemy.url = <A HREF="sqlite:///griffith.db">sqlite:///griffith.db</A>
+sqlalchemy.convert_unicode = true
+sqlalchemy.echo = False
+
+# WARNING: *THE LINE BELOW MUST BE UNCOMMENTED ON A PRODUCTION ENVIRONMENT*
+# Debug mode will enable the interactive debugging tool, allowing ANYONE to
+# execute malicious code after an exception is raised.
+set debug = false
+
+# session defaults:
+view.language = en
+view.template = default
+
+# other view settings:
+view.header = Griffith's movie list
+view.items_per_page = 20
+
+# Logging configuration
+[loggers]
+keys = root, routes, webgriffith, sqlalchemy
+
+[handlers]
+keys = console
+
+[formatters]
+keys = generic
+
+[logger_root]
+level = INFO
+handlers = console
+
+[handler_console]
+class = StreamHandler
+args = (sys.stderr,)
+level = NOTSET
+formatter = generic
+
+[formatter_generic]
+format = %(asctime)s %(levelname)-5.5s [%(name)s] %(message)s

Added: online/trunk/webgriffith/config/environment.py
===================================================================
--- online/trunk/webgriffith/config/environment.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/config/environment.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,46 @@
+&quot;&quot;&quot;Pylons environment configuration&quot;&quot;&quot;
+import os
+
+from mako.lookup import TemplateLookup
+from pylons.error import handle_mako_error
+from pylons import config
+from sqlalchemy import engine_from_config
+
+import webgriffith.lib.app_globals as app_globals
+import webgriffith.lib.helpers
+from webgriffith.config.routing import make_map
+from webgriffith.model import init_model
+
+def load_environment(global_conf, app_conf):
+    &quot;&quot;&quot;Configure the Pylons environment via the ``pylons.config``
+    object
+    &quot;&quot;&quot;
+    # Pylons paths
+    root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
+    paths = dict(root=root,
+                 controllers=os.path.join(root, 'controllers'),
+                 static_files=os.path.join(root, 'public'),
+                 templates=[os.path.join(root, 'templates')])
+
+    # Initialize config with the basic options
+    config.init_app(global_conf, app_conf, package='webgriffith', paths=paths)
+
+    config['routes.map'] = make_map()
+    config['pylons.app_globals'] = app_globals.Globals()
+    config['pylons.h'] = webgriffith.lib.helpers
+
+    # Create the Mako TemplateLookup, with the default auto-escaping
+    config['pylons.app_globals'].mako_lookup = TemplateLookup(
+        directories=paths['templates'],
+        error_handler=handle_mako_error,
+        module_directory=os.path.join(app_conf['cache_dir'], 'templates'),
+        input_encoding='utf-8', output_encoding='utf-8',
+        imports=['from webhelpers.html import escape'],
+        default_filters=['escape'])
+    
+    # Setup SQLAlchemy database engine
+    engine = engine_from_config(config, 'sqlalchemy.')
+    init_model(engine)
+    
+    # CONFIGURATION OPTIONS HERE (note: all config options will override
+    # any Pylons config options)

Added: online/trunk/webgriffith/config/middleware.py
===================================================================
--- online/trunk/webgriffith/config/middleware.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/config/middleware.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,64 @@
+&quot;&quot;&quot;Pylons middleware initialization&quot;&quot;&quot;
+from beaker.middleware import CacheMiddleware, SessionMiddleware
+from paste.cascade import Cascade
+from paste.registry import RegistryManager
+from paste.urlparser import StaticURLParser
+from paste.deploy.converters import asbool
+from pylons import config
+from pylons.middleware import ErrorHandler, StatusCodeRedirect
+from pylons.wsgiapp import PylonsApp
+from routes.middleware import RoutesMiddleware
+
+from webgriffith.config.environment import load_environment
+
+def make_app(global_conf, full_stack=True, **app_conf):
+    &quot;&quot;&quot;Create a Pylons WSGI application and return it
+
+    ``global_conf``
+        The inherited configuration for this application. Normally from
+        the [DEFAULT] section of the Paste ini file.
+
+    ``full_stack``
+        Whether or not this application provides a full WSGI stack (by
+        default, meaning it handles its own exceptions and errors).
+        Disable full_stack when this application is &quot;managed&quot; by
+        another WSGI middleware.
+
+    ``app_conf``
+        The application's local configuration. Normally specified in
+        the [app:&lt;name&gt;] section of the Paste ini file (where &lt;name&gt;
+        defaults to main).
+
+    &quot;&quot;&quot;
+    # Configure the Pylons environment
+    load_environment(global_conf, app_conf)
+
+    # The Pylons WSGI app
+    app = PylonsApp()
+    
+    # CUSTOM MIDDLEWARE HERE (filtered by error handling middlewares)
+    
+    # Routing/Session/Cache Middleware
+    app = RoutesMiddleware(app, config['routes.map'])
+    app = SessionMiddleware(app, config)
+    app = CacheMiddleware(app, config)
+    
+    if asbool(full_stack):
+        # Handle Python exceptions
+        app = ErrorHandler(app, global_conf, **config['pylons.errorware'])
+
+        # Display error documents for 401, 403, 404 status codes (and
+        # 500 when debug is disabled)
+        if asbool(config['debug']):
+            app = StatusCodeRedirect(app)
+        else:
+            app = StatusCodeRedirect(app, [400, 401, 403, 404, 500])
+
+    # Establish the Registry for this application
+    app = RegistryManager(app)
+
+    # Static files (If running in production, and Apache or another web 
+    # server is handling this static content, remove the following 2 lines)
+    static_app = StaticURLParser(config['pylons.paths']['static_files'])
+    app = Cascade([static_app, app])
+    return app

Added: online/trunk/webgriffith/config/routing.py
===================================================================
--- online/trunk/webgriffith/config/routing.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/config/routing.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,29 @@
+&quot;&quot;&quot;Routes configuration
+
+The more specific and detailed routes should be defined first so they
+may take precedent over the more generic routes. For more information
+refer to the routes manual at <A HREF="http://routes.groovie.org/docs/">http://routes.groovie.org/docs/</A>
+&quot;&quot;&quot;
+from pylons import config
+from routes import Mapper
+
+def make_map():
+    &quot;&quot;&quot;Create, configure and return the routes Mapper&quot;&quot;&quot;
+    map = Mapper(directory=config['pylons.paths']['controllers'],
+                 always_scan=config['debug'])
+    map.minimization = False
+    
+    # The ErrorController route (handles 404/500 error pages); it should
+    # likely stay at the top, ensuring it can always be resolved
+    map.connect('/error/{action}', controller='error')
+    map.connect('/error/{action}/{id}', controller='error')
+
+    # CUSTOM ROUTES HERE
+
+    map.connect('/', controller='list', action='page', id=1)
+    map.connect('/list/{action}_{id}', controller='list', requirements={'id': r'\d+'})
+    map.connect('/{controller}', action='index')
+    map.connect('/{controller}/{action}')
+    map.connect('/{controller}/{action}/{id}', requirements={'id': r'\d+'})
+
+    return map

Added: online/trunk/webgriffith/controllers/__init__.py
===================================================================

Added: online/trunk/webgriffith/controllers/error.py
===================================================================
--- online/trunk/webgriffith/controllers/error.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/controllers/error.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,46 @@
+import cgi
+import os.path
+
+from paste.urlparser import PkgResourcesParser
+from pylons import request
+from pylons.controllers.util import forward
+from pylons.middleware import error_document_template
+from webhelpers.html.builder import literal
+
+from webgriffith.lib.base import BaseController
+
+class ErrorController(BaseController):
+    &quot;&quot;&quot;Generates error documents as and when they are required.
+
+    The ErrorDocuments middleware forwards to ErrorController when error
+    related status codes are returned from the application.
+
+    This behaviour can be altered by changing the parameters to the
+    ErrorDocuments middleware in your config/middleware.py file.
+    
+    &quot;&quot;&quot;
+    def document(self):
+        &quot;&quot;&quot;Render the error document&quot;&quot;&quot;
+        resp = request.environ.get('pylons.original_response')
+        content = literal(resp.body) or cgi.escape(request.GET.get('message'))
+        page = error_document_template % \
+            dict(prefix=request.environ.get('SCRIPT_NAME', ''),
+                 code=cgi.escape(request.GET.get('code', str(resp.status_int))),
+                 message=content)
+        return page
+
+    def img(self, id):
+        &quot;&quot;&quot;Serve Pylons' stock images&quot;&quot;&quot;
+        return self._serve_file('/'.join(['media/img', id]))
+
+    def style(self, id):
+        &quot;&quot;&quot;Serve Pylons' stock stylesheets&quot;&quot;&quot;
+        return self._serve_file('/'.join(['media/style', id]))
+
+    def _serve_file(self, path):
+        &quot;&quot;&quot;Call Paste's FileApp (a WSGI application) to serve the file
+        at the specified path
+        &quot;&quot;&quot;
+        static = PkgResourcesParser('pylons', 'pylons')
+        request.environ['PATH_INFO'] = '/%s' % path
+        return static(request.environ, self.start_response)

Added: online/trunk/webgriffith/controllers/list.py
===================================================================
--- online/trunk/webgriffith/controllers/list.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/controllers/list.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,43 @@
+import logging
+
+from pylons import request, response, session, tmpl_context as c
+from pylons.controllers.util import abort, redirect_to
+from pylons.decorators.cache import beaker_cache
+from webhelpers import paginate
+from math import ceil
+
+#from webgriffith.lib.base import BaseController, render
+from webgriffith.lib.base import *
+from webgriffith import model
+
+log = logging.getLogger(__name__)
+
+class ListController(BaseController):
+
+    #@beaker_cache(expire=60, type='memory', query_args=True)
+    def page(self, id):
+        page_nr = int(id) # routes will allow \d+ only here, no worry
+
+        items_per_page = int(session['items_per_page'])
+        items = meta.Session.query(model.Movie)
+
+        page = paginate.Page(items, page=page_nr, items_per_page=items_per_page)
+
+        if 'partial' in request.params:
+            return render_def(&quot;/%s/list.mako&quot; % session['template'], &quot;showpage&quot;, movies=page)
+        else:
+            return render(&quot;/%s/list.mako&quot; % session['template'], extra_vars={&quot;movies&quot;: page})
+
+    def verbose(self, id):
+        page_nr = int(id) # routes will allow \d+ only here, no worry
+
+        items_per_page = int(session['items_per_page'])
+        items = meta.Session.query(model.Movie)
+
+        page = paginate.Page(items, page=page_nr, items_per_page=items_per_page)
+
+        if 'partial' in request.params:
+            return render_def(&quot;/%s/verbose_list.mako&quot; % session['template'], &quot;showpage&quot;, movies=page)
+        else:
+            return render(&quot;/%s/verbose_list.mako&quot; % session['template'], extra_vars={&quot;movies&quot;: page})
+

Added: online/trunk/webgriffith/controllers/movie.py
===================================================================
--- online/trunk/webgriffith/controllers/movie.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/controllers/movie.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,20 @@
+import logging
+
+from pylons import request, response, session, tmpl_context as c
+from pylons.controllers.util import abort, redirect_to
+
+from webgriffith.lib.base import *
+from webgriffith import model
+
+log = logging.getLogger(__name__)
+        
+
+class MovieController(BaseController):
+
+    def view(self, id):
+        movie = meta.Session.query(model.Movie).filter_by(number=id).first()
+        if movie:
+            c.movie = movie
+            return render(&quot;/%s/movie.mako&quot; % session['template'])
+        else:
+            return abort(404)

Added: online/trunk/webgriffith/controllers/settings.py
===================================================================
--- online/trunk/webgriffith/controllers/settings.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/controllers/settings.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,40 @@
+import logging
+
+from pylons import request, response, session, tmpl_context as c
+from pylons.controllers.util import abort, redirect_to
+
+from webgriffith.lib.base import BaseController, render
+#from webgriffith import model
+
+log = logging.getLogger(__name__)
+
+class SettingsController(BaseController):
+
+    def index(self):
+        return render(&quot;/%s/settings.mako&quot; % session['template'])
+
+    def set(self):
+        session_changed = False
+        if 'lang' in request.params:
+            lang = request.params['lang']
+            if lang in ('en', 'pl', 'de'): # TODO: get all supported translations via lib.get_translations()
+                session['lang'] = lang
+                session_changed = True
+        if 'tpl' in request.params:
+            template = request.params['tpl']
+            if template in ('default',): # TODO: get from lib.get_templates()
+                session['template'] = tpl
+                session_changed = True
+        if 'items' in request.params:
+            try:
+                items_per_page = int(request.params['items'])
+            except:
+                log.warning(&quot;Wrong number for items_per_page: %s&quot;, request.params['items_per_page'])
+            else:
+                if items_per_page &lt; 2:
+                    items_per_page = 1
+                session['items_per_page'] = items_per_page
+                session_changed = True
+        if session_changed:
+            session.save()
+        redirect_to(action='index', id=None)

Added: online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.mo
===================================================================
(Binary files differ)


Property changes on: online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.mo
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.po
===================================================================
--- online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.po	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/i18n/en/LC_MESSAGES/webgriffith.po	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,21 @@
+# Translations template for debexpo.
+# Copyright (C) 2008 ORGANIZATION
+# This file is distributed under the same license as the debexpo project.
+# FIRST AUTHOR &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">EMAIL at ADDRESS</A>&gt;, 2008.
+#
+#, fuzzy
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: webgriffith 0.0.0\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">EMAIL at ADDRESS</A>\n&quot;
+&quot;POT-Creation-Date: 2008-11-20 22:00+0200\n&quot;
+&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">EMAIL at ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">LL at li.org</A>&gt;\n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=utf-8\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+
+msgid &quot;Yes&quot;
+msgstr &quot;TAK&quot;

Added: online/trunk/webgriffith/i18n/webgriffith.pot
===================================================================
--- online/trunk/webgriffith/i18n/webgriffith.pot	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/i18n/webgriffith.pot	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,21 @@
+# Translations template for debexpo.
+# Copyright (C) 2008 ORGANIZATION
+# This file is distributed under the same license as the debexpo project.
+# FIRST AUTHOR &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">EMAIL at ADDRESS</A>&gt;, 2008.
+#
+#, fuzzy
+msgid &quot;&quot;
+msgstr &quot;&quot;
+&quot;Project-Id-Version: webgriffith 0.0.0\n&quot;
+&quot;Report-Msgid-Bugs-To: <A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">EMAIL at ADDRESS</A>\n&quot;
+&quot;POT-Creation-Date: 2008-11-20 22:00+0200\n&quot;
+&quot;PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n&quot;
+&quot;Last-Translator: FULL NAME &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">EMAIL at ADDRESS</A>&gt;\n&quot;
+&quot;Language-Team: LANGUAGE &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">LL at li.org</A>&gt;\n&quot;
+&quot;MIME-Version: 1.0\n&quot;
+&quot;Content-Type: text/plain; charset=utf-8\n&quot;
+&quot;Content-Transfer-Encoding: 8bit\n&quot;
+
+
+msgid &quot;Yes&quot;
+msgstr &quot;TAK&quot;

Added: online/trunk/webgriffith/lib/__init__.py
===================================================================

Added: online/trunk/webgriffith/lib/app_globals.py
===================================================================
--- online/trunk/webgriffith/lib/app_globals.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/lib/app_globals.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,14 @@
+&quot;&quot;&quot;The application's Globals object&quot;&quot;&quot;
+
+class Globals(object):
+    &quot;&quot;&quot;Globals acts as a container for objects available throughout the
+    life of the application
+
+    &quot;&quot;&quot;
+    def __init__(self):
+        &quot;&quot;&quot;One instance of Globals is created during application
+        initialization and is available during requests via the
+        'app_globals' variable
+
+        &quot;&quot;&quot;
+        pass

Added: online/trunk/webgriffith/lib/base.py
===================================================================
--- online/trunk/webgriffith/lib/base.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/lib/base.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,55 @@
+&quot;&quot;&quot;The base Controller API
+
+Provides the BaseController class for subclassing.
+&quot;&quot;&quot;
+from pylons.controllers import WSGIController
+from pylons.templating import pylons_globals, render_mako as render
+from pylons import c, config, session
+#from pylons.i18n import _, ungettext, N_, get_lang, set_lang
+from pylons.i18n import _, get_lang, set_lang, add_fallback
+
+from webgriffith.model import meta
+
+class BaseController(WSGIController):
+
+    def __call__(self, environ, start_response):
+        &quot;&quot;&quot;Invoke the Controller&quot;&quot;&quot;
+        # WSGIController.__call__ dispatches to the Controller method
+        # the request is routed to. This routing information is
+        # available in environ['pylons.routes_dict']
+        try:
+            return WSGIController.__call__(self, environ, start_response)
+        finally:
+            meta.Session.remove()
+        
+    def __before__(self):
+        session_changed = False
+        if 'lang' not in session:
+            session['lang'] = config[&quot;view.language&quot;]
+            session_changed = True
+        if 'template' not in session:
+            session['template'] = config[&quot;view.template&quot;]
+            session_changed = True
+        if 'items_per_page' not in session:
+            session['items_per_page'] = config[&quot;view.items_per_page&quot;]
+
+        if session_changed:
+            session.save()
+
+        set_lang(session['lang'])
+        #add_fallback('griffith')
+
+        c.config = config
+        c.session = session
+        c.header = config[&quot;view.header&quot;]
+
+
+def render_def(template_name, name, **kwargs):
+    globs = pylons_globals()
+ 
+    if kwargs:
+        globs = globs.copy()
+        globs.update(kwargs)
+ 
+    template = globs['app_globals'].mako_lookup.get_template(template_name).get_def(name)
+    return template.render(**globs)

Added: online/trunk/webgriffith/lib/helpers.py
===================================================================
--- online/trunk/webgriffith/lib/helpers.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/lib/helpers.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,9 @@
+&quot;&quot;&quot;Helper functions
+
+Consists of functions to typically be used within templates, but also
+available to Controllers. This module is available to both as 'h'.
+&quot;&quot;&quot;
+# Import helpers as desired, or define your own, ie:
+# from webhelpers.html.tags import checkbox, password
+from webhelpers.html.tags import javascript_link
+from routes import url_for

Added: online/trunk/webgriffith/model/__init__.py
===================================================================
--- online/trunk/webgriffith/model/__init__.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/model/__init__.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,39 @@
+&quot;&quot;&quot;The application's model objects&quot;&quot;&quot;
+import sqlalchemy as sa
+from sqlalchemy import orm
+
+from webgriffith.model import meta
+from webgriffith.model.db import *
+
+def init_model(engine):
+    &quot;&quot;&quot;Call me before using any of the tables or classes in the model&quot;&quot;&quot;
+    ## Reflected tables must be defined and mapped here
+    #global reflected_table
+    #reflected_table = sa.Table(&quot;Reflected&quot;, meta.metadata, autoload=True,
+    #                           autoload_with=engine)
+    #orm.mapper(Reflected, reflected_table)
+
+    sm = orm.sessionmaker(autoflush=True, autocommit=False, bind=engine)
+
+    meta.engine = engine
+    meta.Session = orm.scoped_session(sm)
+
+
+## Non-reflected tables may be defined and mapped at module level
+#foo_table = sa.Table(&quot;Foo&quot;, meta.metadata,
+#    sa.Column(&quot;id&quot;, sa.types.Integer, primary_key=True),
+#    sa.Column(&quot;bar&quot;, sa.types.String(255), nullable=False),
+#    )
+#
+#class Foo(object):
+#    pass
+#
+#orm.mapper(Foo, foo_table)
+
+
+## Classes for reflected tables may be defined here, but the table and
+## mapping itself must be done in the init_model function
+#reflected_table = None
+#
+#class Reflected(object):
+#    pass

Added: online/trunk/webgriffith/model/db.py
===================================================================
--- online/trunk/webgriffith/model/db.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/model/db.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,432 @@
+# -*- coding: UTF-8 -*-
+# vim: fdm=marker
+__revision__ = '$Id: $'
+
+# Copyright (c) 2008 Vasco Nunes, Piotr O&#380;arowski
+#
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU Library General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
+# You may use and distribute this software under the terms of the
+# GNU General Public License, version 2 or later
+
+
+# XXX: keep stdlib and SQLAlchemy imports only in this file
+
+from sqlalchemy     import *
+from sqlalchemy.orm import mapper, relation, sessionmaker, validates
+import re
+import string
+import logging
+import marshal
+log = logging.getLogger(&quot;Griffith&quot;)
+
+EMAIL_PATTERN = re.compile('^[a-z0-9]+[.a-z0-9_+-]*@[a-z0-9_-]+(\.[a-z0-9_-]+)+$', re.IGNORECASE)
+metadata = MetaData()
+
+class DBTable(object):#{{{
+    def __init__(self, **kwargs):
+        for i in kwargs:
+            if hasattr(self, i):
+                setattr(self, i, kwargs[i])
+            else:
+                log.warn(&quot;%s.%s not set&quot;, self.__class__.__name__, i)
+    def __repr__(self):
+        return &quot;&lt;%s:%s&gt;&quot; % (self.__class__.__name__, self.name.encode('utf-8'))
+
+    @validates('name')
+    def _validate_name(self, key, name):
+        if not name or not name.strip():
+            log.warning(&quot;%s: empty name (%s)&quot;, self.__class__.__name__, name)
+            raise ValueError(_(&quot;Name cannot be empty&quot;))
+        return name.strip()
+
+    def remove_from_db(self):
+        dbtable_id = self.__dict__[self.__class__.__name__.lower() + '_id']
+        if dbtable_id&lt;1:
+            log.info(&quot;%s: none selected =&gt; none removed&quot;, self.__class__.__name__)
+            return False
+        tmp = None
+        if hasattr(self,'movies'):
+            tmp = getattr(self,'movies')
+        elif hasattr(self,'movielangs'):
+            tmp = getattr(self,'movielangs')
+        if tmp and len(tmp)&gt;0:
+            gutils.warning(self, msg=_(&quot;This item is in use.\nOperation aborted!&quot;))
+            return False
+        log.info(&quot;%s: removing '%s' (id=%s) from database...&quot;, self.__class__.__name__, self.name, dbtable_id)
+        self.delete()
+        try:
+            self.flush()
+        except exceptions.SQLError, e:
+            log.info(&quot;%s: remove_from_db: %s&quot;, self.__class__.__name__, e)
+            return False
+        #self.refresh()
+        return True
+    def update_in_db(self):
+        dbtable_id = self.__dict__[self.__class__.__name__.lower() + '_id']
+        if dbtable_id&lt;1:
+            log.info(&quot;%s: none selected =&gt; none updated&quot;, self.__class__.__name__)
+            return False
+        tmp = self.query.filter_by(name=self.name).first()
+        if tmp is not None and tmp is not self:
+            gutils.warning(self, msg=_(&quot;This name is already in use!&quot;))
+            return False
+        self.update()
+        try:
+            self.flush()
+        except exceptions.SQLError, e:
+            log.info(&quot;%s: update_in_db: %s&quot;, self.__class__.__name__, e)
+            return False
+        self.refresh()
+        return True
+     #}}}
+
+### clases #################################################### {{{
+class AChannel(DBTable):
+    pass
+
+class ACodec(DBTable):
+    pass
+
+class Collection(DBTable):
+    pass
+
+class Lang(DBTable):
+    pass
+
+class Medium(DBTable):
+    pass
+
+class Person(DBTable):
+    @validates('email')
+    def _validate_email(self, key, address):
+        address = address.strip()
+        if not EMAIL_PATTERN.match(address):
+            log.warning(&quot;%s: email address is not valid (%s)&quot;, self.__class__.__name__, address)
+            raise ValueError(_(&quot;E-mail address is not valid&quot;))
+        return address
+
+    @validates('phone')
+    def _digits_only(self, key, value):
+        &quot;&quot;&quot;removes non-digits&quot;&quot;&quot;
+        allchars = string.maketrans('', '')
+        delchars = allchars.translate(allchars, string.digits)
+        return unicode(str(value).translate(allchars, delchars))
+
+class Ratio(DBTable):
+    pass
+
+class SubFormat(DBTable):
+    pass
+
+class Tag(DBTable):
+    pass
+
+class VCodec(DBTable):
+    pass
+
+class Volume(DBTable):
+    pass
+
+class Poster(object):
+    def __init__(self, md5sum=None, data=None):
+        if md5sum and data:
+            if len(md5sum) == 32:
+                self.md5sum = md5sum
+                self.data = data
+            else:
+                log.error(&quot;md5sum has wrong size&quot;)
+
+    def __repr__(self):
+        return &quot;&lt;Poster(%s)&gt;&quot; % self.md5sum
+
+class Configuration(object):
+    def __repr__(self):
+        return &quot;&lt;Config:%s=%s&gt;&quot; % (self.param, self.value)
+
+class Loan(object):
+    def __repr__(self):
+        return &quot;&lt;Loan:%s (movie:%s person:%s)&gt;&quot; % (self.loan_id, self.movie_id, self.person_id)
+
+class Movie(object):
+    def __repr__(self):
+        return &quot;&lt;Movie:%s (number=%s)&gt;&quot; % (self.movie_id, self.number)
+    def __contains__(self, name):
+        if name in ('volume','collection','medium','vcodec','loans','tags','languages','lectors','dubbings','subtitles'): return True
+        else: return name in movies_table.columns
+    def __getitem__(self, name):
+        if name in self:
+            return getattr(self, name)
+        else: raise AttributeError, name
+
+class MovieLang(object):
+    def __init__(self, lang_id=None, type=None, acodec_id=None, achannel_id=None, subformat_id=None):
+        self.lang_id      = lang_id
+        self.type         = type
+        self.acodec_id    = acodec_id
+        self.achannel_id  = achannel_id
+        self.subformat_id = subformat_id
+    def __repr__(self):
+        return &quot;&lt;MovieLang:%s-%s (Type:%s ACodec:%s AChannel:%s SubFormat:%s)&gt;&quot; % \
+            (self.movie_id, self.lang_id, self.type, self.acodec_id, self.achannel_id, self.subformat_id)
+
+class MovieTag(object):
+    def __init__(self, tag_id=None):
+        self.tag_id = tag_id
+    def __repr__(self):
+        return &quot;&lt;MovieTag:%s-%s&gt;&quot; % (self.movie_id, self.tag_id)
+
+class Filter(object):
+    def __init__(self, name=None, cond=None):
+        if name and cond:
+            self.name = name
+            #self.data = marshal.dumps(cond)
+            self.conditions = cond
+    def __repr__(self):
+        return &quot;&lt;Filter(%s)&gt;&quot; % self.name
+    def _set_cond(self, cond):
+        self.data = marshal.dumps(cond)
+    def _get_cond(self):
+        return marshal.loads(self.data)
+    conditions = property(_get_cond, _set_cond)
+#}}}
+
+### table definitions ######################################### {{{
+movies_table = Table('movies', metadata,
+    Column('movie_id', Integer, primary_key = True),
+    Column('number', Integer, nullable=False, unique=True),
+    Column('collection_id', Integer, ForeignKey('collections.collection_id')),
+    Column('volume_id', Integer, ForeignKey('volumes.volume_id')),
+    Column('medium_id', Integer, ForeignKey('media.medium_id')),
+    Column('ratio_id', Integer, ForeignKey('ratios.ratio_id')),
+    Column('vcodec_id', Integer, ForeignKey('vcodecs.vcodec_id')),
+    Column('loaned', Boolean, nullable=False, default=False),
+    Column('seen', Boolean, nullable=False, default=False),
+    Column('rating', SmallInteger(2)),
+    Column('color', SmallInteger),
+    Column('cond', SmallInteger),    # MySQL will not accept name &quot;condition&quot;
+    Column('layers', SmallInteger),
+    Column('region', SmallInteger),
+    Column('media_num', SmallInteger),
+    Column('runtime', Integer),
+    Column('year', Integer),
+    Column('o_title', Unicode(256)),
+    Column('title', Unicode(256)),
+    Column('director', Unicode(256)),
+    Column('screenplay', Unicode(256)),
+    Column('cameraman', Unicode(256)),
+    Column('o_site', Unicode(256)),
+    Column('site', Unicode(256)),
+    Column('trailer', Unicode(256)),
+    Column('country', Unicode(128)),
+    Column('genre', Unicode(128)),
+    Column('image', Unicode(128)), # XXX: deprecated
+    Column('poster_md5', Unicode(32), ForeignKey('posters.md5sum')),
+    Column('studio', Unicode(128)),
+    Column('classification', Unicode(128)),
+    Column('cast', TEXT),
+    Column('plot', TEXT),
+    Column('notes', TEXT))
+
+loans_table = Table('loans', metadata,
+    Column('loan_id', Integer, primary_key=True),
+    Column('person_id', Integer, ForeignKey('people.person_id'), nullable=False),
+    Column('movie_id', Integer, ForeignKey('movies.movie_id'), nullable=False),
+    Column('volume_id', Integer, ForeignKey('volumes.volume_id')),
+    Column('collection_id', Integer, ForeignKey('collections.collection_id')),
+    Column('date', Date, nullable=False, default=func.current_date()),
+    Column('return_date', Date, nullable=True))
+
+people_table = Table('people', metadata,
+    Column('person_id', Integer, primary_key=True),
+    Column('name', Unicode(256), nullable=False, unique=True),
+    Column('email', Unicode(128)),
+    Column('phone', Unicode(64)))
+
+volumes_table = Table('volumes', metadata,
+    Column('volume_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True),
+    Column('loaned', Boolean, nullable=False, default=False))
+
+collections_table = Table('collections', metadata,
+    Column('collection_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True),
+    Column('loaned', Boolean, nullable=False, default=False))
+
+media_table = Table('media', metadata,
+    Column('medium_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+ratios_table = Table('ratios', metadata,
+    Column('ratio_id', Integer, primary_key=True),
+    Column('name', Unicode(5), nullable=False, unique=True))
+
+languages_table = Table('languages', metadata,
+    Column('lang_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+vcodecs_table = Table('vcodecs', metadata,
+    Column('vcodec_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+acodecs_table = Table('acodecs', metadata,
+    Column('acodec_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+achannels_table = Table('achannels', metadata,
+    Column('achannel_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+subformats_table = Table('subformats', metadata,
+    Column('subformat_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+tags_table = Table('tags', metadata,
+    Column('tag_id', Integer, primary_key=True),
+    Column('name', Unicode(64), nullable=False, unique=True))
+
+movie_lang_table = Table('movie_lang', metadata,
+    Column('ml_id', Integer, primary_key=True),
+    Column('type', SmallInteger), # 0: Original, 1:lector, 2:dubbing, 3:subtitle
+    Column('movie_id', Integer, ForeignKey('movies.movie_id'), nullable=False),
+    Column('lang_id', Integer, ForeignKey('languages.lang_id'), nullable=False),
+    Column('acodec_id', Integer, ForeignKey('acodecs.acodec_id')),
+    Column('achannel_id', Integer, ForeignKey('achannels.achannel_id')),
+    Column('subformat_id', Integer, ForeignKey('subformats.subformat_id')))
+
+movie_tag_table = Table('movie_tag', metadata,
+    Column('mt_id', Integer, primary_key=True),
+    Column('movie_id', Integer, ForeignKey('movies.movie_id')),
+    Column('tag_id', Integer, ForeignKey('tags.tag_id')))
+
+configuration_table = Table('configuration', metadata,
+    Column('param', Unicode(16), primary_key=True),
+    Column('value', Unicode(128), nullable=False))
+
+posters_table = Table('posters', metadata,
+    Column('md5sum', Unicode(32), primary_key=True),
+    Column('data', BLOB, nullable=False))
+
+filters_table = Table('filters', metadata,
+    Column('name', Unicode(64), primary_key=True),
+    Column('data', BLOB, nullable=False))
+
+tables = {
+    'movies':         movies_table,
+    'loans':          loans_table,
+    'people':         people_table,
+    'volumes':        volumes_table,
+    'collections':    collections_table,
+    'media':          media_table,
+    'ratios':         ratios_table,
+    'languages':      languages_table,
+    'vcodecs':        vcodecs_table,
+    'acodecs':        acodecs_table,
+    'achannels':      achannels_table,
+    'subformats':     subformats_table,
+    'tags':           tags_table,
+    'movie_lang':     movie_lang_table,
+    'movie_tag':      movie_tag_table,
+    'configuration':  configuration_table,
+    'posters':        posters_table,
+    'filters':        filters_table}
+#}}}
+
+### mappers ################################################### {{{
+mapper(Configuration, configuration_table)
+mapper(Volume, volumes_table, order_by=volumes_table.c.name, properties={
+    'movies': relation(Movie, backref='volume')})
+mapper(Collection, collections_table, order_by=collections_table.c.name, properties={
+    'movies': relation(Movie, backref='collection')})
+mapper(Medium, media_table, properties={
+    'movies': relation(Movie, backref='medium')})
+mapper(Ratio, ratios_table, properties={
+    'movies': relation(Movie, backref='ratio')})
+mapper(VCodec, vcodecs_table, properties={
+    'movies': relation(Movie, backref='vcodec')})
+mapper(Person, people_table, properties = {
+    'loans'    : relation(Loan, backref='person', cascade='all, delete-orphan')})
+mapper(MovieLang, movie_lang_table, primary_key=[movie_lang_table.c.ml_id], properties = {
+    'movie'    : relation(Movie),
+    'language' : relation(Lang),
+    'achannel' : relation(AChannel),
+    'acodec'   : relation(ACodec),
+    'subformat': relation(SubFormat)})
+mapper(ACodec, acodecs_table, properties={
+    'movielangs': relation(MovieLang)})
+mapper(AChannel, achannels_table, properties={
+    'movielangs': relation(MovieLang)})
+mapper(SubFormat, subformats_table, properties={
+    'movielangs': relation(MovieLang)})
+mapper(Lang, languages_table, properties={
+    'movielangs': relation(MovieLang)})
+mapper(MovieTag, movie_tag_table)
+mapper(Tag, tags_table, properties={'movietags': relation(MovieTag, backref='tag')})
+mapper(Loan, loans_table, properties = {
+    'volume'    : relation(Volume),
+    'collection': relation(Collection)})
+mapper(Movie, movies_table, order_by=movies_table.c.number , properties = {
+    'loans'     : relation(Loan, backref='movie', cascade='all, delete-orphan'),
+    #'tags'       : relation(Tag, cascade='all, delete-orphan', secondary=movie_tag,
+    'tags'      : relation(Tag, secondary=movie_tag_table,
+                           primaryjoin=movies_table.c.movie_id==movie_tag_table.c.movie_id,
+                           secondaryjoin=movie_tag_table.c.tag_id==tags_table.c.tag_id),
+    'languages' : relation(MovieLang, cascade='all, delete-orphan')})
+mapper(Poster, posters_table, properties={
+    'movies': relation(Movie)})
+mapper(Filter, filters_table)
+#}}}
+
+
+
+# for debugging (run: ipython db.py)
+if __name__ == '__main__':
+    import os.path
+    import sqlalchemy
+    logging.basicConfig()
+    log.setLevel(logging.INFO)
+    log.info(&quot;SQLAlchemy version: %s&quot;, sqlalchemy.__version__)
+
+    ### ENGINE ###
+    engine_mem = create_engine('<A HREF="sqlite:///:memory:">sqlite:///:memory:</A>', echo=False)
+
+    # create tables
+    metadata.create_all(engine_mem)
+
+    ### MEMORY SESSION ###
+    # create a configured &quot;Session&quot; class
+    Session = sessionmaker(bind=engine_mem)
+    # create a Session
+    sess_mem = Session()
+
+
+    griffith_dir = os.path.expanduser(&quot;~/.griffith/&quot;)
+    url = &quot;<A HREF="sqlite:///%s">sqlite:///%s</A>&quot; % os.path.join(griffith_dir, 'griffith.db')
+    engine_my = create_engine(url, echo=False)
+    Session2 = sessionmaker(bind=engine_my)
+    sess_my = Session2()
+
+    print &quot;\nAvailable variables:&quot;
+    print &quot;sess_my:  %s&quot; % sess_my
+    print &quot;sess_mem: %s&quot; % sess_mem
+
+    movie1_my = sess_my.query(Movie).first()
+    if movie1_my:
+        movie1_mem = sess_mem.merge(movie1_my)
+        movie1_mem.title = u'updated movie title'
+        sess_mem.add(movie1_mem)
+        sess_mem.commit()
+        print &quot;movie1_my:  %s - title: %s&quot; % (movie1_my, movie1_my.title)
+        print &quot;movie1_mem: %s - title: %s&quot; % (movie1_mem, movie1_mem.title)

Added: online/trunk/webgriffith/model/meta.py
===================================================================
--- online/trunk/webgriffith/model/meta.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/model/meta.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,16 @@
+&quot;&quot;&quot;SQLAlchemy Metadata and Session object&quot;&quot;&quot;
+from sqlalchemy import MetaData
+from sqlalchemy.orm import scoped_session, sessionmaker
+
+#__all__ = ['engine', 'metadata', 'Session']
+__all__ = ['Session', 'metadata']
+
+# SQLAlchemy database engine.  Updated by model.init_model()
+engine = None
+
+# SQLAlchemy session manager.  Updated by model.init_model()
+Session = None
+
+# Global metadata. If you have multiple databases with overlapping table
+# names, you'll need a metadata for each database
+metadata = MetaData()

Added: online/trunk/webgriffith/public/bg.png
===================================================================
(Binary files differ)


Property changes on: online/trunk/webgriffith/public/bg.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: online/trunk/webgriffith/public/js/jquery.min.js
===================================================================
--- online/trunk/webgriffith/public/js/jquery.min.js	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/public/js/jquery.min.js	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,32 @@
+/*
+ * jQuery 1.2.6 - New Wave Javascript
+ *
+ * Copyright (c) 2008 John Resig (jquery.com)
+ * Dual licensed under the MIT (MIT-LICENSE.txt)
+ * and GPL (GPL-LICENSE.txt) licenses.
+ *
+ * $Date: 2008-05-24 14:22:17 -0400 (Sat, 24 May 2008) $
+ * $Rev: 5685 $
+ */
+(function(){var _jQuery=window.jQuery,_$=window.$;var jQuery=window.jQuery=window.$=function(selector,context){return new jQuery.fn.init(selector,context);};var quickExpr=/^[^&lt;]*(&lt;(.|\s)+&gt;)[^&gt;]*$|^#(\w+)$/,isSimple=/^.[^:#\[\.]*$/,undefined;jQuery.fn=jQuery.prototype={init:function(selector,context){selector=selector||document;if(selector.nodeType){this[0]=selector;this.length=1;return this;}if(typeof selector==&quot;string&quot;){var match=quickExpr.exec(selector);if(match&amp;&amp;(match[1]||!context)){if(match[1])selector=jQuery.clean([match[1]],context);else{var elem=document.getElementById(match[3]);if(elem){if(elem.id!=match[3])return jQuery().find(selector);return jQuery(elem);}selector=[];}}else
+return jQuery(context).find(selector);}else if(jQuery.isFunction(selector))return jQuery(document)[jQuery.fn.ready?&quot;ready&quot;:&quot;load&quot;](selector);return this.setArray(jQuery.makeArray(selector));},jquery:&quot;1.2.6&quot;,size:function(){return this.length;},length:0,get:function(num){return num==undefined?jQuery.makeArray(this):this[num];},pushStack:function(elems){var ret=jQuery(elems);ret.prevObject=this;return ret;},setArray:function(elems){this.length=0;Array.prototype.push.apply(this,elems);return this;},each:function(callback,args){return jQuery.each(this,callback,args);},index:function(elem){var ret=-1;return jQuery.inArray(elem&amp;&amp;elem.jquery?elem[0]:elem,this);},attr:function(name,value,type){var options=name;if(name.constructor==String)if(value===undefined)return this[0]&amp;&amp;jQuery[type||&quot;attr&quot;](this[0],name);else{options={};options[name]=value;}return this.each(function(i){for(name in options)jQuery.attr(type?this.style:this,name,jQuery.prop(this,options[name],type,i,name));});},cs!
 s:function(key,value){if((key=='width'||key=='height')&amp;&amp;parseFloat(value)&lt;0)value=undefined;return this.attr(key,value,&quot;curCSS&quot;);},text:function(text){if(typeof text!=&quot;object&quot;&amp;&amp;text!=null)return this.empty().append((this[0]&amp;&amp;this[0].ownerDocument||document).createTextNode(text));var ret=&quot;&quot;;jQuery.each(text||this,function(){jQuery.each(this.childNodes,function(){if(this.nodeType!=8)ret+=this.nodeType!=1?this.nodeValue:jQuery.fn.text([this]);});});return ret;},wrapAll:function(html){if(this[0])jQuery(html,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){var elem=this;while(elem.firstChild)elem=elem.firstChild;return elem;}).append(this);return this;},wrapInner:function(html){return this.each(function(){jQuery(this).contents().wrapAll(html);});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},append:function(){return this.domManip(arguments,true,false,function(elem){if(this.nodeType==1)this.appendChild(elem);});},prepend:funct!
 ion(){return this.domManip(arguments,true,true,function(elem){!
 if(this.
nodeType==1)this.insertBefore(elem,this.firstChild);});},before:function(){return this.domManip(arguments,false,false,function(elem){this.parentNode.insertBefore(elem,this);});},after:function(){return this.domManip(arguments,false,true,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});},end:function(){return this.prevObject||jQuery([]);},find:function(selector){var elems=jQuery.map(this,function(elem){return jQuery.find(selector,elem);});return this.pushStack(/[^+&gt;] [^+&gt;]/.test(selector)||selector.indexOf(&quot;..&quot;)&gt;-1?jQuery.unique(elems):elems);},clone:function(events){var ret=this.map(function(){if(jQuery.browser.msie&amp;&amp;!jQuery.isXMLDoc(this)){var clone=this.cloneNode(true),container=document.createElement(&quot;div&quot;);container.appendChild(clone);return jQuery.clean([container.innerHTML])[0];}else
+return this.cloneNode(true);});var clone=ret.find(&quot;*&quot;).andSelf().each(function(){if(this[expando]!=undefined)this[expando]=null;});if(events===true)this.find(&quot;*&quot;).andSelf().each(function(i){if(this.nodeType==3)return;var events=jQuery.data(this,&quot;events&quot;);for(var type in events)for(var handler in events[type])jQuery.event.add(clone[i],type,events[type][handler],events[type][handler].data);});return ret;},filter:function(selector){return this.pushStack(jQuery.isFunction(selector)&amp;&amp;jQuery.grep(this,function(elem,i){return selector.call(elem,i);})||jQuery.multiFilter(selector,this));},not:function(selector){if(selector.constructor==String)if(isSimple.test(selector))return this.pushStack(jQuery.multiFilter(selector,this,true));else
+selector=jQuery.multiFilter(selector,this);var isArrayLike=selector.length&amp;&amp;selector[selector.length-1]!==undefined&amp;&amp;!selector.nodeType;return this.filter(function(){return isArrayLike?jQuery.inArray(this,selector)&lt;0:this!=selector;});},add:function(selector){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),typeof selector=='string'?jQuery(selector):jQuery.makeArray(selector))));},is:function(selector){return!!selector&amp;&amp;jQuery.multiFilter(selector,this).length&gt;0;},hasClass:function(selector){return this.is(&quot;.&quot;+selector);},val:function(value){if(value==undefined){if(this.length){var elem=this[0];if(jQuery.nodeName(elem,&quot;select&quot;)){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==&quot;select-one&quot;;if(index&lt;0)return null;for(var i=one?index:0,max=one?index+1:options.length;i&lt;max;i++){var option=options[i];if(option.selected){value=jQuery.browser.msie&amp;&amp;!option.attributes.value.specified?option.text:option.value;if(one)return value;values.push(valu!
 e);}}return values;}else
+return(this[0].value||&quot;&quot;).replace(/\r/g,&quot;&quot;);}return undefined;}if(value.constructor==Number)value+='';return this.each(function(){if(this.nodeType!=1)return;if(value.constructor==Array&amp;&amp;/radio|checkbox/.test(this.type))this.checked=(jQuery.inArray(this.value,value)&gt;=0||jQuery.inArray(this.name,value)&gt;=0);else if(jQuery.nodeName(this,&quot;select&quot;)){var values=jQuery.makeArray(value);jQuery(&quot;option&quot;,this).each(function(){this.selected=(jQuery.inArray(this.value,values)&gt;=0||jQuery.inArray(this.text,values)&gt;=0);});if(!values.length)this.selectedIndex=-1;}else
+this.value=value;});},html:function(value){return value==undefined?(this[0]?this[0].innerHTML:null):this.empty().append(value);},replaceWith:function(value){return this.after(value).remove();},eq:function(i){return this.slice(i,i+1);},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},andSelf:function(){return this.add(this.prevObject);},data:function(key,value){var parts=key.split(&quot;.&quot;);parts[1]=parts[1]?&quot;.&quot;+parts[1]:&quot;&quot;;if(value===undefined){var data=this.triggerHandler(&quot;getData&quot;+parts[1]+&quot;!&quot;,[parts[0]]);if(data===undefined&amp;&amp;this.length)data=jQuery.data(this[0],key);return data===undefined&amp;&amp;parts[1]?this.data(parts[0]):data;}else
+return this.trigger(&quot;setData&quot;+parts[1]+&quot;!&quot;,[parts[0],value]).each(function(){jQuery.data(this,key,value);});},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});},domManip:function(args,table,reverse,callback){var clone=this.length&gt;1,elems;return this.each(function(){if(!elems){elems=jQuery.clean(args,this.ownerDocument);if(reverse)elems.reverse();}var obj=this;if(table&amp;&amp;jQuery.nodeName(this,&quot;table&quot;)&amp;&amp;jQuery.nodeName(elems[0],&quot;tr&quot;))obj=this.getElementsByTagName(&quot;tbody&quot;)[0]||this.appendChild(this.ownerDocument.createElement(&quot;tbody&quot;));var scripts=jQuery([]);jQuery.each(elems,function(){var elem=clone?jQuery(this).clone(true)[0]:this;if(jQuery.nodeName(elem,&quot;script&quot;))scripts=scripts.add(elem);else{if(elem.nodeType==1)scripts=scripts.add(jQuery(&quot;script&quot;,elem).remove());callback.call(obj,elem);}});scripts.each(evalScript);});}};jQuery.fn.init.prototype=jQuery.fn;function evalScript(i,elem){if(elem.src)jQuery.ajax({url:elem.src,async:false,dataTyp!
 e:&quot;script&quot;});else
+jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||&quot;&quot;);if(elem.parentNode)elem.parentNode.removeChild(elem);}function now(){return+new Date;}jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options;if(target.constructor==Boolean){deep=target;target=arguments[1]||{};i=2;}if(typeof target!=&quot;object&quot;&amp;&amp;typeof target!=&quot;function&quot;)target={};if(length==i){target=this;--i;}for(;i&lt;length;i++)if((options=arguments[i])!=null)for(var name in options){var src=target[name],copy=options[name];if(target===copy)continue;if(deep&amp;&amp;copy&amp;&amp;typeof copy==&quot;object&quot;&amp;&amp;!copy.nodeType)target[name]=jQuery.extend(deep,src||(copy.length!=null?[]:{}),copy);else if(copy!==undefined)target[name]=copy;}return target;};var expando=&quot;jQuery&quot;+now(),uuid=0,windowData={},exclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,defaultView=document.defaultView||{};jQuery.extend({noConflict:function(deep){window.$=_$;if(deep)window.jQuery=_jQuery;!
 return jQuery;},isFunction:function(fn){return!!fn&amp;&amp;typeof fn!=&quot;string&quot;&amp;&amp;!fn.nodeName&amp;&amp;fn.constructor!=Array&amp;&amp;/^[\s[]?function/.test(fn+&quot;&quot;);},isXMLDoc:function(elem){return elem.documentElement&amp;&amp;!elem.body||elem.tagName&amp;&amp;elem.ownerDocument&amp;&amp;!elem.ownerDocument.body;},globalEval:function(data){data=jQuery.trim(data);if(data){var head=document.getElementsByTagName(&quot;head&quot;)[0]||document.documentElement,script=document.createElement(&quot;script&quot;);script.type=&quot;text/javascript&quot;;if(jQuery.browser.msie)script.text=data;else
+script.appendChild(document.createTextNode(data));head.insertBefore(script,head.firstChild);head.removeChild(script);}},nodeName:function(elem,name){return elem.nodeName&amp;&amp;elem.nodeName.toUpperCase()==name.toUpperCase();},cache:{},data:function(elem,name,data){elem=elem==window?windowData:elem;var id=elem[expando];if(!id)id=elem[expando]=++uuid;if(name&amp;&amp;!jQuery.cache[id])jQuery.cache[id]={};if(data!==undefined)jQuery.cache[id][name]=data;return name?jQuery.cache[id][name]:id;},removeData:function(elem,name){elem=elem==window?windowData:elem;var id=elem[expando];if(name){if(jQuery.cache[id]){delete jQuery.cache[id][name];name=&quot;&quot;;for(name in jQuery.cache[id])break;if(!name)jQuery.removeData(elem);}}else{try{delete elem[expando];}catch(e){if(elem.removeAttribute)elem.removeAttribute(expando);}delete jQuery.cache[id];}},each:function(object,callback,args){var name,i=0,length=object.length;if(args){if(length==undefined){for(name in object)if(callback.apply(object[name],args)===fa!
 lse)break;}else
+for(;i&lt;length;)if(callback.apply(object[i++],args)===false)break;}else{if(length==undefined){for(name in object)if(callback.call(object[name],name,object[name])===false)break;}else
+for(var value=object[0];i&lt;length&amp;&amp;callback.call(value,i,value)!==false;value=object[++i]){}}return object;},prop:function(elem,value,type,i,name){if(jQuery.isFunction(value))value=value.call(elem,i);return value&amp;&amp;value.constructor==Number&amp;&amp;type==&quot;curCSS&quot;&amp;&amp;!exclude.test(name)?value+&quot;px&quot;:value;},className:{add:function(elem,classNames){jQuery.each((classNames||&quot;&quot;).split(/\s+/),function(i,className){if(elem.nodeType==1&amp;&amp;!jQuery.className.has(elem.className,className))elem.className+=(elem.className?&quot; &quot;:&quot;&quot;)+className;});},remove:function(elem,classNames){if(elem.nodeType==1)elem.className=classNames!=undefined?jQuery.grep(elem.className.split(/\s+/),function(className){return!jQuery.className.has(classNames,className);}).join(&quot; &quot;):&quot;&quot;;},has:function(elem,className){return jQuery.inArray(className,(elem.className||elem).toString().split(/\s+/))&gt;-1;}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];!
 }callback.call(elem);for(var name in options)elem.style[name]=old[name];},css:function(elem,name,force){if(name==&quot;width&quot;||name==&quot;height&quot;){var val,props={position:&quot;absolute&quot;,visibility:&quot;hidden&quot;,display:&quot;block&quot;},which=name==&quot;width&quot;?[&quot;Left&quot;,&quot;Right&quot;]:[&quot;Top&quot;,&quot;Bottom&quot;];function getWH(){val=name==&quot;width&quot;?elem.offsetWidth:elem.offsetHeight;var padding=0,border=0;jQuery.each(which,function(){padding+=parseFloat(jQuery.curCSS(elem,&quot;padding&quot;+this,true))||0;border+=parseFloat(jQuery.curCSS(elem,&quot;border&quot;+this+&quot;Width&quot;,true))||0;});val-=Math.round(padding+border);}if(jQuery(elem).is(&quot;:visible&quot;))getWH();else
+jQuery.swap(elem,props,getWH);return Math.max(0,val);}return jQuery.curCSS(elem,name,force);},curCSS:function(elem,name,force){var ret,style=elem.style;function color(elem){if(!jQuery.browser.safari)return false;var ret=defaultView.getComputedStyle(elem,null);return!ret||ret.getPropertyValue(&quot;color&quot;)==&quot;&quot;;}if(name==&quot;opacity&quot;&amp;&amp;jQuery.browser.msie){ret=jQuery.attr(style,&quot;opacity&quot;);return ret==&quot;&quot;?&quot;1&quot;:ret;}if(jQuery.browser.opera&amp;&amp;name==&quot;display&quot;){var save=style.outline;style.outline=&quot;0 solid black&quot;;style.outline=save;}if(name.match(/float/i))name=styleFloat;if(!force&amp;&amp;style&amp;&amp;style[name])ret=style[name];else if(defaultView.getComputedStyle){if(name.match(/float/i))name=&quot;float&quot;;name=name.replace(/([A-Z])/g,&quot;-$1&quot;).toLowerCase();var computedStyle=defaultView.getComputedStyle(elem,null);if(computedStyle&amp;&amp;!color(elem))ret=computedStyle.getPropertyValue(name);else{var swap=[],stack=[],a=elem,i=0;for(;a&amp;&amp;color(a);a=a.parentNode)stack.unshift(a);for(;i&lt;stack.length;i++)if(color(stack[i]!
 )){swap[i]=stack[i].style.display;stack[i].style.display=&quot;block&quot;;}ret=name==&quot;display&quot;&amp;&amp;swap[stack.length-1]!=null?&quot;none&quot;:(computedStyle&amp;&amp;computedStyle.getPropertyValue(name))||&quot;&quot;;for(i=0;i&lt;swap.length;i++)if(swap[i]!=null)stack[i].style.display=swap[i];}if(name==&quot;opacity&quot;&amp;&amp;ret==&quot;&quot;)ret=&quot;1&quot;;}else if(elem.currentStyle){var camelCase=name.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!/^\d+(px)?$/i.test(ret)&amp;&amp;/^\d/.test(ret)){var left=style.left,rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;style.left=ret||0;ret=style.pixelLeft+&quot;px&quot;;style.left=left;elem.runtimeStyle.left=rsLeft;}}return ret;},clean:function(elems,context){var ret=[];context=context||document;if(typeof context.createElement=='undefined')context=context.ownerDocument||context[0]&amp;&amp;context[0].ownerDocument||document;jQuery.each(elems,function(i,elem){if(!elem)return;if(elem.constructor==Number)elem+=''!
 ;if(typeof elem==&quot;string&quot;){elem=elem.replace(/(&lt;(\w+)[^&gt;]*?)\/!
 &gt;/g,func
tion(all,front,tag){return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?all:front+&quot;&gt;&lt;/&quot;+tag+&quot;&gt;&quot;;});var tags=jQuery.trim(elem).toLowerCase(),div=context.createElement(&quot;div&quot;);var wrap=!tags.indexOf(&quot;&lt;opt&quot;)&amp;&amp;[1,&quot;&lt;select multiple='multiple'&gt;&quot;,&quot;&lt;/select&gt;&quot;]||!tags.indexOf(&quot;&lt;leg&quot;)&amp;&amp;[1,&quot;&lt;fieldset&gt;&quot;,&quot;&lt;/fieldset&gt;&quot;]||tags.match(/^&lt;(thead|tbody|tfoot|colg|cap)/)&amp;&amp;[1,&quot;&lt;table&gt;&quot;,&quot;&lt;/table&gt;&quot;]||!tags.indexOf(&quot;&lt;tr&quot;)&amp;&amp;[2,&quot;&lt;table&gt;&lt;tbody&gt;&quot;,&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;]||(!tags.indexOf(&quot;&lt;td&quot;)||!tags.indexOf(&quot;&lt;th&quot;))&amp;&amp;[3,&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;,&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;]||!tags.indexOf(&quot;&lt;col&quot;)&amp;&amp;[2,&quot;&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;&quot;,&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;]||jQuery.browser.msie&amp;&amp;[1,&quot;div&lt;div&gt;&quot;,&quot;&lt;/div&gt;&quot;]||[0,&quot;&quot;,&quot;&quot;];div.innerHTML=wrap[1]+elem+wrap[2];while(wrap[0]--)div=div.lastChild;if(jQuery.browser.msie){var tbody=!tags.indexOf(&quot;&lt;table&quot;)&amp;&amp;tags.indexOf(&quot;&lt;tbody&quot;)&lt;0?div.firstChild&amp;&amp;div.firstChild.childNodes:wrap[1]==&quot;&lt;table&gt;&quot;&amp;&amp;tags.indexOf(&quot;&lt;tbody&quot;)&lt;0?div.childNodes:[];for(var j=tbody.length-1;j!
 &gt;=0;--j)if(jQuery.nodeName(tbody[j],&quot;tbody&quot;)&amp;&amp;!tbody[j].childNodes.length)tbody[j].parentNode.removeChild(tbody[j]);if(/^\s/.test(elem))div.insertBefore(context.createTextNode(elem.match(/^\s*/)[0]),div.firstChild);}elem=jQuery.makeArray(div.childNodes);}if(elem.length===0&amp;&amp;(!jQuery.nodeName(elem,&quot;form&quot;)&amp;&amp;!jQuery.nodeName(elem,&quot;select&quot;)))return;if(elem[0]==undefined||jQuery.nodeName(elem,&quot;form&quot;)||elem.options)ret.push(elem);else
+ret=jQuery.merge(ret,elem);});return ret;},attr:function(elem,name,value){if(!elem||elem.nodeType==3||elem.nodeType==8)return undefined;var notxml=!jQuery.isXMLDoc(elem),set=value!==undefined,msie=jQuery.browser.msie;name=notxml&amp;&amp;jQuery.props[name]||name;if(elem.tagName){var special=/href|src|style/.test(name);if(name==&quot;selected&quot;&amp;&amp;jQuery.browser.safari)elem.parentNode.selectedIndex;if(name in elem&amp;&amp;notxml&amp;&amp;!special){if(set){if(name==&quot;type&quot;&amp;&amp;jQuery.nodeName(elem,&quot;input&quot;)&amp;&amp;elem.parentNode)throw&quot;type property can't be changed&quot;;elem[name]=value;}if(jQuery.nodeName(elem,&quot;form&quot;)&amp;&amp;elem.getAttributeNode(name))return elem.getAttributeNode(name).nodeValue;return elem[name];}if(msie&amp;&amp;notxml&amp;&amp;name==&quot;style&quot;)return jQuery.attr(elem.style,&quot;cssText&quot;,value);if(set)elem.setAttribute(name,&quot;&quot;+value);var attr=msie&amp;&amp;notxml&amp;&amp;special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr;}if(msie&amp;&amp;name==&quot;opacity&quot;){if(set){elem.zoom=1;elem.filter=(elem.filter||&quot;&quot;).repla!
 ce(/alpha\([^)]*\)/,&quot;&quot;)+(parseInt(value)+''==&quot;NaN&quot;?&quot;&quot;:&quot;alpha(opacity=&quot;+value*100+&quot;)&quot;);}return elem.filter&amp;&amp;elem.filter.indexOf(&quot;opacity=&quot;)&gt;=0?(parseFloat(elem.filter.match(/opacity=([^)]*)/)[1])/100)+'':&quot;&quot;;}name=name.replace(/-([a-z])/ig,function(all,letter){return letter.toUpperCase();});if(set)elem[name]=value;return elem[name];},trim:function(text){return(text||&quot;&quot;).replace(/^\s+|\s+$/g,&quot;&quot;);},makeArray:function(array){var ret=[];if(array!=null){var i=array.length;if(i==null||array.split||array.setInterval||array.call)ret[0]=array;else
+while(i)ret[--i]=array[i];}return ret;},inArray:function(elem,array){for(var i=0,length=array.length;i&lt;length;i++)if(array[i]===elem)return i;return-1;},merge:function(first,second){var i=0,elem,pos=first.length;if(jQuery.browser.msie){while(elem=second[i++])if(elem.nodeType!=8)first[pos++]=elem;}else
+while(elem=second[i++])first[pos++]=elem;return first;},unique:function(array){var ret=[],done={};try{for(var i=0,length=array.length;i&lt;length;i++){var id=jQuery.data(array[i]);if(!done[id]){done[id]=true;ret.push(array[i]);}}}catch(e){ret=array;}return ret;},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i&lt;length;i++)if(!inv!=!callback(elems[i],i))ret.push(elems[i]);return ret;},map:function(elems,callback){var ret=[];for(var i=0,length=elems.length;i&lt;length;i++){var value=callback(elems[i],i);if(value!=null)ret[ret.length]=value;}return ret.concat.apply([],ret);}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&amp;&amp;!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&amp;&amp;!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?&quot;styleFloat&quot;:&quot;cssFloat&quot;;jQ!
 uery.extend({boxModel:!jQuery.browser.msie||document.compatMode==&quot;CSS1Compat&quot;,props:{&quot;for&quot;:&quot;htmlFor&quot;,&quot;class&quot;:&quot;className&quot;,&quot;float&quot;:styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,readonly:&quot;readOnly&quot;,maxlength:&quot;maxLength&quot;,cellspacing:&quot;cellSpacing&quot;}});jQuery.each({parent:function(elem){return elem.parentNode;},parents:function(elem){return jQuery.dir(elem,&quot;parentNode&quot;);},next:function(elem){return jQuery.nth(elem,2,&quot;nextSibling&quot;);},prev:function(elem){return jQuery.nth(elem,2,&quot;previousSibling&quot;);},nextAll:function(elem){return jQuery.dir(elem,&quot;nextSibling&quot;);},prevAll:function(elem){return jQuery.dir(elem,&quot;previousSibling&quot;);},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,&quot;iframe&quot;)?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(selector){var ret!
 =jQuery.map(this,fn);if(selector&amp;&amp;typeof selector==&quot;string&quot;)re!
 t=jQuery
.multiFilter(selector,ret);return this.pushStack(jQuery.unique(ret));};});jQuery.each({appendTo:&quot;append&quot;,prependTo:&quot;prepend&quot;,insertBefore:&quot;before&quot;,insertAfter:&quot;after&quot;,replaceAll:&quot;replaceWith&quot;},function(name,original){jQuery.fn[name]=function(){var args=arguments;return this.each(function(){for(var i=0,length=args.length;i&lt;length;i++)jQuery(args[i])[original](this);});};});jQuery.each({removeAttr:function(name){jQuery.attr(this,name,&quot;&quot;);if(this.nodeType==1)this.removeAttribute(name);},addClass:function(classNames){jQuery.className.add(this,classNames);},removeClass:function(classNames){jQuery.className.remove(this,classNames);},toggleClass:function(classNames){jQuery.className[jQuery.className.has(this,classNames)?&quot;remove&quot;:&quot;add&quot;](this,classNames);},remove:function(selector){if(!selector||jQuery.filter(selector,[this]).r.length){jQuery(&quot;*&quot;,this).add(this).each(function(){jQuery.event.remove(this);jQuery.removeData(this);});if(this.parentNode)this.parentNode.removeChild(this);}!
 },empty:function(){jQuery(&quot;&gt;*&quot;,this).remove();while(this.firstChild)this.removeChild(this.firstChild);}},function(name,fn){jQuery.fn[name]=function(){return this.each(fn,arguments);};});jQuery.each([&quot;Height&quot;,&quot;Width&quot;],function(i,name){var type=name.toLowerCase();jQuery.fn[type]=function(size){return this[0]==window?jQuery.browser.opera&amp;&amp;document.body[&quot;client&quot;+name]||jQuery.browser.safari&amp;&amp;window[&quot;inner&quot;+name]||document.compatMode==&quot;CSS1Compat&quot;&amp;&amp;document.documentElement[&quot;client&quot;+name]||document.body[&quot;client&quot;+name]:this[0]==document?Math.max(Math.max(document.body[&quot;scroll&quot;+name],document.documentElement[&quot;scroll&quot;+name]),Math.max(document.body[&quot;offset&quot;+name],document.documentElement[&quot;offset&quot;+name])):size==undefined?(this.length?jQuery.css(this[0],type):null):this.css(type,size.constructor==String?size:size+&quot;px&quot;);};});function num(elem,prop){return elem[0]&amp;&amp;parseInt(jQuery.curCSS(elem[0],prop,true),10)||0;}var chars=jQuery.browser.safari&amp;&amp;parseInt(jQuery.browser.version)&lt;417?&quot;(?:!
 [\\w*_-]|\\\\.)&quot;:&quot;(?:[\\w\u0128-\uFFFF*_-]|\\\\.)&quot;,quickChild=!
 new RegE
xp(&quot;^&gt;\\s*(&quot;+chars+&quot;+)&quot;),quickID=new RegExp(&quot;^(&quot;+chars+&quot;+)(#)(&quot;+chars+&quot;+)&quot;),quickClass=new RegExp(&quot;^([#.]?)(&quot;+chars+&quot;*)&quot;);jQuery.extend({expr:{&quot;&quot;:function(a,i,m){return m[2]==&quot;*&quot;||jQuery.nodeName(a,m[2]);},&quot;#&quot;:function(a,i,m){return a.getAttribute(&quot;id&quot;)==m[2];},&quot;:&quot;:{lt:function(a,i,m){return i&lt;m[3]-0;},gt:function(a,i,m){return i&gt;m[3]-0;},nth:function(a,i,m){return m[3]-0==i;},eq:function(a,i,m){return m[3]-0==i;},first:function(a,i){return i==0;},last:function(a,i,m,r){return i==r.length-1;},even:function(a,i){return i%2==0;},odd:function(a,i){return i%2;},&quot;first-child&quot;:function(a){return a.parentNode.getElementsByTagName(&quot;*&quot;)[0]==a;},&quot;last-child&quot;:function(a){return jQuery.nth(a.parentNode.lastChild,1,&quot;previousSibling&quot;)==a;},&quot;only-child&quot;:function(a){return!jQuery.nth(a.parentNode.lastChild,2,&quot;previousSibling&quot;);},parent:function(a){return a.firstChild;},empty:function(a){return!a.firstChild;},contains:function(a,i,m){return(a.textContent||a.innerText||jQuery(a).text()||&quot;&quot;).i!
 ndexOf(m[3])&gt;=0;},visible:function(a){return&quot;hidden&quot;!=a.type&amp;&amp;jQuery.css(a,&quot;display&quot;)!=&quot;none&quot;&amp;&amp;jQuery.css(a,&quot;visibility&quot;)!=&quot;hidden&quot;;},hidden:function(a){return&quot;hidden&quot;==a.type||jQuery.css(a,&quot;display&quot;)==&quot;none&quot;||jQuery.css(a,&quot;visibility&quot;)==&quot;hidden&quot;;},enabled:function(a){return!a.disabled;},disabled:function(a){return a.disabled;},checked:function(a){return a.checked;},selected:function(a){return a.selected||jQuery.attr(a,&quot;selected&quot;);},text:function(a){return&quot;text&quot;==a.type;},radio:function(a){return&quot;radio&quot;==a.type;},checkbox:function(a){return&quot;checkbox&quot;==a.type;},file:function(a){return&quot;file&quot;==a.type;},password:function(a){return&quot;password&quot;==a.type;},submit:function(a){return&quot;submit&quot;==a.type;},image:function(a){return&quot;image&quot;==a.type;},reset:function(a){return&quot;reset&quot;==a.type;},button:function(a){return&quot;button&quot;==a.type||jQuery.nodeName(a,&quot;button&quot;);},input:function(a){return/input|select|textarea|button/i.test(a.nodeName);},has:function(a,i,m){return jQuery.find(m[3],a).length;},h!
 eader:function(a){return/h\d/i.test(a.nodeName);},animated:fun!
 ction(a)
{return jQuery.grep(jQuery.timers,function(fn){return a==fn.elem;}).length;}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?&quot;?)(.*?)\4 *\]/,/^(:)([\w-]+)\(&quot;?'?(.*?(\(.*?\))?[^(]*?)&quot;?'?\)/,new RegExp(&quot;^([:.#]*)(&quot;+chars+&quot;+)&quot;)],multiFilter:function(expr,elems,not){var old,cur=[];while(expr&amp;&amp;expr!=old){old=expr;var f=jQuery.filter(expr,elems,not);expr=f.t.replace(/^\s*,\s*/,&quot;&quot;);cur=not?elems=f.r:jQuery.merge(cur,f.r);}return cur;},find:function(t,context){if(typeof t!=&quot;string&quot;)return[t];if(context&amp;&amp;context.nodeType!=1&amp;&amp;context.nodeType!=9)return[];context=context||document;var ret=[context],done=[],last,nodeName;while(t&amp;&amp;last!=t){var r=[];last=t;t=jQuery.trim(t);var foundToken=false,re=quickChild,m=re.exec(t);if(m){nodeName=m[1].toUpperCase();for(var i=0;ret[i];i++)for(var c=ret[i].firstChild;c;c=c.nextSibling)if(c.nodeType==1&amp;&amp;(nodeName==&quot;*&quot;||c.nodeName.toUpperCase()==nodeName))r.push(c);ret=r;t=t.replace(re,&quot;&quot;);if(t.indexOf(&quot; &quot;)==0)continue;foundToken=true;}else{re=/^([&gt;+~])\s*(!
 \w*)/i;if((m=re.exec(t))!=null){r=[];var merge={};nodeName=m[2].toUpperCase();m=m[1];for(var j=0,rl=ret.length;j&lt;rl;j++){var n=m==&quot;~&quot;||m==&quot;+&quot;?ret[j].nextSibling:ret[j].firstChild;for(;n;n=n.nextSibling)if(n.nodeType==1){var id=jQuery.data(n);if(m==&quot;~&quot;&amp;&amp;merge[id])break;if(!nodeName||n.nodeName.toUpperCase()==nodeName){if(m==&quot;~&quot;)merge[id]=true;r.push(n);}if(m==&quot;+&quot;)break;}}ret=r;t=jQuery.trim(t.replace(re,&quot;&quot;));foundToken=true;}}if(t&amp;&amp;!foundToken){if(!t.indexOf(&quot;,&quot;)){if(context==ret[0])ret.shift();done=jQuery.merge(done,ret);r=ret=[context];t=&quot; &quot;+t.substr(1,t.length);}else{var re2=quickID;var m=re2.exec(t);if(m){m=[0,m[2],m[3],m[1]];}else{re2=quickClass;m=re2.exec(t);}m[2]=m[2].replace(/\\/g,&quot;&quot;);var elem=ret[ret.length-1];if(m[1]==&quot;#&quot;&amp;&amp;elem&amp;&amp;elem.getElementById&amp;&amp;!jQuery.isXMLDoc(elem)){var oid=elem.getElementById(m[2]);if((jQuery.browser.msie||jQuery.browser.opera)&amp;&amp;oid&amp;&amp;typeof oid.id==&quot;string&quot;&amp;&amp;oid.id!=m[2])oid=jQuery('[@id=&quot;'+m[2]+'&quot;]',elem)[0];ret=r=oid&amp;&amp;(!m[3]||jQuery.nodeN!
 ame(oid,m[3]))?[oid]:[];}else{for(var i=0;ret[i];i++){var tag=!
 m[1]==&quot;#
&quot;&amp;&amp;m[3]?m[3]:m[1]!=&quot;&quot;||m[0]==&quot;&quot;?&quot;*&quot;:m[2];if(tag==&quot;*&quot;&amp;&amp;ret[i].nodeName.toLowerCase()==&quot;object&quot;)tag=&quot;param&quot;;r=jQuery.merge(r,ret[i].getElementsByTagName(tag));}if(m[1]==&quot;.&quot;)r=jQuery.classFilter(r,m[2]);if(m[1]==&quot;#&quot;){var tmp=[];for(var i=0;r[i];i++)if(r[i].getAttribute(&quot;id&quot;)==m[2]){tmp=[r[i]];break;}r=tmp;}ret=r;}t=t.replace(re2,&quot;&quot;);}}if(t){var val=jQuery.filter(t,r);ret=r=val.r;t=jQuery.trim(val.t);}}if(t)ret=[];if(ret&amp;&amp;context==ret[0])ret.shift();done=jQuery.merge(done,ret);return done;},classFilter:function(r,m,not){m=&quot; &quot;+m+&quot; &quot;;var tmp=[];for(var i=0;r[i];i++){var pass=(&quot; &quot;+r[i].className+&quot; &quot;).indexOf(m)&gt;=0;if(!not&amp;&amp;pass||not&amp;&amp;!pass)tmp.push(r[i]);}return tmp;},filter:function(t,r,not){var last;while(t&amp;&amp;t!=last){last=t;var p=jQuery.parse,m;for(var i=0;p[i];i++){m=p[i].exec(t);if(m){t=t.substring(m[0].length);m[2]=m[2].replace(/\\/g,&quot;&quot;);break;}}if(!m)break;if(m[1]==&quot;:&quot;&amp;&amp;m[2]==&quot;not&quot;)r=isSimple.test(m[3])?jQuery.filter(m[3],r,true).r:jQuery(r).not(m[3]);else if(m[1]==&quot;.&quot;)r=jQue!
 ry.classFilter(r,m[2],not);else if(m[1]==&quot;[&quot;){var tmp=[],type=m[3];for(var i=0,rl=r.length;i&lt;rl;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];if(z==null||/href|src|selected/.test(m[2]))z=jQuery.attr(a,m[2])||'';if((type==&quot;&quot;&amp;&amp;!!z||type==&quot;=&quot;&amp;&amp;z==m[5]||type==&quot;!=&quot;&amp;&amp;z!=m[5]||type==&quot;^=&quot;&amp;&amp;z&amp;&amp;!z.indexOf(m[5])||type==&quot;$=&quot;&amp;&amp;z.substr(z.length-m[5].length)==m[5]||(type==&quot;*=&quot;||type==&quot;~=&quot;)&amp;&amp;z.indexOf(m[5])&gt;=0)^not)tmp.push(a);}r=tmp;}else if(m[1]==&quot;:&quot;&amp;&amp;m[2]==&quot;nth-child&quot;){var merge={},tmp=[],test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(m[3]==&quot;even&quot;&amp;&amp;&quot;2n&quot;||m[3]==&quot;odd&quot;&amp;&amp;&quot;2n+1&quot;||!/\D/.test(m[3])&amp;&amp;&quot;0n+&quot;+m[3]||m[3]),first=(test[1]+(test[2]||1))-0,last=test[3]-0;for(var i=0,rl=r.length;i&lt;rl;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){var c=1;for(var n=parentNode.firstChild;n;n=n.nextSibling)if(n.nodeType==1)n.nodeIndex=c++;merge[id]=true;}var add=false;if(first==0){if(node.nodeIndex==last)add=true;}else if((node.nodeIndex-last)%first==0&amp;&amp;(node.nodeIndex-last)!
 /first&gt;=0)add=true;if(add^not)tmp.push(node);}r=tmp;}else{var !
 fn=jQuer
y.expr[m[1]];if(typeof fn==&quot;object&quot;)fn=fn[m[2]];if(typeof fn==&quot;string&quot;)fn=eval(&quot;false||function(a,i){return &quot;+fn+&quot;;}&quot;);r=jQuery.grep(r,function(elem,i){return fn(elem,i,m,r);},not);}}return{r:r,t:t};},dir:function(elem,dir){var matched=[],cur=elem[dir];while(cur&amp;&amp;cur!=document){if(cur.nodeType==1)matched.push(cur);cur=cur[dir];}return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir])if(cur.nodeType==1&amp;&amp;++num==result)break;return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType==1&amp;&amp;n!=elem)r.push(n);}return r;}});jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType==3||elem.nodeType==8)return;if(jQuery.browser.msie&amp;&amp;elem.setInterval)elem=window;if(!handler.guid)handler.guid=this.guid++;if(data!=undefined){var fn=handler;handler=this.proxy(fn,function(){return fn.apply(this,arguments);});handler.data=data;}var events=jQuery.data(elem,&quot;events&quot;)||jQuery.data(elem,&quot;events&quot;,{}),handle=jQuery.d!
 ata(elem,&quot;handle&quot;)||jQuery.data(elem,&quot;handle&quot;,function(){if(typeof jQuery!=&quot;undefined&quot;&amp;&amp;!jQuery.event.triggered)return jQuery.event.handle.apply(arguments.callee.elem,arguments);});handle.elem=elem;jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(&quot;.&quot;);type=parts[0];handler.type=parts[1];var handlers=events[type];if(!handlers){handlers=events[type]={};if(!jQuery.event.special[type]||jQuery.event.special[type].setup.call(elem)===false){if(elem.addEventListener)elem.addEventListener(type,handle,false);else if(elem.attachEvent)elem.attachEvent(&quot;on&quot;+type,handle);}}handlers[handler.guid]=handler;jQuery.event.global[type]=true;});elem=null;},guid:1,global:{},remove:function(elem,types,handler){if(elem.nodeType==3||elem.nodeType==8)return;var events=jQuery.data(elem,&quot;events&quot;),ret,index;if(events){if(types==undefined||(typeof types==&quot;string&quot;&amp;&amp;types.charAt(0)==&quot;.&quot;))for(var type in events)this.remove(elem,type+(types||&quot;&quot;));else{if(types.type){handler=types.hand!
 ler;types=types.type;}jQuery.each(types.split(/\s+/),function(!
 index,ty
pe){var parts=type.split(&quot;.&quot;);type=parts[0];if(events[type]){if(handler)delete events[type][handler.guid];else
+for(handler in events[type])if(!parts[1]||events[type][handler].type==parts[1])delete events[type][handler];for(ret in events[type])break;if(!ret){if(!jQuery.event.special[type]||jQuery.event.special[type].teardown.call(elem)===false){if(elem.removeEventListener)elem.removeEventListener(type,jQuery.data(elem,&quot;handle&quot;),false);else if(elem.detachEvent)elem.detachEvent(&quot;on&quot;+type,jQuery.data(elem,&quot;handle&quot;));}ret=null;delete events[type];}}});}for(ret in events)break;if(!ret){var handle=jQuery.data(elem,&quot;handle&quot;);if(handle)handle.elem=null;jQuery.removeData(elem,&quot;events&quot;);jQuery.removeData(elem,&quot;handle&quot;);}}},trigger:function(type,data,elem,donative,extra){data=jQuery.makeArray(data);if(type.indexOf(&quot;!&quot;)&gt;=0){type=type.slice(0,-1);var exclusive=true;}if(!elem){if(this.global[type])jQuery(&quot;*&quot;).add([window,document]).trigger(type,data);}else{if(elem.nodeType==3||elem.nodeType==8)return undefined;var val,ret,fn=jQuery.isFunction(elem[type]||null),event=!data[0]||!data[0].preventDefau!
 lt;if(event){data.unshift({type:type,target:elem,preventDefault:function(){},stopPropagation:function(){},timeStamp:now()});data[0][expando]=true;}data[0].type=type;if(exclusive)data[0].exclusive=true;var handle=jQuery.data(elem,&quot;handle&quot;);if(handle)val=handle.apply(elem,data);if((!fn||(jQuery.nodeName(elem,'a')&amp;&amp;type==&quot;click&quot;))&amp;&amp;elem[&quot;on&quot;+type]&amp;&amp;elem[&quot;on&quot;+type].apply(elem,data)===false)val=false;if(event)data.shift();if(extra&amp;&amp;jQuery.isFunction(extra)){ret=extra.apply(elem,val==null?data:data.concat(val));if(ret!==undefined)val=ret;}if(fn&amp;&amp;donative!==false&amp;&amp;val!==false&amp;&amp;!(jQuery.nodeName(elem,'a')&amp;&amp;type==&quot;click&quot;)){this.triggered=true;try{elem[type]();}catch(e){}}this.triggered=false;}return val;},handle:function(event){var val,ret,namespace,all,handlers;event=arguments[0]=jQuery.event.fix(event||window.event);namespace=event.type.split(&quot;.&quot;);event.type=namespace[0];namespace=namespace[1];all=!namespace&amp;&amp;!event.exclusive;handlers=(jQuery.data(this,&quot;events&quot;)||{})[event.type];f!
 or(var j in handlers){var handler=handlers[j];if(all||handler.!
 type==na
mespace){event.handler=handler;event.data=handler.data;ret=handler.apply(this,arguments);if(val!==false)val=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}return val;},fix:function(event){if(event[expando]==true)return event;var originalEvent=event;event={originalEvent:originalEvent};var props=&quot;altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which&quot;.split(&quot; &quot;);for(var i=props.length;i;i--)event[props[i]]=originalEvent[props[i]];event[expando]=true;event.preventDefault=function(){if(originalEvent.preventDefault)originalEvent.preventDefault();originalEvent.returnValue=false;};event.stopPropagation=function(){if(originalEvent.stopPropagation)originalEvent.stopPropagation();originalEvent.cancelB!
 ubble=true;};event.timeStamp=event.timeStamp||now();if(!event.target)event.target=event.srcElement||document;if(event.target.nodeType==3)event.target=event.target.parentNode;if(!event.relatedTarget&amp;&amp;event.fromElement)event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement;if(event.pageX==null&amp;&amp;event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&amp;&amp;doc.scrollLeft||body&amp;&amp;body.scrollLeft||0)-(doc.clientLeft||0);event.pageY=event.clientY+(doc&amp;&amp;doc.scrollTop||body&amp;&amp;body.scrollTop||0)-(doc.clientTop||0);}if(!event.which&amp;&amp;((event.charCode||event.charCode===0)?event.charCode:event.keyCode))event.which=event.charCode||event.keyCode;if(!event.metaKey&amp;&amp;event.ctrlKey)event.metaKey=event.ctrlKey;if(!event.which&amp;&amp;event.button)event.which=(event.button&amp;1?1:(event.button&amp;2?3:(event.button&amp;4?2:0)));return event;},proxy:function(fn,proxy){proxy.guid=fn.guid=fn.guid||proxy.guid||this.guid++;return proxy;},special:!
 {ready:{setup:function(){bindReady();return;},teardown:functio!
 n(){retu
rn;}},mouseenter:{setup:function(){if(jQuery.browser.msie)return false;jQuery(this).bind(&quot;mouseover&quot;,jQuery.event.special.mouseenter.handler);return true;},teardown:function(){if(jQuery.browser.msie)return false;jQuery(this).unbind(&quot;mouseover&quot;,jQuery.event.special.mouseenter.handler);return true;},handler:function(event){if(withinElement(event,this))return true;event.type=&quot;mouseenter&quot;;return jQuery.event.handle.apply(this,arguments);}},mouseleave:{setup:function(){if(jQuery.browser.msie)return false;jQuery(this).bind(&quot;mouseout&quot;,jQuery.event.special.mouseleave.handler);return true;},teardown:function(){if(jQuery.browser.msie)return false;jQuery(this).unbind(&quot;mouseout&quot;,jQuery.event.special.mouseleave.handler);return true;},handler:function(event){if(withinElement(event,this))return true;event.type=&quot;mouseleave&quot;;return jQuery.event.handle.apply(this,arguments);}}}};jQuery.fn.extend({bind:function(type,data,fn){return type==&quot;unload&quot;?this.one(type,data,fn):this.each(function(){jQu!
 ery.event.add(this,type,fn||data,fn&amp;&amp;data);});},one:function(type,data,fn){var one=jQuery.event.proxy(fn||data,function(event){jQuery(this).unbind(event,one);return(fn||data).apply(this,arguments);});return this.each(function(){jQuery.event.add(this,type,one,fn&amp;&amp;data);});},unbind:function(type,fn){return this.each(function(){jQuery.event.remove(this,type,fn);});},trigger:function(type,data,fn){return this.each(function(){jQuery.event.trigger(type,data,this,true,fn);});},triggerHandler:function(type,data,fn){return this[0]&amp;&amp;jQuery.event.trigger(type,data,this[0],false,fn);},toggle:function(fn){var args=arguments,i=1;while(i&lt;args.length)jQuery.event.proxy(fn,args[i++]);return this.click(jQuery.event.proxy(fn,function(event){this.lastToggle=(this.lastToggle||0)%i;event.preventDefault();return args[this.lastToggle++].apply(this,arguments)||false;}));},hover:function(fnOver,fnOut){return this.bind('mouseenter',fnOver).bind('mouseleave',fnOut);},ready:function(fn){bindReady();if(!
 jQuery.isReady)fn.call(document,jQuery);else
+jQuery.readyList.push(function(){return fn.call(this,jQuery);});return this;}});jQuery.extend({isReady:false,readyList:[],ready:function(){if(!jQuery.isReady){jQuery.isReady=true;if(jQuery.readyList){jQuery.each(jQuery.readyList,function(){this.call(document);});jQuery.readyList=null;}jQuery(document).triggerHandler(&quot;ready&quot;);}}});var readyBound=false;function bindReady(){if(readyBound)return;readyBound=true;if(document.addEventListener&amp;&amp;!jQuery.browser.opera)document.addEventListener(&quot;DOMContentLoaded&quot;,jQuery.ready,false);if(jQuery.browser.msie&amp;&amp;window==top)(function(){if(jQuery.isReady)return;try{document.documentElement.doScroll(&quot;left&quot;);}catch(error){setTimeout(arguments.callee,0);return;}jQuery.ready();})();if(jQuery.browser.opera)document.addEventListener(&quot;DOMContentLoaded&quot;,function(){if(jQuery.isReady)return;for(var i=0;i&lt;document.styleSheets.length;i++)if(document.styleSheets[i].disabled){setTimeout(arguments.callee,0);return;}jQuery.ready();},false);if(jQuery.browser!
 .safari){var numStyles;(function(){if(jQuery.isReady)return;if(document.readyState!=&quot;loaded&quot;&amp;&amp;document.readyState!=&quot;complete&quot;){setTimeout(arguments.callee,0);return;}if(numStyles===undefined)numStyles=jQuery(&quot;style, link[rel=stylesheet]&quot;).length;if(document.styleSheets.length!=numStyles){setTimeout(arguments.callee,0);return;}jQuery.ready();})();}jQuery.event.add(window,&quot;load&quot;,jQuery.ready);}jQuery.each((&quot;blur,focus,load,resize,scroll,unload,click,dblclick,&quot;+&quot;mousedown,mouseup,mousemove,mouseover,mouseout,change,select,&quot;+&quot;submit,keydown,keypress,keyup,error&quot;).split(&quot;,&quot;),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name);};});var withinElement=function(event,elem){var parent=event.relatedTarget;while(parent&amp;&amp;parent!=elem)try{parent=parent.parentNode;}catch(error){parent=elem;}return parent==elem;};jQuery(window).bind(&quot;unload&quot;,function(){jQuery(&quot;*&quot;).add(document).unbind();});jQuery.fn.extend({_load:jQuery.fn.load,load:function(url,pa!
 rams,callback){if(typeof url!='string')return this._load(url);!
 var off=
url.indexOf(&quot; &quot;);if(off&gt;=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}callback=callback||function(){};var type=&quot;GET&quot;;if(params)if(jQuery.isFunction(params)){callback=params;params=null;}else{params=jQuery.param(params);type=&quot;POST&quot;;}var self=this;jQuery.ajax({url:url,type:type,dataType:&quot;html&quot;,data:params,complete:function(res,status){if(status==&quot;success&quot;||status==&quot;notmodified&quot;)self.html(selector?jQuery(&quot;&lt;div/&gt;&quot;).append(res.responseText.replace(/&lt;script(.|\s)*?\/script&gt;/g,&quot;&quot;)).find(selector):res.responseText);self.each(callback,[res.responseText,status,res]);}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,&quot;form&quot;)?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&amp;&amp;!this.disabled&amp;&amp;(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type));}).map(function(i,elem){var val=jQuery(this).v!
 al();return val==null?null:val.constructor==Array?jQuery.map(val,function(val,i){return{name:elem.name,value:val};}):{name:elem.name,value:val};}).get();}});jQuery.each(&quot;ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend&quot;.split(&quot;,&quot;),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);};});var jsc=now();jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data=null;}return jQuery.ajax({type:&quot;GET&quot;,url:url,data:data,success:callback,dataType:type});},getScript:function(url,callback){return jQuery.get(url,null,callback,&quot;script&quot;);},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,&quot;json&quot;);},post:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data={};}return jQuery.ajax({type:&quot;POST&quot;,url:url,data:data,success:callback,dataType:type});},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings);},ajaxSettings:{url:location.href,global:true,type:&quot;GET&quot;,timeout!
 :0,contentType:&quot;application/x-www-form-urlencoded&quot;,processData!
 :true,as
ync:true,data:null,username:null,password:null,accepts:{xml:&quot;application/xml, text/xml&quot;,html:&quot;text/html&quot;,script:&quot;text/javascript, application/javascript&quot;,json:&quot;application/json, text/javascript&quot;,text:&quot;text/plain&quot;,_default:&quot;*/*&quot;}},lastModified:{},ajax:function(s){s=jQuery.extend(true,s,jQuery.extend(true,{},jQuery.ajaxSettings,s));var jsonp,jsre=/=\?(&amp;|$)/g,status,data,type=s.type.toUpperCase();if(s.data&amp;&amp;s.processData&amp;&amp;typeof s.data!=&quot;string&quot;)s.data=jQuery.param(s.data);if(s.dataType==&quot;jsonp&quot;){if(type==&quot;GET&quot;){if(!s.url.match(jsre))s.url+=(s.url.match(/\?/)?&quot;&amp;&quot;:&quot;?&quot;)+(s.jsonp||&quot;callback&quot;)+&quot;=?&quot;;}else if(!s.data||!s.data.match(jsre))s.data=(s.data?s.data+&quot;&amp;&quot;:&quot;&quot;)+(s.jsonp||&quot;callback&quot;)+&quot;=?&quot;;s.dataType=&quot;json&quot;;}if(s.dataType==&quot;json&quot;&amp;&amp;(s.data&amp;&amp;s.data.match(jsre)||s.url.match(jsre))){jsonp=&quot;jsonp&quot;+jsc++;if(s.data)s.data=(s.data+&quot;&quot;).replace(jsre,&quot;=&quot;+jsonp+&quot;$1&quot;);s.url=s.url.replace(jsre,&quot;=&quot;+jsonp+&quot;$1&quot;);s.dataType=&quot;script&quot;;window[jsonp]=function(tmp){data=tmp;success();complete();window[!
 jsonp]=undefined;try{delete window[jsonp];}catch(e){}if(head)head.removeChild(script);};}if(s.dataType==&quot;script&quot;&amp;&amp;s.cache==null)s.cache=false;if(s.cache===false&amp;&amp;type==&quot;GET&quot;){var ts=now();var ret=s.url.replace(/(\?|&amp;)_=.*?(&amp;|$)/,&quot;$1_=&quot;+ts+&quot;$2&quot;);s.url=ret+((ret==s.url)?(s.url.match(/\?/)?&quot;&amp;&quot;:&quot;?&quot;)+&quot;_=&quot;+ts:&quot;&quot;);}if(s.data&amp;&amp;type==&quot;GET&quot;){s.url+=(s.url.match(/\?/)?&quot;&amp;&quot;:&quot;?&quot;)+s.data;s.data=null;}if(s.global&amp;&amp;!jQuery.active++)jQuery.event.trigger(&quot;ajaxStart&quot;);var remote=/^(?:\w+:)?\/\/([^\/?#]+)/;if(s.dataType==&quot;script&quot;&amp;&amp;type==&quot;GET&quot;&amp;&amp;remote.test(s.url)&amp;&amp;remote.exec(s.url)[1]!=location.host){var head=document.getElementsByTagName(&quot;head&quot;)[0];var script=document.createElement(&quot;script&quot;);script.src=s.url;if(s.scriptCharset)script.charset=s.scriptCharset;if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&amp;&amp;(!this.readyState||this.readyState==&quot;loaded&quot;||this.readyState==&quot;complete&quot;)){done=true;success();complete();head.removeChild(script);}};}head.appendChild(!
 script);return undefined;}var requestDone=false;var xhr=window!
 .ActiveX
Object?new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;):new XMLHttpRequest();if(s.username)xhr.open(type,s.url,s.async,s.username,s.password);else
+xhr.open(type,s.url,s.async);try{if(s.data)xhr.setRequestHeader(&quot;Content-Type&quot;,s.contentType);if(s.ifModified)xhr.setRequestHeader(&quot;If-Modified-Since&quot;,jQuery.lastModified[s.url]||&quot;Thu, 01 Jan 1970 00:00:00 GMT&quot;);xhr.setRequestHeader(&quot;X-Requested-With&quot;,&quot;XMLHttpRequest&quot;);xhr.setRequestHeader(&quot;Accept&quot;,s.dataType&amp;&amp;s.accepts[s.dataType]?s.accepts[s.dataType]+&quot;, */*&quot;:s.accepts._default);}catch(e){}if(s.beforeSend&amp;&amp;s.beforeSend(xhr,s)===false){s.global&amp;&amp;jQuery.active--;xhr.abort();return false;}if(s.global)jQuery.event.trigger(&quot;ajaxSend&quot;,[xhr,s]);var onreadystatechange=function(isTimeout){if(!requestDone&amp;&amp;xhr&amp;&amp;(xhr.readyState==4||isTimeout==&quot;timeout&quot;)){requestDone=true;if(ival){clearInterval(ival);ival=null;}status=isTimeout==&quot;timeout&quot;&amp;&amp;&quot;timeout&quot;||!jQuery.httpSuccess(xhr)&amp;&amp;&quot;error&quot;||s.ifModified&amp;&amp;jQuery.httpNotModified(xhr,s.url)&amp;&amp;&quot;notmodified&quot;||&quot;success&quot;;if(status==&quot;success&quot;){try{data=jQuery.httpData(xhr,s.dataType,s.dataFilter);}catch(e){status=&quot;parsererror&quot;;}}if(status==&quot;success!
 &quot;){var modRes;try{modRes=xhr.getResponseHeader(&quot;Last-Modified&quot;);}catch(e){}if(s.ifModified&amp;&amp;modRes)jQuery.lastModified[s.url]=modRes;if(!jsonp)success();}else
+jQuery.handleError(s,xhr,status);complete();if(s.async)xhr=null;}};if(s.async){var ival=setInterval(onreadystatechange,13);if(s.timeout&gt;0)setTimeout(function(){if(xhr){xhr.abort();if(!requestDone)onreadystatechange(&quot;timeout&quot;);}},s.timeout);}try{xhr.send(s.data);}catch(e){jQuery.handleError(s,xhr,null,e);}if(!s.async)onreadystatechange();function success(){if(s.success)s.success(data,status);if(s.global)jQuery.event.trigger(&quot;ajaxSuccess&quot;,[xhr,s]);}function complete(){if(s.complete)s.complete(xhr,status);if(s.global)jQuery.event.trigger(&quot;ajaxComplete&quot;,[xhr,s]);if(s.global&amp;&amp;!--jQuery.active)jQuery.event.trigger(&quot;ajaxStop&quot;);}return xhr;},handleError:function(s,xhr,status,e){if(s.error)s.error(xhr,status,e);if(s.global)jQuery.event.trigger(&quot;ajaxError&quot;,[xhr,s,e]);},active:0,httpSuccess:function(xhr){try{return!xhr.status&amp;&amp;location.protocol==&quot;file:&quot;||(xhr.status&gt;=200&amp;&amp;xhr.status&lt;300)||xhr.status==304||xhr.status==1223||jQuery.browser.safari&amp;&amp;xhr.status==undefined;}catch(e){}return!
  false;},httpNotModified:function(xhr,url){try{var xhrRes=xhr.getResponseHeader(&quot;Last-Modified&quot;);return xhr.status==304||xhrRes==jQuery.lastModified[url]||jQuery.browser.safari&amp;&amp;xhr.status==undefined;}catch(e){}return false;},httpData:function(xhr,type,filter){var ct=xhr.getResponseHeader(&quot;content-type&quot;),xml=type==&quot;xml&quot;||!type&amp;&amp;ct&amp;&amp;ct.indexOf(&quot;xml&quot;)&gt;=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&amp;&amp;data.documentElement.tagName==&quot;parsererror&quot;)throw&quot;parsererror&quot;;if(filter)data=filter(data,type);if(type==&quot;script&quot;)jQuery.globalEval(data);if(type==&quot;json&quot;)data=eval(&quot;(&quot;+data+&quot;)&quot;);return data;},param:function(a){var s=[];if(a.constructor==Array||a.jquery)jQuery.each(a,function(){s.push(encodeURIComponent(this.name)+&quot;=&quot;+encodeURIComponent(this.value));});else
+for(var j in a)if(a[j]&amp;&amp;a[j].constructor==Array)jQuery.each(a[j],function(){s.push(encodeURIComponent(j)+&quot;=&quot;+encodeURIComponent(this));});else
+s.push(encodeURIComponent(j)+&quot;=&quot;+encodeURIComponent(jQuery.isFunction(a[j])?a[j]():a[j]));return s.join(&quot;&amp;&quot;).replace(/%20/g,&quot;+&quot;);}});jQuery.fn.extend({show:function(speed,callback){return speed?this.animate({height:&quot;show&quot;,width:&quot;show&quot;,opacity:&quot;show&quot;},speed,callback):this.filter(&quot;:hidden&quot;).each(function(){this.style.display=this.oldblock||&quot;&quot;;if(jQuery.css(this,&quot;display&quot;)==&quot;none&quot;){var elem=jQuery(&quot;&lt;&quot;+this.tagName+&quot; /&gt;&quot;).appendTo(&quot;body&quot;);this.style.display=elem.css(&quot;display&quot;);if(this.style.display==&quot;none&quot;)this.style.display=&quot;block&quot;;elem.remove();}}).end();},hide:function(speed,callback){return speed?this.animate({height:&quot;hide&quot;,width:&quot;hide&quot;,opacity:&quot;hide&quot;},speed,callback):this.filter(&quot;:visible&quot;).each(function(){this.oldblock=this.oldblock||jQuery.css(this,&quot;display&quot;);this.style.display=&quot;none&quot;;}).end();},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){return jQuery.isFunction(fn)&amp;&amp;jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):fn?this.animate({height:&quot;toggle&quot;,width:&quot;t!
 oggle&quot;,opacity:&quot;toggle&quot;},fn,fn2):this.each(function(){jQuery(this)[jQuery(this).is(&quot;:hidden&quot;)?&quot;show&quot;:&quot;hide&quot;]();});},slideDown:function(speed,callback){return this.animate({height:&quot;show&quot;},speed,callback);},slideUp:function(speed,callback){return this.animate({height:&quot;hide&quot;},speed,callback);},slideToggle:function(speed,callback){return this.animate({height:&quot;toggle&quot;},speed,callback);},fadeIn:function(speed,callback){return this.animate({opacity:&quot;show&quot;},speed,callback);},fadeOut:function(speed,callback){return this.animate({opacity:&quot;hide&quot;},speed,callback);},fadeTo:function(speed,to,callback){return this.animate({opacity:to},speed,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);return this[optall.queue===false?&quot;each&quot;:&quot;queue&quot;](function(){if(this.nodeType!=1)return false;var opt=jQuery.extend({},optall),p,hidden=jQuery(this).is(&quot;:hidden&quot;),self=this;for(p in prop){if(prop[p]==&quot;hide&quot;&amp;&amp;hidden||prop[p]==&quot;show&quot;&amp;&amp;!hidden)return opt!
 .complete.call(this);if(p==&quot;height&quot;||p==&quot;width&quot;){opt.display=j!
 Query.cs
s(this,&quot;display&quot;);opt.overflow=this.style.overflow;}}if(opt.overflow!=null)this.style.overflow=&quot;hidden&quot;;opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(/toggle|show|hide/.test(val))e[val==&quot;toggle&quot;?hidden?&quot;show&quot;:&quot;hide&quot;:val](prop);else{var parts=val.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||&quot;px&quot;;if(unit!=&quot;px&quot;){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit;}if(parts[1])end=((parts[1]==&quot;-=&quot;?-1:1)*end)+start;e.custom(start,end,unit);}else
+e.custom(start,val,&quot;&quot;);}});return true;});},queue:function(type,fn){if(jQuery.isFunction(type)||(type&amp;&amp;type.constructor==Array)){fn=type;type=&quot;fx&quot;;}if(!type||(typeof type==&quot;string&quot;&amp;&amp;!fn))return queue(this[0],type);return this.each(function(){if(fn.constructor==Array)queue(this,type,fn);else{queue(this,type).push(fn);if(queue(this,type).length==1)fn.call(this);}});},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue)this.queue([]);this.each(function(){for(var i=timers.length-1;i&gt;=0;i--)if(timers[i].elem==this){if(gotoEnd)timers[i](true);timers.splice(i,1);}});if(!gotoEnd)this.dequeue();return this;}});var queue=function(elem,type,array){if(elem){type=type||&quot;fx&quot;;var q=jQuery.data(elem,type+&quot;queue&quot;);if(!q||array)q=jQuery.data(elem,type+&quot;queue&quot;,jQuery.makeArray(array));}return q;};jQuery.fn.dequeue=function(type){type=type||&quot;fx&quot;;return this.each(function(){var q=queue(this,type);q.shift();if(q.length)q[0].call(this);});};jQuery.extend({speed:function(speed!
 ,easing,fn){var opt=speed&amp;&amp;speed.constructor==Object?speed:{complete:fn||!fn&amp;&amp;easing||jQuery.isFunction(speed)&amp;&amp;speed,duration:speed,easing:fn&amp;&amp;easing||easing&amp;&amp;easing.constructor!=Function&amp;&amp;easing};opt.duration=(opt.duration&amp;&amp;opt.duration.constructor==Number?opt.duration:jQuery.fx.speeds[opt.duration])||jQuery.fx.speeds.def;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false)jQuery(this).dequeue();if(jQuery.isFunction(opt.old))opt.old.call(this);};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;}},timers:[],timerId:null,fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig)options.orig={};}});jQuery.fx.prototype={update:function(){if(this.options.step)this.options.step.call(this.elem,this.now,this);(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if(this.prop==&quot;height&quot;||this.prop==&quot;width&quot;)t!
 his.elem.style.display=&quot;block&quot;;},cur:function(force){if(this.e!
 lem[this
.prop]!=null&amp;&amp;this.elem.style[this.prop]==null)return this.elem[this.prop];var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&amp;&amp;r&gt;-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0;},custom:function(from,to,unit){this.startTime=now();this.start=from;this.end=to;this.unit=unit||this.unit||&quot;px&quot;;this.now=this.start;this.pos=this.state=0;this.update();var self=this;function t(gotoEnd){return self.step(gotoEnd);}t.elem=this.elem;jQuery.timers.push(t);if(jQuery.timerId==null){jQuery.timerId=setInterval(function(){var timers=jQuery.timers;for(var i=0;i&lt;timers.length;i++)if(!timers[i]())timers.splice(i--,1);if(!timers.length){clearInterval(jQuery.timerId);jQuery.timerId=null;}},13);}},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.show=true;this.custom(0,this.cur());if(this.prop==&quot;width&quot;||this.prop==&quot;height&quot;)this.elem.style[this.prop]=&quot;1px&quot;;jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=j!
 Query.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var t=now();if(gotoEnd||t&gt;this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var done=true;for(var i in this.options.curAnim)if(this.options.curAnim[i]!==true)done=false;if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(jQuery.css(this.elem,&quot;display&quot;)==&quot;none&quot;)this.elem.style.display=&quot;block&quot;;}if(this.options.hide)this.elem.style.display=&quot;none&quot;;if(this.options.hide||this.options.show)for(var p in this.options.curAnim)jQuery.attr(this.elem.style,p,this.options.orig[p]);}if(done)this.options.complete.call(this.elem);return false;}else{var n=t-this.startTime;this.state=n/this.options.duration;this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?&quot;swing&quot;:&quot;linear&quot;)](this.state,n,0,1,this.options.dura!
 tion);this.now=this.start+((this.end-this.start)*this.pos);thi!
 s.update
();}return true;}};jQuery.extend(jQuery.fx,{speeds:{slow:600,fast:200,def:400},step:{scrollLeft:function(fx){fx.elem.scrollLeft=fx.now;},scrollTop:function(fx){fx.elem.scrollTop=fx.now;},opacity:function(fx){jQuery.attr(fx.elem.style,&quot;opacity&quot;,fx.now);},_default:function(fx){fx.elem.style[fx.prop]=fx.now+fx.unit;}}});jQuery.fn.offset=function(){var left=0,top=0,elem=this[0],results;if(elem)with(jQuery.browser){var parent=elem.parentNode,offsetChild=elem,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&amp;&amp;parseInt(version)&lt;522&amp;&amp;!/adobeair/i.test(userAgent),css=jQuery.curCSS,fixed=css(elem,&quot;position&quot;)==&quot;fixed&quot;;if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));add(-doc.documentElement.clientLeft,-doc.documentElement.clientTop);}else{add(elem.offsetLeft,elem.offsetTop);while(offsetParent){add(offsetParen!
 t.offsetLeft,offsetParent.offsetTop);if(mozilla&amp;&amp;!/^t(able|d|h)$/i.test(offsetParent.tagName)||safari&amp;&amp;!safari2)border(offsetParent);if(!fixed&amp;&amp;css(offsetParent,&quot;position&quot;)==&quot;fixed&quot;)fixed=true;offsetChild=/^body$/i.test(offsetParent.tagName)?offsetChild:offsetParent;offsetParent=offsetParent.offsetParent;}while(parent&amp;&amp;parent.tagName&amp;&amp;!/^body|html$/i.test(parent.tagName)){if(!/^inline|table.*$/i.test(css(parent,&quot;display&quot;)))add(-parent.scrollLeft,-parent.scrollTop);if(mozilla&amp;&amp;css(parent,&quot;overflow&quot;)!=&quot;visible&quot;)border(parent);parent=parent.parentNode;}if((safari2&amp;&amp;(fixed||css(offsetChild,&quot;position&quot;)==&quot;absolute&quot;))||(mozilla&amp;&amp;css(offsetChild,&quot;position&quot;)!=&quot;absolute&quot;))add(-doc.body.offsetLeft,-doc.body.offsetTop);if(fixed)add(Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));}results={top:top,left:left};}function border(elem){add(jQuery.curCSS(elem,&quot;borderLeftWidth&quot;,true),jQuery.curCSS(elem,&quot;borderTopWidth&quot;,tr!
 ue));}function add(l,t){left+=parseInt(l,10)||0;top+=parseInt(!
 t,10)||0
;}return results;};jQuery.fn.extend({position:function(){var left=0,top=0,results;if(this[0]){var offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].tagName)?{top:0,left:0}:offsetParent.offset();offset.top-=num(this,'marginTop');offset.left-=num(this,'marginLeft');parentOffset.top+=num(offsetParent,'borderTopWidth');parentOffset.left+=num(offsetParent,'borderLeftWidth');results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};}return results;},offsetParent:function(){var offsetParent=this[0].offsetParent;while(offsetParent&amp;&amp;(!/^body|html$/i.test(offsetParent.tagName)&amp;&amp;jQuery.css(offsetParent,'position')=='static'))offsetParent=offsetParent.offsetParent;return jQuery(offsetParent);}});jQuery.each(['Left','Top'],function(i,name){var method='scroll'+name;jQuery.fn[method]=function(val){if(!this[0])return;return val!=undefined?this.each(function(){this==window||this==document?window.scrollTo(!i?val:jQuery(wi!
 ndow).scrollLeft(),i?val:jQuery(window).scrollTop()):this[method]=val;}):this[0]==window||this[0]==document?self[i?'pageYOffset':'pageXOffset']||jQuery.boxModel&amp;&amp;document.documentElement[method]||document.body[method]:this[0][method];};});jQuery.each([&quot;Height&quot;,&quot;Width&quot;],function(i,name){var tl=i?&quot;Left&quot;:&quot;Top&quot;,br=i?&quot;Right&quot;:&quot;Bottom&quot;;jQuery.fn[&quot;inner&quot;+name]=function(){return this[name.toLowerCase()]()+num(this,&quot;padding&quot;+tl)+num(this,&quot;padding&quot;+br);};jQuery.fn[&quot;outer&quot;+name]=function(margin){return this[&quot;inner&quot;+name]()+num(this,&quot;border&quot;+tl+&quot;Width&quot;)+num(this,&quot;border&quot;+br+&quot;Width&quot;)+(margin?num(this,&quot;margin&quot;+tl)+num(this,&quot;margin&quot;+br):0);};});})();
\ No newline at end of file

Added: online/trunk/webgriffith/public/pylons-logo.gif
===================================================================
(Binary files differ)


Property changes on: online/trunk/webgriffith/public/pylons-logo.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: online/trunk/webgriffith/templates/default/base.mako
===================================================================
--- online/trunk/webgriffith/templates/default/base.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/base.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,23 @@
+## -*- coding: utf-8 -*-
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;<A HREF="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
+    &lt;head&gt;
+        ${self.head_tags()}
+    &lt;/head&gt;
+    &lt;body&gt;
+        &lt;h1&gt;${ self.header() }&lt;/h1&gt;
+        ${ self.body() }
+        ${ self.footer() }
+    &lt;/body&gt;
+&lt;/html&gt;
+
+&lt;%def name=&quot;header()&quot;&gt;
+    ${c.header}
+&lt;/%def&gt;
+&lt;%def name=&quot;footer()&quot;&gt;
+&lt;div id=&quot;footer&quot;&gt;&lt;small&gt;Pylons &amp; WebGriffith powered&lt;/small&gt;&lt;/div&gt;
+&lt;/%def&gt;
+&lt;%def name=&quot;head_tags()&quot;&gt;
+    &lt;title&gt;WebGriffith&lt;/title&gt;
+&lt;/%def&gt;

Added: online/trunk/webgriffith/templates/default/details.mako
===================================================================
--- online/trunk/webgriffith/templates/default/details.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/details.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,127 @@
+## -*- coding: utf-8 -*-
+&lt;%page args=&quot;movie, **kwargs&quot;/&gt;
+
+##            'cameraman'      : _('Cameraman'),
+##            'color'          : _('Color'),
+##            'cond'           : _('Condition'),
+##            'image'          : _('Image'),
+##            'layers'         : _('Layers'),
+##            'media_num'      : _('Discs'),
+##            'ratio_id'       : _('Aspect ratio'),
+##            'region'         : _('Region'),
+##            'screenplay'     : _('Screenplay'),
+##            'vcodec_id'      : _('Video codec'),
+
+&lt;table id=&quot;m_${movie.number}&quot;&gt;
+ 
+	&lt;tr class=&quot;title&quot;&gt;
+		&lt;th&gt;${_('Title')}&lt;/th&gt;
+		&lt;td&gt;${movie.title}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;o_title&quot;&gt;
+		&lt;th&gt;${_('Original title')}&lt;/th&gt;
+		&lt;td&gt;${movie.o_title}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;number&quot;&gt;		
+		&lt;th&gt;${_('Number')}&lt;/th&gt;
+		&lt;td&gt;${movie.number}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;year&quot;&gt;
+		&lt;th&gt;${_('Year')}&lt;/th&gt;
+		&lt;td&gt;${movie.year}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;director&quot;&gt;
+		&lt;th&gt;${_('Director')}&lt;/th&gt;
+		&lt;td&gt;${movie.director}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;rating&quot;&gt;
+		&lt;th&gt;${_('Rating')}&lt;/th&gt;
+		&lt;td&gt;${movie.rating}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;runtime&quot;&gt;
+		&lt;th&gt;${_('Runtime')}&lt;/th&gt;
+		&lt;td&gt;${movie.runtime}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;country&quot;&gt;
+		&lt;th&gt;${_('Country')}&lt;/th&gt;
+		&lt;td&gt;${movie.country}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;genre&quot;&gt;
+		&lt;th&gt;${_('Genre')}&lt;/th&gt;
+		&lt;td&gt;${movie.genre}&lt;/td&gt;
+	&lt;/tr&gt;
+% if movie.o_site:
+	&lt;tr class=&quot;links&quot;&gt;
+		&lt;th&gt;${_('Official site')}&lt;/th&gt;
+		&lt;td&gt;&lt;a href=&quot;${movie.o_site}&quot;&gt;${movie.o_site}&lt;/a&gt;&lt;/td&gt;
+	&lt;/tr&gt;
+% endif
+% if movie.site:
+	&lt;tr class=&quot;links&quot;&gt;
+		&lt;th&gt;${_('Site')}&lt;/th&gt;
+		&lt;td&gt;&lt;a href=&quot;${movie.site}&quot;&gt;${movie.site}&lt;/a&gt;&lt;/td&gt;
+	&lt;/tr&gt;
+% endif
+% if movie.trailer:
+	&lt;tr class=&quot;links&quot;&gt;
+		&lt;th&gt;${_('Trailer')}&lt;/th&gt;
+		&lt;td&gt;&lt;a href=&quot;${movie.trailer}&quot;&gt;${movie.trailer}&lt;/a&gt;&lt;/td&gt;
+	&lt;/tr&gt;
+% endif
+	&lt;tr class=&quot;media&quot;&gt;
+		&lt;th&gt;${_('Medium')}&lt;/th&gt;
+		&lt;td&gt;${movie.medium.name}&lt;/td&gt;
+	&lt;/tr&gt;
+% if movie.collection:
+	&lt;tr class=&quot;collection&quot;&gt;
+		&lt;th&gt;${_('Collection')}&lt;/th&gt;
+		&lt;td&gt;${movie.collection.name}&lt;/td&gt;
+	&lt;/tr&gt;
+% endif
+% if movie.volume:
+	&lt;tr class=&quot;volume&quot;&gt;
+		&lt;th&gt;${_('Volume')}&lt;/th&gt;
+		&lt;td&gt;${movie.volume.name}&lt;/td&gt;
+	&lt;/tr&gt;
+% endif
+	&lt;tr class=&quot;seen&quot;&gt;
+		&lt;th&gt;${_('Seen it')}&lt;/th&gt;
+        &lt;td&gt;
+% if movie.seen:
+		${_('Yes')}
+% else:
+		${_('No')}
+% endif
+        &lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;loaned&quot;&gt;
+		&lt;th&gt;${_('Loaned')}&lt;/th&gt;
+        &lt;td&gt;
+% if movie.loaned:
+		${_('Yes')}
+% else:
+		${_('No')}
+% endif
+        &lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;classification&quot;&gt;
+		&lt;th&gt;${_('Classification')}&lt;/th&gt;
+		&lt;td&gt;${movie.classification}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;studio&quot;&gt;
+		&lt;th&gt;${_('Studio')}&lt;/th&gt;
+		&lt;td&gt;${movie.studio}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;cast&quot;&gt;
+		&lt;th&gt;${_('Cast')}&lt;/th&gt;
+		&lt;td&gt;${movie.cast}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;plot&quot;&gt;
+		&lt;th&gt;${_('Plot')}&lt;/th&gt;
+		&lt;td&gt;${movie.plot}&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr class=&quot;notes&quot;&gt;
+		&lt;th&gt;${_('Notes')}&lt;/th&gt;
+		&lt;td&gt;${movie.notes}&lt;/td&gt;
+	&lt;/tr&gt;
+&lt;/table&gt;

Added: online/trunk/webgriffith/templates/default/index.mako
===================================================================
--- online/trunk/webgriffith/templates/default/index.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/index.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,4 @@
+## -*- coding: utf-8 -*-
+&lt;%inherit file=&quot;base.mako&quot;/&gt;
+&lt;a href=&quot;${ h.url_for(action='view', id=1) }&quot;&gt;first movie&lt;/a&gt;
+

Added: online/trunk/webgriffith/templates/default/list.mako
===================================================================
--- online/trunk/webgriffith/templates/default/list.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/list.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,38 @@
+## -*- coding: utf-8 -*-
+## vim: ft=mako
+&lt;%inherit file=&quot;base.mako&quot;/&gt;
+
+&lt;div id=&quot;movie_list&quot;&gt;
+     ${showpage(movies)}
+&lt;/div&gt;
+
+&lt;p class=&quot;settings&quot;&gt;
+    &lt;a href=&quot;${ h.url_for(action='verbose', id=movies.page) }&quot;&gt;verbose mode&lt;/a&gt;
+    &lt;a href=&quot;${ h.url_for(controller='settings', action=None, id=None) }&quot;&gt;settings&lt;/a&gt;
+&lt;/p&gt;
+
+&lt;hr/&gt; 
+
+
+&lt;%def name=&quot;showpage(movies)&quot;&gt;
+    &lt;p class=&quot;movie_list_pagenum&quot;&gt;
+        ${movies.pager('$link_previous $page/$last_page $link_next', page_param='id', onclick=&quot;$('#movie_list').load('%s'); return false&quot;)}
+    &lt;/p&gt;
+    % for movie in movies:
+    &lt;div class=&quot;movie_list_row&quot;&gt;
+        &lt;span class=&quot;movie_list_number&quot;&gt;${movie.number}&lt;/span&gt;
+        &lt;span class=&quot;movie_list_title&quot;&gt;
+            &lt;a href=&quot;${ h.url_for(controller='movie', action='view', id=movie.number) }&quot;&gt;${movie.title}&lt;/a&gt;
+        &lt;/span&gt;
+    &lt;/div&gt;
+    &lt;hr /&gt;
+    % endfor
+    &lt;p&gt;
+        ${ movies.pager('~5~', page_param='id', onclick=&quot;$('#movie_list').load('%s'); return false&quot;) }
+    &lt;/p&gt;
+&lt;/%def&gt;
+
+&lt;%def name=&quot;head_tags()&quot;&gt;
+    ${parent.head_tags()}
+    ${h.javascript_link('/js/jquery.min.js')}
+&lt;/%def&gt;

Added: online/trunk/webgriffith/templates/default/movie.mako
===================================================================
--- online/trunk/webgriffith/templates/default/movie.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/movie.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,5 @@
+## -*- coding: utf-8 -*-
+&lt;%inherit file=&quot;base.mako&quot;/&gt;
+&lt;%namespace name=&quot;details_tpl&quot; file=&quot;details.mako&quot;/&gt;
+
+${details_tpl.body(movie=c.movie)}

Added: online/trunk/webgriffith/templates/default/settings.mako
===================================================================
--- online/trunk/webgriffith/templates/default/settings.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/settings.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,15 @@
+## -*- coding: utf-8 -*-
+## vim: ft=mako
+&lt;%inherit file=&quot;base.mako&quot;/&gt;
+
+&lt;div class=&quot;settings&quot;&gt;
+    &lt;p&gt;${_('Language')}: ${c.session['lang']}&lt;/p&gt;
+    &lt;p&gt;${_('Template')}: ${c.session['template']}&lt;/p&gt;
+    &lt;p&gt;${_('Items per page')}: ${c.session['items_per_page']}
+        &lt;a href=&quot;${ h.url_for(controller='settings', action='set', items=c.session['items_per_page']-1) }&quot;&gt;-&lt;/a&gt;
+        &lt;a href=&quot;${ h.url_for(controller='settings', action='set', items=c.session['items_per_page']+1) }&quot;&gt;+&lt;/a&gt;
+&lt;/p&gt;
+&lt;/div&gt;
+&lt;p&gt;
+    &lt;a href=&quot;${ h.url_for(controller='', action=None, id=None) }&quot;&gt;main page&lt;/a&gt;
+&lt;/p&gt;

Added: online/trunk/webgriffith/templates/default/verbose_list.mako
===================================================================
--- online/trunk/webgriffith/templates/default/verbose_list.mako	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/templates/default/verbose_list.mako	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,31 @@
+## -*- coding: utf-8 -*-
+## vim: ft=mako
+&lt;%inherit file=&quot;base.mako&quot;/&gt;
+&lt;%namespace name=&quot;details_tpl&quot; file=&quot;details.mako&quot;/&gt;
+
+&lt;div id=&quot;movie_list&quot;&gt;
+     ${showpage(movies)}
+&lt;/div&gt;
+
+&lt;p&gt;
+    &lt;a href=&quot;${ h.url_for(action='page', id=movies.page) }&quot;&gt;normal mode&lt;/a&gt;
+&lt;/p&gt;
+
+&lt;%def name=&quot;showpage(movies)&quot;&gt;
+    &lt;p class=&quot;movie_list_pagenum&quot;&gt;
+        ${movies.pager('$link_previous $page/$last_page $link_next', page_param='id', onclick=&quot;$('#movie_list').load('%s'); return false&quot;)}
+    &lt;/p&gt;
+    % for movie in movies:
+        ${details_tpl.body(movie=movie)}
+        &lt;hr /&gt;
+    % endfor
+    &lt;p&gt;
+        ${ movies.pager('~5~', page_param='id', onclick=&quot;$('#movie_list').load('%s'); return false&quot;) }
+    &lt;/p&gt;
+&lt;/%def&gt;
+
+## include jQuery (for pagination)
+&lt;%def name=&quot;head_tags()&quot;&gt;
+    ${parent.head_tags()}
+    ${h.javascript_link('/js/jquery.min.js')}
+&lt;/%def&gt;

Added: online/trunk/webgriffith/tests/__init__.py
===================================================================
--- online/trunk/webgriffith/tests/__init__.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/tests/__init__.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,36 @@
+&quot;&quot;&quot;Pylons application test package
+
+This package assumes the Pylons environment is already loaded, such as
+when this script is imported from the `nosetests --with-pylons=test.ini`
+command.
+
+This module initializes the application via ``websetup`` (`paster
+setup-app`) and provides the base testing objects.
+&quot;&quot;&quot;
+from unittest import TestCase
+
+from paste.deploy import loadapp
+from paste.fixture import TestApp
+from paste.script.appinstall import SetupCommand
+from pylons import config, url
+from routes.util import URLGenerator
+
+import pylons.test
+
+__all__ = ['environ', 'url', 'TestController']
+
+# Invoke websetup with the current config file
+SetupCommand('setup-app').run([config['__file__']])
+
+environ = {}
+
+class TestController(TestCase):
+
+    def __init__(self, *args, **kwargs):
+        if pylons.test.pylonsapp:
+            wsgiapp = pylons.test.pylonsapp
+        else:
+            wsgiapp = loadapp('config:%s' % config['__file__'])
+        self.app = TestApp(wsgiapp)
+        url._push_object(URLGenerator(config['routes.map'], environ))
+        TestCase.__init__(self, *args, **kwargs)

Added: online/trunk/webgriffith/tests/functional/__init__.py
===================================================================

Added: online/trunk/webgriffith/tests/functional/test_list.py
===================================================================
--- online/trunk/webgriffith/tests/functional/test_list.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/tests/functional/test_list.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,7 @@
+from webgriffith.tests import *
+
+class TestListController(TestController):
+
+    def test_index(self):
+        response = self.app.get(url(controller='list', action='index'))
+        # Test response...

Added: online/trunk/webgriffith/tests/functional/test_movie.py
===================================================================
--- online/trunk/webgriffith/tests/functional/test_movie.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/tests/functional/test_movie.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,7 @@
+from webgriffith.tests import *
+
+class TestMovieController(TestController):
+
+    def test_index(self):
+        response = self.app.get(url(controller='movie', action='index'))
+        # Test response...

Added: online/trunk/webgriffith/tests/functional/test_settings.py
===================================================================
--- online/trunk/webgriffith/tests/functional/test_settings.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/tests/functional/test_settings.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,7 @@
+from webgriffith.tests import *
+
+class TestSettingsController(TestController):
+
+    def test_index(self):
+        response = self.app.get(url(controller='settings', action='index'))
+        # Test response...

Added: online/trunk/webgriffith/tests/test_models.py
===================================================================

Added: online/trunk/webgriffith/websetup.py
===================================================================
--- online/trunk/webgriffith/websetup.py	2008-11-19 22:13:48 UTC (rev 1069)
+++ online/trunk/webgriffith/websetup.py	2008-11-22 16:40:48 UTC (rev 1070)
@@ -0,0 +1,17 @@
+&quot;&quot;&quot;Setup the WebGriffith application&quot;&quot;&quot;
+import logging
+
+from webgriffith.config.environment import load_environment
+
+log = logging.getLogger(__name__)
+
+def setup_app(command, conf, vars):
+    &quot;&quot;&quot;Place any commands to setup webgriffith here&quot;&quot;&quot;
+    load_environment(conf.global_conf, conf.local_conf)
+
+    # Load the models
+    from webgriffith.model import meta
+    meta.metadata.bind = meta.engine
+
+    # Create the tables if they aren't there already
+    meta.metadata.create_all(checkfirst=True)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000544.html">[Griffith-svn] r1069 - trunk/lib
</A></li>
	<LI>Next message: <A HREF="000546.html">[Griffith-svn] r1071 - in online/trunk/webgriffith: controllers lib
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#545">[ date ]</a>
              <a href="thread.html#545">[ thread ]</a>
              <a href="subject.html#545">[ subject ]</a>
              <a href="author.html#545">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/griffith-svn">More information about the Griffith-svn
mailing list</a><br>
</body></html>
