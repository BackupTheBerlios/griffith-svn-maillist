<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Griffith-svn] r900 - branches/0.9.x branches/0.9.x/lib trunk	trunk/data trunk/lib
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/griffith-svn/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r900%20-%20branches/0.9.x%20branches/0.9.x/lib%20trunk%0A%09trunk/data%20trunk/lib&In-Reply-To=%3C200801262001.m0QK1LZt017503%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000396.html">
   <LINK REL="Next"  HREF="000398.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Griffith-svn] r900 - branches/0.9.x branches/0.9.x/lib trunk	trunk/data trunk/lib</H1>
    <B>piotrek at BerliOS</B> 
    <A HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r900%20-%20branches/0.9.x%20branches/0.9.x/lib%20trunk%0A%09trunk/data%20trunk/lib&In-Reply-To=%3C200801262001.m0QK1LZt017503%40sheep.berlios.de%3E"
       TITLE="[Griffith-svn] r900 - branches/0.9.x branches/0.9.x/lib trunk	trunk/data trunk/lib">piotrek at mail.berlios.de
       </A><BR>
    <I>Sat Jan 26 21:01:21 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000396.html">[Griffith-svn] r897 - in branches/0.9.x: . debian
</A></li>
        <LI>Next message: <A HREF="000398.html">[Griffith-svn] r903 - branches/0.9.x/lib	branches/0.9.x/lib/plugins/movie trunk/lib trunk/lib/plugins/movie
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#397">[ date ]</a>
              <a href="thread.html#397">[ thread ]</a>
              <a href="subject.html#397">[ subject ]</a>
              <a href="author.html#397">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: piotrek
Date: 2008-01-26 21:01:20 +0100 (Sat, 26 Jan 2008)
New Revision: 900

Modified:
   branches/0.9.x/TRANSLATORS
   branches/0.9.x/griffith
   branches/0.9.x/lib/about.py
   branches/0.9.x/lib/dbupgrade.py
   trunk/TRANSLATORS
   trunk/data/griffith.desktop
   trunk/griffith
   trunk/lib/about.py
   trunk/lib/dbupgrade.py
Log:
fill in translations tab in about dialog automatically using TRANSLATORS file


Modified: branches/0.9.x/TRANSLATORS
===================================================================
--- branches/0.9.x/TRANSLATORS	2008-01-26 19:06:12 UTC (rev 899)
+++ branches/0.9.x/TRANSLATORS	2008-01-26 20:01:20 UTC (rev 900)
@@ -1,5 +1,5 @@
 * Brasilian Portuguese
-F&#225;bio Nogueira &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">deb-user-ba at ubuntu.com</A>&gt;
+F&#195;&#161;bio Nogueira &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">deb-user-ba at ubuntu.com</A>&gt;
 Alan A. Dantas &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alan.arsolto at gmail.com</A>&gt;
 Augusta Carla Klug &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">augusta_klug at yahoo.com.br</A>&gt;
 alexandrers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alexandrenescau at gmail.com</A>&gt;
@@ -12,8 +12,8 @@
 
 * Czech
 Blondak &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">blondak at neser.cz</A>&gt;
-Ondra 'Kepi' Kudl&#237;k &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kepi at igloonet.cz</A>&gt;
-Kamil P&#225;ral &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ripper42 at gmail.com</A>&gt;
+Ondra 'Kepi' Kudl&#195;&#173;k &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kepi at igloonet.cz</A>&gt;
+Kamil P&#195;&#161;ral &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ripper42 at gmail.com</A>&gt;
 
 * Danish
 Joe Dalton &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">joedalton2 at yahoo.dk</A>&gt;
@@ -27,7 +27,7 @@
 Pierre-Luc Levy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">pllevy at free.fr</A>&gt;
 Guillaume Pratte &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">guillaume at guillaumepratte.net</A>&gt;
 antou &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">antoou+inscriptions at gmail.com</A>&gt;
-R&#233;mi Preghenella &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">remi.pregh at gmail.com</A>&gt;
+R&#195;&#169;mi Preghenella &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">remi.pregh at gmail.com</A>&gt;
 sd2310 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">sd2310 at gmail.com</A>&gt;
 
 * German

Modified: branches/0.9.x/griffith
===================================================================
--- branches/0.9.x/griffith	2008-01-26 19:06:12 UTC (rev 899)
+++ branches/0.9.x/griffith	2008-01-26 20:01:20 UTC (rev 900)
@@ -196,7 +196,7 @@
 
 	def about_dialog(self, *args):
 		from about import AboutDialog
-		about_dialog = AboutDialog(self.locations['images'])
+		about_dialog = AboutDialog(self.locations)
 
 	# add movie -----------------------------------------------------------
 

Modified: branches/0.9.x/lib/about.py
===================================================================
--- branches/0.9.x/lib/about.py	2008-01-26 19:06:12 UTC (rev 899)
+++ branches/0.9.x/lib/about.py	2008-01-26 20:01:20 UTC (rev 900)
@@ -29,7 +29,9 @@
 
 class AboutDialog:
 	&quot;&quot;&quot;Shows a gtk about dialog&quot;&quot;&quot;
-	def __init__(self, images_dir):
+	def __init__(self, locations):
+		TRANSLATORS_FILE = os.path.join(locations['share'], 'TRANSLATORS') # remember to encode this file in UTF-8
+		IMAGES_DIR = locations['images']
 		dialog = gtk.AboutDialog()
 		dialog.set_name(version.pname)
 		dialog.set_version(version.pversion)
@@ -50,65 +52,24 @@
 			&quot;\nPlease visit <A HREF="http://www.peekmambo.com/\n">http://www.peekmambo.com/\n</A>&quot;),
 			'seen / unseen icons by dragonskulle &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">dragonskulle at gmail.com</A>&gt;'
 		])
-		dialog.set_translator_credits(\
-			_(&quot;Brasilian Portuguese&quot;) + &quot;:\n\t&quot; + \
-				&quot;F&#195;&#161;bio Nogueira &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">deb-user-ba at ubuntu.com</A>&gt;\n\t&quot; + \
-				&quot;Alan A. Dantas &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alan.arsolto at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;Augusta Carla Klug &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">augusta_klug at yahoo.com.br</A>&gt;\n\t&quot; + \
-				&quot;alexandrers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alexandrenescau at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Bulgarian&quot;) + &quot;:\n\t&quot; + \
-				&quot;Luchezar P. Petkov &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">luchezar.petkov at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Catalan&quot;) + &quot;:\n\t&quot; + \
-				&quot;el_libre &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">el.libre at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Czech&quot;) + &quot;:\n\t&quot; + \
-				&quot;Blondak &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">blondak at neser.cz</A>&gt;,\n\t&quot; + \
-				&quot;Ondra 'Kepi' Kudl&#195;&#173;k &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kepi at igloonet.cz</A>&gt;\n\t&quot; + \
-				&quot;Kamil P&#195;&#161;ral &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ripper42 at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Danish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Joe Dalton &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">joedalton2 at yahoo.dk</A>&gt;\n&quot; + \
-			_(&quot;Dutch&quot;) + &quot;:\n\t&quot; + \
-				&quot;Marcel Dijkstra &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">mdtje at hotmail.com</A>&gt;\n\t&quot; + \
-				&quot;Tominator &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">lambik+launchpad at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;warddr &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ward.ubuntu at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;French&quot;) + &quot;:\n\t&quot; + \
-				&quot;Guillaume Pratte &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">guillaume at guillaumepratte.net</A>&gt;\n\t&quot; + \
-				&quot;Pierre-Luc L&#195;&#169;vy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">pllevy at free.fr</A>&gt;\n\t&quot; + \
-				&quot;antou &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">antoou+inscriptions at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;R&#195;&#169;mi Preghenella &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">remi.pregh at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;sd2310 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">sd2310 at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;German&quot;) + &quot;:\n\t&quot; + \
-				&quot;Jessica Katharina Parth &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">Jessica.K.P at women-at-work.org</A>&gt;,\n\t&quot; + \
-				&quot;Sebastian Wallroth &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">sebastian at wallroth.de</A>&gt;\n\t&quot; + \
-				&quot;Christian Sagmueller &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">christian at sagmueller.net</A>&gt;,\n\t&quot; + \
-				&quot;Malte Wiemann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ryan2057 at gmx.de</A>&gt;\n&quot; + \
-			_(&quot;Greek&quot;) + &quot;:\n\t&quot; + \
-				&quot;Ioannis Koniaris &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ikoniari at csd.auth.gr</A>&gt;\n\t&quot; + \
-				&quot;Athanasia Tziola &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">erynies at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;linuxangel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">chraniotis at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Italian&quot;) + &quot;:\n\t&quot; + \
-				&quot;Diego Porcelli &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">diego.p77 at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;Simone Vendemia &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">simonevendemia at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Japanese&quot;) + &quot;:\n\t&quot; + \
-				&quot;Jack Nihil &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">jnihil at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Norwegian Bokmal&quot;) + &quot;:\n\t&quot; + \
-				&quot;Anders Oftedal &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">anders.oftedal at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Polish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Piotr Ozarowski &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ozarow+griffith at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Portuguese&quot;) + &quot;:\n\t&quot; + \
-				&quot;Vasco Nunes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">vasco.m.nunes at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Russian&quot;) + &quot;:\n\t&quot; + \
-				&quot;Pavel V. Kulikov &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kulikovpv8256 at yandex.ru</A>&gt;\n\t&quot; + \
-				&quot;Nkolay Parukhin &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">nik at sevpinro.ru</A>&gt;\n&quot; + \
-			_(&quot;Simplified Chinese&quot;) + &quot;:\n\t&quot; + \
-				&quot;kempson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kempson.chen at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Spanish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Daniel Ucero &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">escaranbujo at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Swedish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Daniel Nylander &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">po at danielnylander.se</A>&gt;\n&quot; + \
-			_(&quot;Turkish&quot;) + &quot;:\n\t&quot; + \
-				&quot;transorlate &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">iloveshorts at hotmail.com</A>&gt;\n&quot; \
-		)
-		logo_file = os.path.abspath(os.path.join(images_dir, 'griffith.png'))
+		data = None
+		if os.path.isfile(TRANSLATORS_FILE):
+			data = open(TRANSLATORS_FILE).read()
+		elif os.path.isfile(TRANSLATORS_FILE+'.gz'):
+			from gutils import decompress
+			data = decompress(open(TRANSLATORS_FILE + '.gz').read())
+		translator_credits = ''
+		if data:
+			for line in data.split('\n'):
+				if line.startswith('* '):
+					lang = line[2:]
+					if _(lang) != lang:
+						line = &quot;* %s:&quot; % _(lang)
+				translator_credits += &quot;%s\n&quot; % line
+		else:
+			translator_credits = _(&quot;See TRANSLATORS file&quot;)
+		dialog.set_translator_credits(translator_credits)
+		logo_file = os.path.abspath(os.path.join(IMAGES_DIR, 'griffith.png'))
 		logo = gtk.gdk.pixbuf_new_from_file(logo_file)
 		dialog.set_logo(logo)
 		if os.path.isfile('/usr/share/common-licenses/GPL-2'):

Modified: branches/0.9.x/lib/dbupgrade.py
===================================================================
--- branches/0.9.x/lib/dbupgrade.py	2008-01-26 19:06:12 UTC (rev 899)
+++ branches/0.9.x/lib/dbupgrade.py	2008-01-26 20:01:20 UTC (rev 900)
@@ -85,13 +85,24 @@
 		self.Lang.mapper.mapped_table.create()
 		self.Lang.mapper.mapped_table.insert().execute(name=_('English'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Brazilian Portuguese'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Bulgarian'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Catalan'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Czech'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Danish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Dutch'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('French'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('German'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Greek'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Italian'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Japanese'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Norwegian Bokmal'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Polish'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Portuguese'))
-		self.Lang.mapper.mapped_table.insert().execute(name=_('Polish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Russian'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Simplified Chinese'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Spanish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Swedish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Turkish'))
 		self.MovieLang.mapper.mapped_table.create()
 		self.Tag.mapper.mapped_table.create()
 		self.Tag.mapper.mapped_table.insert().execute(name=_('Favourite'))

Modified: trunk/TRANSLATORS
===================================================================
--- trunk/TRANSLATORS	2008-01-26 19:06:12 UTC (rev 899)
+++ trunk/TRANSLATORS	2008-01-26 20:01:20 UTC (rev 900)
@@ -1,5 +1,5 @@
 * Brasilian Portuguese
-F&#225;bio Nogueira &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">deb-user-ba at ubuntu.com</A>&gt;
+F&#195;&#161;bio Nogueira &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">deb-user-ba at ubuntu.com</A>&gt;
 Alan A. Dantas &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alan.arsolto at gmail.com</A>&gt;
 Augusta Carla Klug &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">augusta_klug at yahoo.com.br</A>&gt;
 alexandrers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alexandrenescau at gmail.com</A>&gt;
@@ -12,8 +12,8 @@
 
 * Czech
 Blondak &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">blondak at neser.cz</A>&gt;
-Ondra 'Kepi' Kudl&#237;k &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kepi at igloonet.cz</A>&gt;
-Kamil P&#225;ral &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ripper42 at gmail.com</A>&gt;
+Ondra 'Kepi' Kudl&#195;&#173;k &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kepi at igloonet.cz</A>&gt;
+Kamil P&#195;&#161;ral &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ripper42 at gmail.com</A>&gt;
 
 * Danish
 Joe Dalton &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">joedalton2 at yahoo.dk</A>&gt;
@@ -27,7 +27,7 @@
 Pierre-Luc Levy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">pllevy at free.fr</A>&gt;
 Guillaume Pratte &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">guillaume at guillaumepratte.net</A>&gt;
 antou &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">antoou+inscriptions at gmail.com</A>&gt;
-R&#233;mi Preghenella &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">remi.pregh at gmail.com</A>&gt;
+R&#195;&#169;mi Preghenella &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">remi.pregh at gmail.com</A>&gt;
 sd2310 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">sd2310 at gmail.com</A>&gt;
 
 * German

Modified: trunk/data/griffith.desktop
===================================================================
--- trunk/data/griffith.desktop	2008-01-26 19:06:12 UTC (rev 899)
+++ trunk/data/griffith.desktop	2008-01-26 20:01:20 UTC (rev 900)
@@ -2,14 +2,14 @@
 Name=Griffith
 GenericName=Griffith - Movie Collection Manager
 Comment=Movie Collection Manager
-Version=0.9.5
+Version=1.0
 Exec=griffith
 Icon=griffith.png
 Terminal=false
 Type=Application
 StartupNotify=true
 StartupWMClass=Griffith
-Categories=GNOME;GTK;Database;AudioVideo
+Categories=GNOME;GTK;Database;AudioVideo;
 
 GenericName[en_PT]=Griffith - Um gestor de colec&#195;&#167;&#195;&#181;es de filmes
 GenericName[pl]=Griffith - wspomaga zarz&#196;&#133;dzanie kolekcj&#196;&#133; film&#195;&#179;w

Modified: trunk/griffith
===================================================================
--- trunk/griffith	2008-01-26 19:06:12 UTC (rev 899)
+++ trunk/griffith	2008-01-26 20:01:20 UTC (rev 900)
@@ -195,7 +195,7 @@
 
 	def about_dialog(self, *args):
 		from about import AboutDialog
-		about_dialog = AboutDialog(self.locations['images'])
+		about_dialog = AboutDialog(self.locations)
 
 	# add movie -----------------------------------------------------------
 

Modified: trunk/lib/about.py
===================================================================
--- trunk/lib/about.py	2008-01-26 19:06:12 UTC (rev 899)
+++ trunk/lib/about.py	2008-01-26 20:01:20 UTC (rev 900)
@@ -29,7 +29,9 @@
 
 class AboutDialog:
 	&quot;&quot;&quot;Shows a gtk about dialog&quot;&quot;&quot;
-	def __init__(self, images_dir):
+	def __init__(self, locations):
+		TRANSLATORS_FILE = os.path.join(locations['share'], 'TRANSLATORS') # remember to encode this file in UTF-8
+		IMAGES_DIR = locations['images']
 		dialog = gtk.AboutDialog()
 		dialog.set_name(version.pname)
 		dialog.set_version(version.pversion)
@@ -50,65 +52,24 @@
 			&quot;\nPlease visit <A HREF="http://www.peekmambo.com/\n">http://www.peekmambo.com/\n</A>&quot;),
 			'seen / unseen icons by dragonskulle &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">dragonskulle at gmail.com</A>&gt;'
 		])
-		dialog.set_translator_credits(\
-			_(&quot;Brasilian Portuguese&quot;) + &quot;:\n\t&quot; + \
-				&quot;F&#195;&#161;bio Nogueira &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">deb-user-ba at ubuntu.com</A>&gt;\n\t&quot; + \
-				&quot;Alan A. Dantas &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alan.arsolto at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;Augusta Carla Klug &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">augusta_klug at yahoo.com.br</A>&gt;\n\t&quot; + \
-				&quot;alexandrers &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">alexandrenescau at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Bulgarian&quot;) + &quot;:\n\t&quot; + \
-				&quot;Luchezar P. Petkov &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">luchezar.petkov at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Catalan&quot;) + &quot;:\n\t&quot; + \
-				&quot;el_libre &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">el.libre at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Czech&quot;) + &quot;:\n\t&quot; + \
-				&quot;Blondak &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">blondak at neser.cz</A>&gt;,\n\t&quot; + \
-				&quot;Ondra 'Kepi' Kudl&#195;&#173;k &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kepi at igloonet.cz</A>&gt;\n\t&quot; + \
-				&quot;Kamil P&#195;&#161;ral &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ripper42 at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Danish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Joe Dalton &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">joedalton2 at yahoo.dk</A>&gt;\n&quot; + \
-			_(&quot;Dutch&quot;) + &quot;:\n\t&quot; + \
-				&quot;Marcel Dijkstra &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">mdtje at hotmail.com</A>&gt;\n\t&quot; + \
-				&quot;Tominator &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">lambik+launchpad at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;warddr &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ward.ubuntu at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;French&quot;) + &quot;:\n\t&quot; + \
-				&quot;Guillaume Pratte &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">guillaume at guillaumepratte.net</A>&gt;\n\t&quot; + \
-				&quot;Pierre-Luc L&#195;&#169;vy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">pllevy at free.fr</A>&gt;\n\t&quot; + \
-				&quot;antou &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">antoou+inscriptions at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;R&#195;&#169;mi Preghenella &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">remi.pregh at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;sd2310 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">sd2310 at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;German&quot;) + &quot;:\n\t&quot; + \
-				&quot;Jessica Katharina Parth &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">Jessica.K.P at women-at-work.org</A>&gt;,\n\t&quot; + \
-				&quot;Sebastian Wallroth &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">sebastian at wallroth.de</A>&gt;\n\t&quot; + \
-				&quot;Christian Sagmueller &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">christian at sagmueller.net</A>&gt;,\n\t&quot; + \
-				&quot;Malte Wiemann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ryan2057 at gmx.de</A>&gt;\n&quot; + \
-			_(&quot;Greek&quot;) + &quot;:\n\t&quot; + \
-				&quot;Ioannis Koniaris &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ikoniari at csd.auth.gr</A>&gt;\n\t&quot; + \
-				&quot;Athanasia Tziola &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">erynies at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;linuxangel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">chraniotis at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Italian&quot;) + &quot;:\n\t&quot; + \
-				&quot;Diego Porcelli &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">diego.p77 at gmail.com</A>&gt;\n\t&quot; + \
-				&quot;Simone Vendemia &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">simonevendemia at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Japanese&quot;) + &quot;:\n\t&quot; + \
-				&quot;Jack Nihil &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">jnihil at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Norwegian Bokmal&quot;) + &quot;:\n\t&quot; + \
-				&quot;Anders Oftedal &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">anders.oftedal at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Polish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Piotr Ozarowski &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">ozarow+griffith at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Portuguese&quot;) + &quot;:\n\t&quot; + \
-				&quot;Vasco Nunes &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">vasco.m.nunes at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Russian&quot;) + &quot;:\n\t&quot; + \
-				&quot;Pavel V. Kulikov &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kulikovpv8256 at yandex.ru</A>&gt;\n\t&quot; + \
-				&quot;Nkolay Parukhin &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">nik at sevpinro.ru</A>&gt;\n&quot; + \
-			_(&quot;Simplified Chinese&quot;) + &quot;:\n\t&quot; + \
-				&quot;kempson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">kempson.chen at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Spanish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Daniel Ucero &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">escaranbujo at gmail.com</A>&gt;\n&quot; + \
-			_(&quot;Swedish&quot;) + &quot;:\n\t&quot; + \
-				&quot;Daniel Nylander &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">po at danielnylander.se</A>&gt;\n&quot; + \
-			_(&quot;Turkish&quot;) + &quot;:\n\t&quot; + \
-				&quot;transorlate &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/griffith-svn">iloveshorts at hotmail.com</A>&gt;\n&quot; \
-		)
-		logo_file = os.path.abspath(os.path.join(images_dir, 'griffith.png'))
+		data = None
+		if os.path.isfile(TRANSLATORS_FILE):
+			data = open(TRANSLATORS_FILE).read()
+		elif os.path.isfile(TRANSLATORS_FILE+'.gz'):
+			from gutils import decompress
+			data = decompress(open(TRANSLATORS_FILE + '.gz').read())
+		translator_credits = ''
+		if data:
+			for line in data.split('\n'):
+				if line.startswith('* '):
+					lang = line[2:]
+					if _(lang) != lang:
+						line = &quot;* %s:&quot; % _(lang)
+				translator_credits += &quot;%s\n&quot; % line
+		else:
+			translator_credits = _(&quot;See TRANSLATORS file&quot;)
+		dialog.set_translator_credits(translator_credits)
+		logo_file = os.path.abspath(os.path.join(IMAGES_DIR, 'griffith.png'))
 		logo = gtk.gdk.pixbuf_new_from_file(logo_file)
 		dialog.set_logo(logo)
 		if os.path.isfile('/usr/share/common-licenses/GPL-2'):

Modified: trunk/lib/dbupgrade.py
===================================================================
--- trunk/lib/dbupgrade.py	2008-01-26 19:06:12 UTC (rev 899)
+++ trunk/lib/dbupgrade.py	2008-01-26 20:01:20 UTC (rev 900)
@@ -85,13 +85,24 @@
 		self.Lang.mapper.mapped_table.create()
 		self.Lang.mapper.mapped_table.insert().execute(name=_('English'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Brazilian Portuguese'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Bulgarian'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Catalan'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Czech'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Danish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Dutch'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('French'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('German'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Greek'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Italian'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Japanese'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Norwegian Bokmal'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Polish'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Portuguese'))
-		self.Lang.mapper.mapped_table.insert().execute(name=_('Polish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Russian'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Simplified Chinese'))
 		self.Lang.mapper.mapped_table.insert().execute(name=_('Spanish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Swedish'))
+		self.Lang.mapper.mapped_table.insert().execute(name=_('Turkish'))
 		self.MovieLang.mapper.mapped_table.create()
 		self.Tag.mapper.mapped_table.create()
 		self.Tag.mapper.mapped_table.insert().execute(name=_('Favourite'))


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000396.html">[Griffith-svn] r897 - in branches/0.9.x: . debian
</A></li>
	<LI>Next message: <A HREF="000398.html">[Griffith-svn] r903 - branches/0.9.x/lib	branches/0.9.x/lib/plugins/movie trunk/lib trunk/lib/plugins/movie
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#397">[ date ]</a>
              <a href="thread.html#397">[ thread ]</a>
              <a href="subject.html#397">[ subject ]</a>
              <a href="author.html#397">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/griffith-svn">More information about the Griffith-svn
mailing list</a><br>
</body></html>
