<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Griffith-svn] r530 - griffith/lib/plugins/imp
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/griffith-svn/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r530%20-%20griffith/lib/plugins/imp&In-Reply-To=%3C200612131302.kBDD2vTo005876%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000059.html">
   <LINK REL="Next"  HREF="000061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Griffith-svn] r530 - griffith/lib/plugins/imp</H1>
    <B>piotrek at BerliOS</B> 
    <A HREF="mailto:griffith-svn%40lists.berlios.de?Subject=Re%3A%20%5BGriffith-svn%5D%20r530%20-%20griffith/lib/plugins/imp&In-Reply-To=%3C200612131302.kBDD2vTo005876%40sheep.berlios.de%3E"
       TITLE="[Griffith-svn] r530 - griffith/lib/plugins/imp">piotrek at mail.berlios.de
       </A><BR>
    <I>Wed Dec 13 14:02:57 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000059.html">[Griffith-svn] r529 - griffith/lib/plugins/imp
</A></li>
        <LI>Next message: <A HREF="000061.html">[Griffith-svn] r531 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: piotrek
Date: 2006-12-13 14:02:57 +0100 (Wed, 13 Dec 2006)
New Revision: 530

Modified:
   griffith/lib/plugins/imp/CSV.py
Log:
fix assigment removal


Modified: griffith/lib/plugins/imp/CSV.py
===================================================================
--- griffith/lib/plugins/imp/CSV.py	2006-12-13 12:05:44 UTC (rev 529)
+++ griffith/lib/plugins/imp/CSV.py	2006-12-13 13:02:57 UTC (rev 530)
@@ -185,12 +185,12 @@
 		
 		if widget == self.b_del:
 			# re-add field to griffith
-			assigned = self.ls_assigned.get_value(self.iter_assigned,0)
-			pos1 = string.find(assigned, &quot;&gt;&quot;) +2
-			assigned = assigned[pos1:len(assigned)]
-			#print &quot;debug : new: %s     pos1: %s&quot; % (new,pos1)
+			field_name = self.ls_assigned.get_value(self.iter_assigned,1)
+
 			iterator = self.ls_griffith.append()
-			self.ls_griffith.set_value(iterator, 0, assigned)
+			self.ls_griffith.set_value(iterator, 0, field_name)
+			self.ls_griffith.set_value(iterator, 1, self.fields[field_name])
+			
 			# remove assigned row
 			self.ls_assigned.remove(self.iter_assigned)
 			


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000059.html">[Griffith-svn] r529 - griffith/lib/plugins/imp
</A></li>
	<LI>Next message: <A HREF="000061.html">[Griffith-svn] r531 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/griffith-svn">More information about the Griffith-svn
mailing list</a><br>
</body></html>
